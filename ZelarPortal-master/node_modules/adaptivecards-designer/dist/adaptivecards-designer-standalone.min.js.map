{"version":3,"file":"adaptivecards-designer-standalone.min.js","mappings":"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","sources":["webpack://ACDesigner/webpack/universalModuleDefinition","webpack://ACDesigner/../adaptivecards-controls/lib/adaptivecards-controls.js","webpack://ACDesigner/../adaptivecards-controls/lib/calendar.js","webpack://ACDesigner/../adaptivecards-controls/lib/checkbox.js","webpack://ACDesigner/../adaptivecards-controls/lib/collection.js","webpack://ACDesigner/../adaptivecards-controls/lib/constants.js","webpack://ACDesigner/../adaptivecards-controls/lib/datepicker.js","webpack://ACDesigner/../adaptivecards-controls/lib/dropdown.js","webpack://ACDesigner/../adaptivecards-controls/lib/enums.js","webpack://ACDesigner/../adaptivecards-controls/lib/inputcontrol.js","webpack://ACDesigner/../adaptivecards-controls/lib/inputwithpopup.js","webpack://ACDesigner/../adaptivecards-controls/lib/popupmenu.js","webpack://ACDesigner/../adaptivecards-controls/lib/radiobutton.js","webpack://ACDesigner/../adaptivecards-controls/lib/textbox.js","webpack://ACDesigner/../adaptivecards-controls/lib/utils.js","webpack://ACDesigner/../adaptivecards-controls/node_modules/uuid/index.js","webpack://ACDesigner/../adaptivecards-controls/node_modules/uuid/lib/bytesToUuid.js","webpack://ACDesigner/../adaptivecards-controls/node_modules/uuid/lib/rng-browser.js","webpack://ACDesigner/../adaptivecards-controls/node_modules/uuid/v1.js","webpack://ACDesigner/../adaptivecards-controls/node_modules/uuid/v4.js","webpack://ACDesigner/./node_modules/clipboard/dist/clipboard.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/rng.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/regex.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/validate.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/v1.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/parse.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/v35.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/md5.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/v3.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/v4.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/sha1.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/v5.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/nil.js","webpack://ACDesigner/./node_modules/uuid/dist/esm-browser/version.js","webpack://ACDesigner/./src/adaptive-card-schema.ts","webpack://ACDesigner/./src/adaptivecards-designer-standalone.ts","webpack://ACDesigner/./src/base-tree-item.ts","webpack://ACDesigner/./src/card-designer-surface.ts","webpack://ACDesigner/./src/card-designer.ts","webpack://ACDesigner/./src/catalogue.ts","webpack://ACDesigner/./src/constants.ts","webpack://ACDesigner/./src/containers/default/default-container.ts","webpack://ACDesigner/./src/containers/host-container.ts","webpack://ACDesigner/./src/data-treeitem.ts","webpack://ACDesigner/./src/data.ts","webpack://ACDesigner/./src/designer-peer-treeitem.ts","webpack://ACDesigner/./src/designer-peers.ts","webpack://ACDesigner/./src/dialog.ts","webpack://ACDesigner/./src/downloader.ts","webpack://ACDesigner/./src/draggable-element.ts","webpack://ACDesigner/./src/field-picker.ts","webpack://ACDesigner/./src/fullscreen-handler.ts","webpack://ACDesigner/./src/help-dialog.ts","webpack://ACDesigner/./src/miscellaneous.ts","webpack://ACDesigner/./src/open-image-dialog.ts","webpack://ACDesigner/./src/open-json-schema-dialog.ts","webpack://ACDesigner/./src/open-sample-dialog.ts","webpack://ACDesigner/./src/peer-command.ts","webpack://ACDesigner/./src/pic2card.ts","webpack://ACDesigner/./src/settings-manager.ts","webpack://ACDesigner/./src/shared.ts","webpack://ACDesigner/./src/side-panel.ts","webpack://ACDesigner/./src/splitter.ts","webpack://ACDesigner/./src/strings.ts","webpack://ACDesigner/./src/tool-box.ts","webpack://ACDesigner/./src/tool-palette.ts","webpack://ACDesigner/./src/toolbar.ts","webpack://ACDesigner/./src/tree-view.ts","webpack://ACDesigner/external {\"commonjs2\":\"adaptivecards\",\"commonjs\":\"adaptivecards\",\"root\":\"AdaptiveCards\"}","webpack://ACDesigner/external {\"commonjs2\":\"adaptivecards-templating\",\"commonjs\":\"adaptivecards-templating\",\"root\":\"ACData\"}","webpack://ACDesigner/webpack/bootstrap","webpack://ACDesigner/webpack/runtime/define property getters","webpack://ACDesigner/webpack/runtime/hasOwnProperty shorthand","webpack://ACDesigner/webpack/runtime/make namespace object","webpack://ACDesigner/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"adaptivecards\"), require(\"adaptivecards-templating\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([, ], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ACDesigner\"] = factory(require(\"adaptivecards\"), require(\"adaptivecards-templating\"));\n\telse\n\t\troot[\"ACDesigner\"] = factory(root[\"AdaptiveCards\"], root[\"ACData\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__867__, __WEBPACK_EXTERNAL_MODULE__7961__) {\nreturn ","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n__exportStar(require(\"./constants\"), exports);\n__exportStar(require(\"./enums\"), exports);\n__exportStar(require(\"./utils\"), exports);\n__exportStar(require(\"./collection\"), exports);\n__exportStar(require(\"./inputcontrol\"), exports);\n__exportStar(require(\"./inputwithpopup\"), exports);\n__exportStar(require(\"./calendar\"), exports);\n__exportStar(require(\"./dropdown\"), exports);\n__exportStar(require(\"./datepicker\"), exports);\n__exportStar(require(\"./checkbox\"), exports);\n__exportStar(require(\"./radiobutton\"), exports);\n__exportStar(require(\"./textbox\"), exports);\n__exportStar(require(\"./popupmenu\"), exports);\n//# sourceMappingURL=adaptivecards-controls.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Calendar = exports.DayCell = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar Utils = require(\"./utils\");\nvar constants_1 = require(\"./constants\");\nvar inputcontrol_1 = require(\"./inputcontrol\");\nvar DayCell = /** @class */ (function () {\n    function DayCell(date) {\n        this._isSubdued = false;\n        this._isSelected = false;\n        this.date = date;\n    }\n    DayCell.prototype.selected = function () {\n        if (this.onSelected) {\n            this.onSelected(this);\n        }\n    };\n    DayCell.prototype.render = function () {\n        var _this = this;\n        this._element = document.createElement(\"div\");\n        this._element.className = \"ms-ctrl ms-ctrl-calendarDay\";\n        this._element.innerText = this.date.getDate().toString();\n        this._element.tabIndex = 0;\n        this._element.onclick = function (e) { _this.selected(); };\n        this._element.onkeydown = function (e) {\n            if (e.key == constants_1.Constants.keys.enter) {\n                _this.selected();\n                return false;\n            }\n        };\n        return this._element;\n    };\n    DayCell.prototype.focus = function () {\n        this._element.focus();\n    };\n    Object.defineProperty(DayCell.prototype, \"isSubdued\", {\n        get: function () {\n            return this._isSubdued;\n        },\n        set: function (value) {\n            this._isSubdued = value;\n            if (this._isSubdued) {\n                this._element.classList.add(\"subdued\");\n            }\n            else {\n                this._element.classList.remove(\"subdued\");\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DayCell.prototype, \"isSelected\", {\n        get: function () {\n            return this._isSelected;\n        },\n        set: function (value) {\n            this._isSelected = value;\n            if (this._isSelected) {\n                this._element.classList.add(\"selected\");\n            }\n            else {\n                this._element.classList.remove(\"selected\");\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DayCell;\n}());\nexports.DayCell = DayCell;\nvar Calendar = /** @class */ (function (_super) {\n    __extends(Calendar, _super);\n    function Calendar() {\n        var _this = _super.call(this) || this;\n        _this._selectedDay = null;\n        _this._miniCalendarElement = document.createElement(\"table\");\n        _this._miniCalendarElement.className = \"ms-ctrl ms-ctrl-slide\";\n        _this._miniCalendarElement.cellPadding = \"0px\";\n        _this._miniCalendarElement.cellSpacing = \"0px\";\n        var miniCalendarHeader = document.createElement(\"div\");\n        miniCalendarHeader.className = \"ms-ctrl ms-ctrl-calendarHeader\";\n        miniCalendarHeader.style.display = \"flex\";\n        _this._monthYearLabelElement = document.createElement(\"div\");\n        _this._monthYearLabelElement.style.flex = \"1 1 100%\";\n        miniCalendarHeader.appendChild(_this._monthYearLabelElement);\n        var navButtons = document.createElement(\"div\");\n        navButtons.style.flex = \"0 0 auto\";\n        var button = document.createElement(\"i\");\n        button.className = \"ms-icon ms-ctrl-calendarNavButton ms-icon-chevronLeft\";\n        button.tabIndex = 0;\n        button.onclick = function (e) {\n            _this.date = Utils.addMonths(_this.date, -1);\n        };\n        button.onkeydown = function (e) {\n            if (e.key == constants_1.Constants.keys.enter) {\n                _this.date = Utils.addMonths(_this.date, -1);\n                return false;\n            }\n        };\n        navButtons.appendChild(button);\n        button = document.createElement(\"i\");\n        button.className = \"ms-icon ms-ctrl-calendarNavButton ms-icon-chevronRight\";\n        button.tabIndex = 0;\n        button.onclick = function (e) {\n            _this.date = Utils.addMonths(_this.date, 1);\n        };\n        button.onkeydown = function (e) {\n            if (e.key == constants_1.Constants.keys.enter) {\n                _this.date = Utils.addMonths(_this.date, 1);\n                return false;\n            }\n        };\n        navButtons.appendChild(button);\n        miniCalendarHeader.appendChild(navButtons);\n        _this._rootContainerElement = document.createElement(\"div\");\n        _this._rootContainerElement.className = \"ms-ctrl ms-ctrl-calendar\";\n        _this._rootContainerElement.appendChild(miniCalendarHeader);\n        _this._rootContainerElement.appendChild(_this._miniCalendarElement);\n        _this.date = new Date();\n        return _this;\n    }\n    Calendar.prototype.generateDayCells = function (baseDate) {\n        var _this = this;\n        this._days = [];\n        var inputMonth = baseDate.getMonth();\n        var inputYear = baseDate.getFullYear();\n        var start = new Date(inputYear, inputMonth, 1);\n        var end = new Date(inputYear, inputMonth, Utils.daysInMonth(inputYear, inputMonth));\n        var startDateDayOfWeek = start.getDay();\n        if ((startDateDayOfWeek - Utils.CalendarSettings.firstDayOfWeek) > 0) {\n            start = Utils.addDays(start, Utils.CalendarSettings.firstDayOfWeek - startDateDayOfWeek);\n        }\n        var endDateDayOfWeek = end.getDay();\n        var lastDayOfWeek = Utils.CalendarSettings.firstDayOfWeek + 6;\n        if ((lastDayOfWeek - endDateDayOfWeek) > 0) {\n            end = Utils.addDays(end, lastDayOfWeek - endDateDayOfWeek);\n        }\n        var endDate = end.getDate();\n        var endMonth = end.getMonth();\n        var endYear = end.getFullYear();\n        do {\n            var dayCell = new DayCell(start);\n            dayCell.onSelected = function (clickedCell) {\n                _this.selectedDayCell = clickedCell;\n                if (_this.onDateChanged) {\n                    _this.onDateChanged(_this);\n                }\n            };\n            this._days.push(dayCell);\n            var done = start.getDate() == endDate && start.getMonth() == endMonth && start.getFullYear() == endYear;\n            start = Utils.addDays(start, 1);\n        } while (!done);\n    };\n    Object.defineProperty(Calendar.prototype, \"selectedDayCell\", {\n        get: function () {\n            return this._selectedDay;\n        },\n        set: function (value) {\n            if (this._selectedDay) {\n                this._selectedDay.isSelected = false;\n            }\n            this._selectedDay = value;\n            if (this._selectedDay) {\n                this._selectedDay.isSelected = true;\n                this._date = this._selectedDay.date;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Calendar.prototype.initializeSelection = function () {\n        if (this._date) {\n            for (var i = 0; i < this._days.length; i++) {\n                if (Utils.areDatesEqual(this._days[i].date, this.date)) {\n                    this.selectedDayCell = this._days[i];\n                    break;\n                }\n            }\n        }\n    };\n    Calendar.prototype.rebuildMiniCalendar = function (newDate, oldDate) {\n        this.generateDayCells(newDate);\n        var month = newDate.getMonth();\n        this._miniCalendarElement.innerHTML = \"\";\n        this._miniCalendarElement.classList.remove(\"ms-ctrl-slide\", \"ms-ctrl-slideLeftToRight\", \"ms-ctrl-slideRightToLeft\");\n        var row = document.createElement(\"tr\");\n        var dayIndex = Utils.CalendarSettings.firstDayOfWeek;\n        for (var i = 0; i < Utils.CalendarSettings.daysInWeek; i++) {\n            var cell = document.createElement(\"td\");\n            cell.className = \"ms-ctrl ms-ctrl-calendarDayHeader\";\n            cell.innerText = Utils.CalendarSettings.getInitialDayName(dayIndex);\n            row.appendChild(cell);\n            dayIndex++;\n            if (dayIndex >= Utils.CalendarSettings.daysInWeek) {\n                dayIndex = 0;\n            }\n        }\n        this._miniCalendarElement.appendChild(row);\n        for (var i = 0; i < this._days.length; i++) {\n            if (i % 7 == 0) {\n                row = document.createElement(\"tr\");\n                this._miniCalendarElement.appendChild(row);\n            }\n            var tableCell = document.createElement(\"td\");\n            tableCell.appendChild(this._days[i].render());\n            if (this._days[i].date.getMonth() != month) {\n                this._days[i].isSubdued = true;\n            }\n            row.appendChild(tableCell);\n        }\n        if (oldDate) {\n            var timeDelta = newDate.getTime() - oldDate.getTime();\n            if (timeDelta > 0) {\n                this._miniCalendarElement.classList.add(\"ms-ctrl-slide\", \"ms-ctrl-slideRightToLeft\");\n            }\n            else if (timeDelta < 0) {\n                this._miniCalendarElement.classList.add(\"ms-ctrl-slide\", \"ms-ctrl-slideLeftToRight\");\n            }\n        }\n    };\n    Calendar.prototype.attach = function (rootElement) {\n        _super.prototype.attach.call(this, rootElement);\n        rootElement.innerHTML = \"\";\n        rootElement.appendChild(this._rootContainerElement);\n    };\n    Calendar.prototype.focus = function () {\n        if (this._selectedDay) {\n            this._selectedDay.focus();\n        }\n    };\n    Object.defineProperty(Calendar.prototype, \"date\", {\n        get: function () {\n            return this._date;\n        },\n        set: function (value) {\n            var rebuildNeeded = true;\n            var timeDelta = 0;\n            var newDate = value ? value : new Date();\n            if (this._date) {\n                rebuildNeeded = !this._days || newDate.getFullYear() != this._date.getFullYear() || newDate.getMonth() != this._date.getMonth();\n            }\n            if (rebuildNeeded) {\n                this.rebuildMiniCalendar(newDate, this._date);\n            }\n            this._date = newDate;\n            this.initializeSelection();\n            this._monthYearLabelElement.innerText = Utils.CalendarSettings.getLongMonthName(this._date.getMonth()) + \" \" + this._date.getFullYear();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Calendar;\n}(inputcontrol_1.InputControl));\nexports.Calendar = Calendar;\n//# sourceMappingURL=calendar.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CheckBox = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar constants_1 = require(\"./constants\");\nvar inputcontrol_1 = require(\"./inputcontrol\");\nvar CheckBox = /** @class */ (function (_super) {\n    __extends(CheckBox, _super);\n    function CheckBox() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._label = \"\";\n        _this._checkboxElement = null;\n        _this._spanElement = null;\n        return _this;\n    }\n    CheckBox.createId = function () {\n        var result = CheckBox.creationIndex;\n        CheckBox.creationIndex++;\n        return result;\n    };\n    CheckBox.prototype.changed = function () {\n        if (this.onChange) {\n            this.onChange(this);\n        }\n    };\n    CheckBox.prototype.keyDown = function (e) {\n        switch (e.key) {\n            case constants_1.Constants.keys.enter:\n                this.isChecked = !this.isChecked;\n                break;\n        }\n    };\n    CheckBox.prototype.attach = function (rootElement) {\n        var _this = this;\n        _super.prototype.attach.call(this, rootElement);\n        rootElement.className = \"ms-ctrl ms-ctrl-checkbox\";\n        rootElement.tabIndex = 0;\n        var labelAttribute = rootElement.attributes[\"label\"];\n        if (labelAttribute) {\n            this._label = labelAttribute.value;\n        }\n        var isCheckedAttribute = rootElement.attributes[\"ischecked\"];\n        if (isCheckedAttribute) {\n            this._isChecked = isCheckedAttribute.value === \"true\";\n        }\n        this._checkboxElement = document.createElement(\"input\");\n        this._checkboxElement.id = \"ms-ctrl-checkbox-\" + CheckBox.createId();\n        this._checkboxElement.type = \"checkbox\";\n        this._checkboxElement.style.position = \"absolute\";\n        this._checkboxElement.checked = this.isChecked;\n        this._checkboxElement.onchange = function (e) { _this.changed(); };\n        var labelElement = document.createElement(\"label\");\n        labelElement.htmlFor = this._checkboxElement.id;\n        this._spanElement = document.createElement(\"span\");\n        this._spanElement.innerText = this._label;\n        labelElement.appendChild(this._spanElement);\n        rootElement.innerHTML = \"\";\n        rootElement.appendChild(this._checkboxElement);\n        rootElement.appendChild(labelElement);\n    };\n    Object.defineProperty(CheckBox.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        set: function (value) {\n            this._label = value;\n            if (this._spanElement) {\n                this._spanElement.innerText = this._label;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CheckBox.prototype, \"isChecked\", {\n        get: function () {\n            return this._isChecked;\n        },\n        set: function (value) {\n            if (this._isChecked != value) {\n                this._isChecked = value;\n                if (this._checkboxElement) {\n                    this._checkboxElement.checked = this._isChecked;\n                }\n                this.changed();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Used to generate unique Ids\n    CheckBox.creationIndex = 0;\n    return CheckBox;\n}(inputcontrol_1.InputControl));\nexports.CheckBox = CheckBox;\n//# sourceMappingURL=checkbox.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Collection = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar Collection = /** @class */ (function () {\n    function Collection() {\n        this._items = [];\n        this.onItemAdded = null;\n        this.onItemRemoved = null;\n    }\n    Collection.prototype.get = function (index) {\n        return this._items[index];\n    };\n    Collection.prototype.add = function (item) {\n        this._items.push(item);\n        if (this.onItemAdded) {\n            this.onItemAdded(item);\n        }\n    };\n    Collection.prototype.remove = function (item) {\n        var i = this._items.indexOf(item);\n        if (i >= 0) {\n            this._items = this._items.splice(i, 1);\n            if (this.onItemRemoved) {\n                this.onItemRemoved(item);\n            }\n        }\n    };\n    Collection.prototype.indexOf = function (item) {\n        return this._items.indexOf(item);\n    };\n    Object.defineProperty(Collection.prototype, \"length\", {\n        get: function () {\n            return this._items.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Collection;\n}());\nexports.Collection = Collection;\n//# sourceMappingURL=collection.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Constants = exports.KEY_DELETE = exports.KEY_DOWN = exports.KEY_UP = exports.KEY_SPACE = exports.KEY_ESCAPE = exports.KEY_ENTER = exports.KEY_TAB = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n/**\n * @deprecated Use Constants.keys.tab instead.\n */\nexports.KEY_TAB = 9;\n/**\n * @deprecated Use Constants.keys.enter instead.\n */\nexports.KEY_ENTER = 13;\n/**\n * @deprecated Use Constants.keys.escape instead.\n */\nexports.KEY_ESCAPE = 27;\n/**\n * @deprecated Use Constants.keys.space instead.\n */\nexports.KEY_SPACE = 32;\n/**\n * @deprecated Use Constants.keys.up instead.\n */\nexports.KEY_UP = 38;\n/**\n * @deprecated Use Constants.keys.down instead.\n */\nexports.KEY_DOWN = 40;\n/**\n * @deprecated Use Constants.keys.delete instead.\n */\nexports.KEY_DELETE = 46;\nvar Constants = /** @class */ (function () {\n    function Constants() {\n    }\n    Constants.keys = {\n        tab: \"Tab\",\n        enter: \"Enter\",\n        escape: \"Escape\",\n        space: \" \",\n        up: \"ArrowUp\",\n        down: \"ArrowDown\",\n        delete: \"Delete\"\n    };\n    return Constants;\n}());\nexports.Constants = Constants;\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DatePicker = exports.CalendarPopupControl = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar inputwithpopup_1 = require(\"./inputwithpopup\");\nvar calendar_1 = require(\"./calendar\");\nvar CalendarPopupControl = /** @class */ (function (_super) {\n    __extends(CalendarPopupControl, _super);\n    function CalendarPopupControl(owner) {\n        var _this = _super.call(this) || this;\n        _this._owner = owner;\n        return _this;\n    }\n    CalendarPopupControl.prototype.renderContent = function () {\n        var _this = this;\n        var element = document.createElement(\"div\");\n        element.className = \"ms-ctrl ms-calendarPopup\";\n        this._calendar = new calendar_1.Calendar();\n        this._calendar.date = this._owner.value;\n        this._calendar.onDateChanged = function (c) {\n            _this._owner.value = c.date;\n            _this.closePopup(false);\n        };\n        this._calendar.attach(element);\n        return element;\n    };\n    CalendarPopupControl.prototype.focus = function () {\n        if (this._calendar) {\n            this._calendar.focus();\n        }\n    };\n    return CalendarPopupControl;\n}(inputwithpopup_1.PopupControl));\nexports.CalendarPopupControl = CalendarPopupControl;\nvar DatePicker = /** @class */ (function (_super) {\n    __extends(DatePicker, _super);\n    function DatePicker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DatePicker.prototype.validateRootElement = function (rootElement) {\n        if (!(rootElement instanceof HTMLDivElement)) {\n            throw new Error(\"DatePicker requires a DIV element as its root.\");\n        }\n    };\n    DatePicker.prototype.createPopupControl = function () {\n        return new CalendarPopupControl(this);\n    };\n    DatePicker.prototype.getValueAsString = function () {\n        return this.value.toLocaleDateString();\n    };\n    DatePicker.prototype.getCssClassName = function () {\n        return \"ms-ctrl ms-ctrl-datePicker\";\n    };\n    DatePicker.prototype.getButtonIconCssClassName = function () {\n        return \"ms-icon-calendar\";\n    };\n    DatePicker.prototype.popup = function () {\n        _super.prototype.popup.call(this);\n        if (this.isOpen) {\n            this.popupControl.focus();\n        }\n    };\n    return DatePicker;\n}(inputwithpopup_1.InputWithPopup));\nexports.DatePicker = DatePicker;\n//# sourceMappingURL=datepicker.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DropDown = exports.DropDownPopupControl = exports.DropDownItem = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar constants_1 = require(\"./constants\");\nvar collection_1 = require(\"./collection\");\nvar inputwithpopup_1 = require(\"./inputwithpopup\");\nvar DropDownItem = /** @class */ (function () {\n    function DropDownItem(key, value) {\n        this.key = key;\n        this._value = value;\n    }\n    DropDownItem.prototype.click = function () {\n        if (this.onClick) {\n            this.onClick(this);\n        }\n    };\n    DropDownItem.prototype.toString = function () {\n        return this.value;\n    };\n    DropDownItem.prototype.render = function () {\n        var _this = this;\n        if (!this._element) {\n            this._element = document.createElement(\"span\");\n            this._element.className = \"ms-ctrl ms-ctrl-dropdown-item\";\n            this._element.innerText = this.value;\n            this._element.setAttribute(\"role\", \"menuitem\");\n            this._element.setAttribute(\"aria-selected\", \"false\");\n            this._element.onmouseup = function (e) { _this.click(); };\n            this._element.onkeydown = function (e) {\n                if (e.key === constants_1.Constants.keys.enter) {\n                    _this.click();\n                    e.cancelBubble = true;\n                }\n            };\n        }\n        return this._element;\n    };\n    Object.defineProperty(DropDownItem.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        set: function (newValue) {\n            this._value = newValue;\n            if (this._element) {\n                this._element.innerText = newValue;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DropDownItem;\n}());\nexports.DropDownItem = DropDownItem;\nvar DropDownPopupControl = /** @class */ (function (_super) {\n    __extends(DropDownPopupControl, _super);\n    function DropDownPopupControl(owner) {\n        var _this = _super.call(this) || this;\n        _this._renderedItems = [];\n        _this._selectedIndex = -1;\n        _this._owner = owner;\n        return _this;\n    }\n    DropDownPopupControl.prototype.renderContent = function () {\n        var element = document.createElement(\"div\");\n        element.className = \"ms-ctrl ms-popup\";\n        element.setAttribute(\"role\", \"menu\");\n        var selectedIndex = this._owner.selectedIndex;\n        for (var i = 0; i < this._owner.items.length; i++) {\n            var renderedItem = this._owner.items.get(i).render();\n            renderedItem.tabIndex = 0;\n            element.appendChild(renderedItem);\n            if (i == selectedIndex) {\n                renderedItem.focus();\n            }\n            this._renderedItems.push(renderedItem);\n        }\n        return element;\n    };\n    DropDownPopupControl.prototype.keyDown = function (e) {\n        _super.prototype.keyDown.call(this, e); // handles ESC\n        var selectedItemIndex = this._selectedIndex;\n        switch (e.key) {\n            case constants_1.Constants.keys.tab:\n                this.closePopup(true);\n                break;\n            case constants_1.Constants.keys.enter:\n                if (this.selectedIndex >= 0) {\n                    this._owner.selectedIndex = this.selectedIndex;\n                    this.closePopup(false);\n                }\n                break;\n            case constants_1.Constants.keys.up:\n                if (selectedItemIndex <= 0) {\n                    selectedItemIndex = this._renderedItems.length - 1;\n                }\n                else {\n                    selectedItemIndex--;\n                    if (selectedItemIndex < 0) {\n                        selectedItemIndex = this._renderedItems.length - 1;\n                    }\n                }\n                this.selectedIndex = selectedItemIndex;\n                e.cancelBubble = true;\n                break;\n            case constants_1.Constants.keys.down:\n                if (selectedItemIndex < 0) {\n                    selectedItemIndex = 0;\n                }\n                else {\n                    selectedItemIndex++;\n                    if (selectedItemIndex >= this._renderedItems.length) {\n                        selectedItemIndex = 0;\n                    }\n                }\n                this.selectedIndex = selectedItemIndex;\n                e.cancelBubble = true;\n                break;\n        }\n    };\n    DropDownPopupControl.prototype.render = function (rootElementBounds) {\n        var renderedElement = _super.prototype.render.call(this, rootElementBounds);\n        renderedElement.style.minWidth = (rootElementBounds.width / 2) + \"px\";\n        return renderedElement;\n    };\n    Object.defineProperty(DropDownPopupControl.prototype, \"selectedIndex\", {\n        get: function () {\n            return this._selectedIndex;\n        },\n        set: function (index) {\n            if (index >= 0 && index < this._renderedItems.length) {\n                // deselect previous item (if one was selected)\n                if (this._selectedIndex >= 0 && this._selectedIndex < this._renderedItems.length) {\n                    this._renderedItems[this._selectedIndex].setAttribute(\"aria-selected\", \"false\");\n                }\n                // select new item\n                this._renderedItems[index].focus();\n                this._renderedItems[index].setAttribute(\"aria-selected\", \"true\");\n                this._selectedIndex = index;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DropDownPopupControl;\n}(inputwithpopup_1.PopupControl));\nexports.DropDownPopupControl = DropDownPopupControl;\nvar DropDown = /** @class */ (function (_super) {\n    __extends(DropDown, _super);\n    function DropDown() {\n        var _this = _super.call(this) || this;\n        _this._items = new collection_1.Collection();\n        _this._items.onItemAdded = function (item) { item.onClick = function (clickedItem) { _this.itemClicked(clickedItem); }; };\n        _this._items.onItemRemoved = function (item) { item.onClick = null; };\n        return _this;\n    }\n    DropDown.prototype.itemClicked = function (item) {\n        this.selectedItem = item;\n        this.closePopup(false);\n        this.rootElement.focus();\n    };\n    DropDown.prototype.validateRootElement = function (rootElement) {\n        if (!(rootElement instanceof HTMLDivElement)) {\n            throw new Error(\"DropDown requires a DIV element as its root.\");\n        }\n    };\n    DropDown.prototype.createPopupControl = function () {\n        return new DropDownPopupControl(this);\n    };\n    DropDown.prototype.getCssClassName = function () {\n        return \"ms-ctrl ms-ctrl-dropdown\";\n    };\n    DropDown.prototype.attach = function (rootElement) {\n        _super.prototype.attach.call(this, rootElement);\n        for (var i = 0; i < this.rootElement.children.length; i++) {\n            var childElement = this.rootElement.children[i];\n            if (childElement.tagName.toLowerCase() == \"ms-dropdown-item\") {\n                var item = new DropDownItem(childElement.attributes.getNamedItem(\"key\").value, childElement.attributes.getNamedItem(\"value\").value);\n                this._items.add(item);\n            }\n        }\n        // add aria-labelledby tag with all pertinent label ids\n        var ariaLabelledByIds = [];\n        if (this.parentLabelId) {\n            ariaLabelledByIds.push(this.parentLabelId);\n        }\n        if (this.labelId) {\n            ariaLabelledByIds.push(this.labelId);\n        }\n        if (ariaLabelledByIds.length > 0) {\n            this.rootElement.setAttribute(\"aria-labelledby\", ariaLabelledByIds.join(\" \"));\n        }\n        this.rootElement.setAttribute(\"role\", \"button\");\n        this.rootElement.setAttribute(\"aria-haspopup\", \"menu\");\n    };\n    DropDown.prototype.popup = function () {\n        _super.prototype.popup.call(this);\n        this.popupControl.selectedIndex = this.selectedIndex;\n    };\n    Object.defineProperty(DropDown.prototype, \"items\", {\n        get: function () {\n            return this._items;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DropDown.prototype, \"selectedItem\", {\n        get: function () {\n            return this.value;\n        },\n        set: function (newValue) {\n            this.value = newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DropDown.prototype, \"selectedIndex\", {\n        get: function () {\n            return this.items.indexOf(this.value);\n        },\n        set: function (index) {\n            if (index >= 0 && this.items.length > index) {\n                this.selectedItem = this.items.get(index);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DropDown.prototype, \"parentLabelId\", {\n        get: function () {\n            return this._parentLabelId;\n        },\n        set: function (value) {\n            this._parentLabelId = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DropDown;\n}(inputwithpopup_1.InputWithPopup));\nexports.DropDown = DropDown;\n//# sourceMappingURL=dropdown.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DayOfWeek = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar DayOfWeek;\n(function (DayOfWeek) {\n    DayOfWeek[DayOfWeek[\"Sunday\"] = 0] = \"Sunday\";\n    DayOfWeek[DayOfWeek[\"Monday\"] = 1] = \"Monday\";\n    DayOfWeek[DayOfWeek[\"Tuesday\"] = 2] = \"Tuesday\";\n    DayOfWeek[DayOfWeek[\"Wednesday\"] = 3] = \"Wednesday\";\n    DayOfWeek[DayOfWeek[\"Thursday\"] = 4] = \"Thursday\";\n    DayOfWeek[DayOfWeek[\"Friday\"] = 5] = \"Friday\";\n    DayOfWeek[DayOfWeek[\"Saturday\"] = 6] = \"Saturday\";\n})(DayOfWeek = exports.DayOfWeek || (exports.DayOfWeek = {}));\n//# sourceMappingURL=enums.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InputControl = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar InputControl = /** @class */ (function () {\n    function InputControl() {\n    }\n    InputControl.prototype.validateRootElement = function (rootElement) {\n        // Do nothing - all root element types are valid.\n    };\n    InputControl.prototype.keyDown = function (e) {\n        // Do nothing in base implementation\n    };\n    Object.defineProperty(InputControl.prototype, \"rootElement\", {\n        get: function () {\n            return this._rootElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    InputControl.prototype.attach = function (rootElement) {\n        var _this = this;\n        this.validateRootElement(rootElement);\n        this._rootElement = rootElement;\n        this._rootElement.onkeydown = function (e) { _this.keyDown(e); };\n    };\n    return InputControl;\n}());\nexports.InputControl = InputControl;\n//# sourceMappingURL=inputcontrol.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InputWithPopup = exports.PopupControl = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar constants_1 = require(\"./constants\");\nvar Utils = require(\"./utils\");\nvar inputcontrol_1 = require(\"./inputcontrol\");\nvar uuid_1 = require(\"uuid\");\nvar PopupControl = /** @class */ (function () {\n    function PopupControl() {\n        this._isOpen = false;\n    }\n    PopupControl.prototype.keyDown = function (e) {\n        switch (e.key) {\n            case constants_1.Constants.keys.escape:\n                this.closePopup(true);\n                break;\n        }\n    };\n    PopupControl.prototype.render = function (rootElementBounds) {\n        var _this = this;\n        var element = document.createElement(\"div\");\n        element.tabIndex = 0;\n        element.className = \"ms-ctrl ms-ctrl-popup-container\";\n        element.setAttribute(\"role\", \"dialog\");\n        element.setAttribute(\"aria-modal\", \"true\");\n        element.onkeydown = function (e) {\n            _this.keyDown(e);\n            return !e.cancelBubble;\n        };\n        element.appendChild(this.renderContent());\n        return element;\n    };\n    PopupControl.prototype.focus = function () {\n        if (this._popupElement) {\n            this._popupElement.firstElementChild.focus();\n        }\n    };\n    PopupControl.prototype.popup = function (rootElement) {\n        var _this = this;\n        if (!this._isOpen) {\n            this._overlayElement = document.createElement(\"div\");\n            this._overlayElement.className = \"ms-ctrl-overlay\";\n            this._overlayElement.tabIndex = 0;\n            this._overlayElement.style.width = document.documentElement.scrollWidth + \"px\";\n            this._overlayElement.style.height = document.documentElement.scrollHeight + \"px\";\n            this._overlayElement.onfocus = function (e) { _this.closePopup(true); };\n            document.body.appendChild(this._overlayElement);\n            var rootElementBounds = rootElement.getBoundingClientRect();\n            this._popupElement = this.render(rootElementBounds);\n            this._popupElement.classList.remove(\"ms-ctrl-slide\", \"ms-ctrl-slideLeftToRight\", \"ms-ctrl-slideRightToLeft\", \"ms-ctrl-slideTopToBottom\", \"ms-ctrl-slideRightToLeft\");\n            window.addEventListener(\"resize\", function (e) { _this.closePopup(true); });\n            var rootElementLabel = rootElement.getAttribute(\"aria-label\");\n            if (rootElementLabel) {\n                this._popupElement.setAttribute(\"aria-label\", rootElementLabel);\n            }\n            this._overlayElement.appendChild(this._popupElement);\n            var popupElementBounds = this._popupElement.getBoundingClientRect();\n            var availableSpaceBelow = window.innerHeight - rootElementBounds.bottom;\n            var availableSpaceAbove = rootElementBounds.top;\n            var availableSpaceRight = window.innerWidth - rootElementBounds.left;\n            var availableSpaceRight = window.innerWidth - rootElementBounds.right;\n            var availableSpaceLeft = rootElementBounds.left;\n            var left = rootElementBounds.left + Utils.getScrollX();\n            var top;\n            if (availableSpaceAbove < popupElementBounds.height && availableSpaceBelow < popupElementBounds.height) {\n                // Not enough space above or below root element\n                var actualPopupHeight = Math.min(popupElementBounds.height, window.innerHeight);\n                this._popupElement.style.maxHeight = actualPopupHeight + \"px\";\n                if (actualPopupHeight < popupElementBounds.height) {\n                    top = Utils.getScrollY();\n                }\n                else {\n                    top = Utils.getScrollY() + rootElementBounds.top + (rootElementBounds.height - actualPopupHeight) / 2;\n                }\n                if (availableSpaceLeft < popupElementBounds.width && availableSpaceRight < popupElementBounds.width) {\n                    // Not enough space left or right of root element\n                    var actualPopupWidth = Math.min(popupElementBounds.width, window.innerWidth);\n                    this._popupElement.style.maxWidth = actualPopupWidth + \"px\";\n                    if (actualPopupWidth < popupElementBounds.width) {\n                        left = Utils.getScrollX();\n                    }\n                    else {\n                        left = Utils.getScrollX() + rootElementBounds.left + (rootElementBounds.width - actualPopupWidth) / 2;\n                    }\n                }\n                else {\n                    // Enough space on the left or right of the root element\n                    if (availableSpaceRight >= popupElementBounds.width) {\n                        left = Utils.getScrollX() + rootElementBounds.right;\n                        this._popupElement.classList.add(\"ms-ctrl-slide\", \"ms-ctrl-slideLeftToRight\");\n                    }\n                    else {\n                        left = Utils.getScrollX() + rootElementBounds.left - popupElementBounds.width;\n                        this._popupElement.classList.add(\"ms-ctrl-slide\", \"ms-ctrl-slideRightToLeft\");\n                    }\n                }\n            }\n            else {\n                // Enough space above or below root element\n                if (availableSpaceBelow >= popupElementBounds.height) {\n                    top = Utils.getScrollY() + rootElementBounds.bottom;\n                    this._popupElement.classList.add(\"ms-ctrl-slide\", \"ms-ctrl-slideTopToBottom\");\n                }\n                else {\n                    top = Utils.getScrollY() + rootElementBounds.top - popupElementBounds.height;\n                    this._popupElement.classList.add(\"ms-ctrl-slide\", \"ms-ctrl-slideBottomToTop\");\n                }\n                if (availableSpaceRight < popupElementBounds.width) {\n                    left = Utils.getScrollX() + rootElementBounds.right - popupElementBounds.width;\n                }\n            }\n            this._popupElement.style.left = left + \"px\";\n            this._popupElement.style.top = top + \"px\";\n            this.focus();\n            this._isOpen = true;\n        }\n    };\n    PopupControl.prototype.closePopup = function (wasCancelled) {\n        if (this._isOpen) {\n            document.body.removeChild(this._overlayElement);\n            this._isOpen = false;\n            if (this.onClose) {\n                this.onClose(this, wasCancelled);\n            }\n        }\n    };\n    Object.defineProperty(PopupControl.prototype, \"isOpen\", {\n        get: function () {\n            return this._isOpen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PopupControl;\n}());\nexports.PopupControl = PopupControl;\nvar InputWithPopup = /** @class */ (function (_super) {\n    __extends(InputWithPopup, _super);\n    function InputWithPopup() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    InputWithPopup.prototype.keyDown = function (e) {\n        switch (e.key) {\n            case constants_1.Constants.keys.enter:\n                this.popup();\n                break;\n        }\n    };\n    InputWithPopup.prototype.updateLabel = function () {\n        if (this._labelElement) {\n            if (this._value) {\n                this._labelElement.innerHTML = this.getValueAsString();\n                this._labelElement.classList.remove(\"placeholder\");\n            }\n            else {\n                this._labelElement.innerText = this._placeholderText ? this._placeholderText : \"\";\n                this._labelElement.classList.add(\"placeholder\");\n            }\n        }\n    };\n    Object.defineProperty(InputWithPopup.prototype, \"popupControl\", {\n        get: function () {\n            return this._popupControl;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    InputWithPopup.prototype.getButtonIconCssClassName = function () {\n        return \"ms-icon-chevronDown\";\n    };\n    InputWithPopup.prototype.getValueAsString = function () {\n        return this._value.toString();\n    };\n    InputWithPopup.prototype.valueChanged = function () {\n        if (this.onValueChanged) {\n            this.onValueChanged(this);\n        }\n    };\n    InputWithPopup.prototype.attach = function (rootElement) {\n        var _this = this;\n        _super.prototype.attach.call(this, rootElement);\n        rootElement.tabIndex = 0;\n        rootElement.className = this.getCssClassName();\n        window.addEventListener(\"resize\", function (e) { _this.closePopup(true); });\n        this.rootElement.onclick = function (e) {\n            if (_this.isOpen) {\n                _this.closePopup(true);\n            }\n            else {\n                _this.popup();\n            }\n        };\n        var placeHolderDomItem = this.rootElement.attributes.getNamedItem(\"placeholder\");\n        if (placeHolderDomItem) {\n            this._placeholderText = placeHolderDomItem.value;\n        }\n        this._labelElement = document.createElement(\"span\");\n        this._labelElement.className = \"ms-ctrl ms-dropdown-label\";\n        this._labelElement.id = uuid_1.v4(); // generate unique id for our label element\n        this._dropDownButtonElement = document.createElement(\"i\");\n        this._dropDownButtonElement.className = \"ms-icon ms-ctrl-dropdown-button \" + this.getButtonIconCssClassName();\n        this.rootElement.appendChild(this._labelElement);\n        this.rootElement.appendChild(this._dropDownButtonElement);\n        this.updateLabel();\n    };\n    InputWithPopup.prototype.popup = function () {\n        var _this = this;\n        this._popupControl = this.createPopupControl();\n        this._popupControl.onClose = function (sender, wasCancelled) {\n            _this.closePopup(wasCancelled);\n            _this.rootElement.focus();\n        };\n        this._popupControl.popup(this.rootElement);\n    };\n    InputWithPopup.prototype.closePopup = function (wasCancelled) {\n        if (this.popupControl) {\n            this.popupControl.closePopup(wasCancelled);\n        }\n    };\n    Object.defineProperty(InputWithPopup.prototype, \"labelId\", {\n        get: function () {\n            if (this._labelElement) {\n                return this._labelElement.id;\n            }\n            return undefined;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(InputWithPopup.prototype, \"isOpen\", {\n        get: function () {\n            return this._popupControl ? this._popupControl.isOpen : false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(InputWithPopup.prototype, \"placeholderText\", {\n        get: function () {\n            return this._placeholderText;\n        },\n        set: function (value) {\n            this._placeholderText = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(InputWithPopup.prototype, \"value\", {\n        get: function () {\n            return this._value;\n        },\n        set: function (newValue) {\n            if (this._value != newValue) {\n                this._value = newValue;\n                this.updateLabel();\n                this.valueChanged();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return InputWithPopup;\n}(inputcontrol_1.InputControl));\nexports.InputWithPopup = InputWithPopup;\n//# sourceMappingURL=inputwithpopup.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PopupMenu = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar constants_1 = require(\"./constants\");\nvar collection_1 = require(\"./collection\");\nvar inputwithpopup_1 = require(\"./inputwithpopup\");\nvar PopupMenu = /** @class */ (function (_super) {\n    __extends(PopupMenu, _super);\n    function PopupMenu() {\n        var _this = _super.call(this) || this;\n        _this._items = new collection_1.Collection();\n        _this._renderedItems = [];\n        _this._selectedIndex = -1;\n        return _this;\n    }\n    PopupMenu.prototype.renderContent = function () {\n        var element = document.createElement(\"div\");\n        element.className = \"ms-ctrl ms-popup\";\n        element.setAttribute(\"role\", \"listbox\");\n        for (var i = 0; i < this._items.length; i++) {\n            var renderedItem = this._items.get(i).render();\n            renderedItem.tabIndex = 0;\n            element.appendChild(renderedItem);\n            if (i == this.selectedIndex) {\n                renderedItem.focus();\n            }\n            this._renderedItems.push(renderedItem);\n        }\n        return element;\n    };\n    PopupMenu.prototype.keyDown = function (e) {\n        _super.prototype.keyDown.call(this, e);\n        var selectedItemIndex = this._selectedIndex;\n        switch (e.key) {\n            case constants_1.Constants.keys.tab:\n                this.closePopup(true);\n                break;\n            /*\n            case Constants.keys.enter:\n                if (this.selectedIndex >= 0) {\n                    this.selectedIndex = this.selectedIndex;\n\n                    this.close();\n                }\n\n                break;\n            */\n            case constants_1.Constants.keys.up:\n                if (selectedItemIndex <= 0) {\n                    selectedItemIndex = this._renderedItems.length - 1;\n                }\n                else {\n                    selectedItemIndex--;\n                    if (selectedItemIndex < 0) {\n                        selectedItemIndex = this._renderedItems.length - 1;\n                    }\n                }\n                this.selectedIndex = selectedItemIndex;\n                e.cancelBubble = true;\n                break;\n            case constants_1.Constants.keys.down:\n                if (selectedItemIndex < 0) {\n                    selectedItemIndex = 0;\n                }\n                else {\n                    selectedItemIndex++;\n                    if (selectedItemIndex >= this._renderedItems.length) {\n                        selectedItemIndex = 0;\n                    }\n                }\n                this.selectedIndex = selectedItemIndex;\n                e.cancelBubble = true;\n                break;\n        }\n    };\n    Object.defineProperty(PopupMenu.prototype, \"items\", {\n        get: function () {\n            return this._items;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PopupMenu.prototype, \"selectedIndex\", {\n        get: function () {\n            return this._selectedIndex;\n        },\n        set: function (index) {\n            if (index >= 0 && index < this._renderedItems.length) {\n                this._renderedItems[index].focus();\n                this._selectedIndex = index;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PopupMenu;\n}(inputwithpopup_1.PopupControl));\nexports.PopupMenu = PopupMenu;\n//# sourceMappingURL=popupmenu.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RadioButton = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar constants_1 = require(\"./constants\");\nvar inputcontrol_1 = require(\"./inputcontrol\");\nvar RadioButton = /** @class */ (function (_super) {\n    __extends(RadioButton, _super);\n    function RadioButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._label = \"\";\n        _this._checkboxElement = null;\n        _this._spanElement = null;\n        return _this;\n    }\n    RadioButton.createId = function () {\n        var result = RadioButton.creationIndex;\n        RadioButton.creationIndex++;\n        return result;\n    };\n    RadioButton.prototype.changed = function () {\n        if (this.onChange) {\n            this.onChange(this);\n        }\n    };\n    RadioButton.prototype.keyDown = function (e) {\n        switch (e.key) {\n            case constants_1.Constants.keys.enter:\n                this.isChecked = !this.isChecked;\n                break;\n        }\n    };\n    RadioButton.prototype.attach = function (rootElement) {\n        var _this = this;\n        _super.prototype.attach.call(this, rootElement);\n        rootElement.className = \"ms-ctrl ms-ctrl-radiobutton\";\n        rootElement.tabIndex = 0;\n        var labelAttribute = rootElement.attributes[\"label\"];\n        if (labelAttribute) {\n            this._label = labelAttribute.value;\n        }\n        var isCheckedAttribute = rootElement.attributes[\"ischecked\"];\n        if (isCheckedAttribute) {\n            this._isChecked = isCheckedAttribute.value === \"true\";\n        }\n        this._checkboxElement = document.createElement(\"input\");\n        this._checkboxElement.id = \"ms-ctrl-radio-\" + RadioButton.createId();\n        this._checkboxElement.type = \"radio\";\n        this._checkboxElement.style.position = \"absolute\";\n        this._checkboxElement.checked = this.isChecked;\n        this._checkboxElement.onchange = function (e) { _this.changed(); };\n        var groupNameAttribute = rootElement.attributes[\"groupname\"];\n        if (groupNameAttribute) {\n            this._checkboxElement.name = groupNameAttribute.value;\n        }\n        var labelElement = document.createElement(\"label\");\n        labelElement.htmlFor = this._checkboxElement.id;\n        this._spanElement = document.createElement(\"span\");\n        this._spanElement.innerText = this._label;\n        labelElement.appendChild(this._spanElement);\n        rootElement.innerHTML = \"\";\n        rootElement.appendChild(this._checkboxElement);\n        rootElement.appendChild(labelElement);\n    };\n    Object.defineProperty(RadioButton.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        set: function (value) {\n            this._label = value;\n            if (this._spanElement) {\n                this._spanElement.innerText = this._label;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RadioButton.prototype, \"isChecked\", {\n        get: function () {\n            return this._isChecked;\n        },\n        set: function (value) {\n            if (this._isChecked != value) {\n                this._isChecked = value;\n                if (this._checkboxElement) {\n                    this._checkboxElement.checked = this._isChecked;\n                }\n                this.changed();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Used to generate unique Ids\n    RadioButton.creationIndex = 0;\n    return RadioButton;\n}(inputcontrol_1.InputControl));\nexports.RadioButton = RadioButton;\n//# sourceMappingURL=radiobutton.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextBox = void 0;\nvar Utils = require(\"./utils\");\nvar inputcontrol_1 = require(\"./inputcontrol\");\nvar EditBox = /** @class */ (function () {\n    function EditBox() {\n    }\n    EditBox.prototype.changed = function () {\n        if (this.onChange) {\n            this.onChange();\n        }\n    };\n    return EditBox;\n}());\nvar SingleLineEditBox = /** @class */ (function (_super) {\n    __extends(SingleLineEditBox, _super);\n    function SingleLineEditBox() {\n        var _this = _super.call(this) || this;\n        _this._inputElement = document.createElement(\"input\");\n        _this._inputElement.className = \"ms-ctrl ms-ctrl-textbox\";\n        _this._inputElement.type = \"text\";\n        _this._inputElement.oninput = function (e) {\n            _this.changed();\n        };\n        return _this;\n    }\n    Object.defineProperty(SingleLineEditBox.prototype, \"element\", {\n        get: function () {\n            return this._inputElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SingleLineEditBox.prototype, \"placeholder\", {\n        set: function (value) {\n            this._inputElement.placeholder = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SingleLineEditBox.prototype, \"lineCount\", {\n        set: function (value) {\n            // lineCount can't be set on a SingleLineEditBox\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SingleLineEditBox.prototype, \"maxLength\", {\n        set: function (value) {\n            if (this._inputElement.maxLength != value) {\n                this._inputElement.maxLength = value;\n                this.value = this.value.substr(0, value);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(SingleLineEditBox.prototype, \"value\", {\n        get: function () {\n            return this._inputElement.value;\n        },\n        set: function (newValue) {\n            this._inputElement.value = newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return SingleLineEditBox;\n}(EditBox));\nvar MultilineEditBox = /** @class */ (function (_super) {\n    __extends(MultilineEditBox, _super);\n    function MultilineEditBox() {\n        var _this = _super.call(this) || this;\n        _this._textareaElement = document.createElement(\"textarea\");\n        _this._textareaElement.className = \"ms-ctrl ms-ctrl-textbox ms-ctrl-textbox-multiline\";\n        _this._textareaElement.oninput = function (e) {\n            _this.changed();\n        };\n        return _this;\n    }\n    Object.defineProperty(MultilineEditBox.prototype, \"element\", {\n        get: function () {\n            return this._textareaElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultilineEditBox.prototype, \"placeholder\", {\n        set: function (value) {\n            this._textareaElement.placeholder = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultilineEditBox.prototype, \"lineCount\", {\n        set: function (value) {\n            this._textareaElement.rows = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultilineEditBox.prototype, \"maxLength\", {\n        set: function (value) {\n            if (this._textareaElement.maxLength != value) {\n                this._textareaElement.maxLength = value;\n                this.value = this.value.substr(0, value);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultilineEditBox.prototype, \"value\", {\n        get: function () {\n            return this._textareaElement.value;\n        },\n        set: function (newValue) {\n            this._textareaElement.value = newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MultilineEditBox;\n}(EditBox));\nvar TextBox = /** @class */ (function (_super) {\n    __extends(TextBox, _super);\n    function TextBox() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._isMultiline = false;\n        _this._lineCount = 3;\n        return _this;\n    }\n    TextBox.prototype.editBoxChanged = function () {\n        if (this.onChange) {\n            this.onChange(this);\n        }\n    };\n    TextBox.prototype.recreateEditBox = function () {\n        var _this = this;\n        var currentValue = null;\n        if (this._editBox) {\n            currentValue = this._editBox.value;\n        }\n        else {\n            currentValue = this.rootElement.innerText;\n        }\n        if (this._isMultiline) {\n            this._editBox = new MultilineEditBox();\n        }\n        else {\n            this._editBox = new SingleLineEditBox();\n        }\n        if (currentValue) {\n            this._editBox.value = currentValue;\n        }\n        this._editBox.lineCount = this._lineCount;\n        this._editBox.maxLength = this._maxLength;\n        this._editBox.placeholder = this._placeholder;\n        this._editBox.onChange = function () { _this.editBoxChanged(); };\n        this.rootElement.innerHTML = \"\";\n        this.rootElement.appendChild(this._editBox.element);\n    };\n    Object.defineProperty(TextBox.prototype, \"editBox\", {\n        get: function () {\n            if (!this._editBox) {\n                this.recreateEditBox();\n            }\n            return this._editBox;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TextBox.prototype.attach = function (rootElement) {\n        _super.prototype.attach.call(this, rootElement);\n        this._isMultiline = Utils.getAttributeValueAsBool(rootElement, \"ismultiline\", false);\n        this._lineCount = Utils.getAttributeValueAsInt(rootElement, \"lines\", 3);\n        this._maxLength = Utils.getAttributeValueAsInt(rootElement, \"maxlength\", 50000);\n        this._placeholder = Utils.getAttributeValueAsString(rootElement, \"placeholder\", null);\n        this.recreateEditBox();\n    };\n    Object.defineProperty(TextBox.prototype, \"value\", {\n        get: function () {\n            return this.editBox.value;\n        },\n        set: function (newValue) {\n            this.editBox.value = newValue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextBox.prototype, \"placeholder\", {\n        get: function () {\n            return this._placeholder;\n        },\n        set: function (value) {\n            this._placeholder = value;\n            this.editBox.placeholder = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextBox.prototype, \"isMultiline\", {\n        get: function () {\n            return this._isMultiline;\n        },\n        set: function (value) {\n            if (this._isMultiline != value) {\n                this._isMultiline = value;\n                this.recreateEditBox();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextBox.prototype, \"lineCount\", {\n        get: function () {\n            return this._lineCount;\n        },\n        set: function (value) {\n            if (value > 0) {\n                this._lineCount = value;\n                this.editBox.lineCount = value;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextBox.prototype, \"maxLength\", {\n        get: function () {\n            return this._maxLength;\n        },\n        set: function (value) {\n            if (value > 0) {\n                this._maxLength = value;\n                this.editBox.maxLength = value;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return TextBox;\n}(inputcontrol_1.InputControl));\nexports.TextBox = TextBox;\n//# sourceMappingURL=textbox.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAttributeValueAsInt = exports.getAttributeValueAsString = exports.getAttributeValueAsBool = exports.getScrollY = exports.getScrollX = exports.areDatesEqual = exports.addMonths = exports.addDays = exports.daysInMonth = exports.CalendarSettings = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar Enums = require(\"./enums\");\nvar CalendarSettings = /** @class */ (function () {\n    function CalendarSettings() {\n    }\n    CalendarSettings.getLongDayName = function (dayIndex) {\n        if (dayIndex >= 0 && dayIndex < CalendarSettings.longDayNames.length) {\n            return CalendarSettings.longDayNames[dayIndex];\n        }\n        throw new Error(\"Day index out of range: \" + dayIndex);\n    };\n    CalendarSettings.getShortDayName = function (dayIndex) {\n        if (dayIndex >= 0 && dayIndex < CalendarSettings.shortDayNames.length) {\n            return CalendarSettings.shortDayNames[dayIndex];\n        }\n        throw new Error(\"Day index out of range: \" + dayIndex);\n    };\n    CalendarSettings.getInitialDayName = function (dayIndex) {\n        if (dayIndex >= 0 && dayIndex < CalendarSettings.minimalDayNames.length) {\n            return CalendarSettings.minimalDayNames[dayIndex];\n        }\n        throw new Error(\"Day index out of range: \" + dayIndex);\n    };\n    CalendarSettings.getLongMonthName = function (monthIndex) {\n        if (monthIndex >= 0 && monthIndex < CalendarSettings.longMonthNames.length) {\n            return CalendarSettings.longMonthNames[monthIndex];\n        }\n        throw new Error(\"Month index out of range: \" + monthIndex);\n    };\n    CalendarSettings.getShortMonthName = function (monthIndex) {\n        if (monthIndex >= 0 && monthIndex < CalendarSettings.shortMonthNames.length) {\n            return CalendarSettings.shortMonthNames[monthIndex];\n        }\n        throw new Error(\"Month index out of range: \" + monthIndex);\n    };\n    CalendarSettings.monthsInYear = 12;\n    CalendarSettings.daysInWeek = 7;\n    CalendarSettings.firstDayOfWeek = Enums.DayOfWeek.Sunday;\n    CalendarSettings.longDayNames = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    CalendarSettings.shortDayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    CalendarSettings.minimalDayNames = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\n    CalendarSettings.longMonthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    CalendarSettings.shortMonthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    return CalendarSettings;\n}());\nexports.CalendarSettings = CalendarSettings;\nfunction daysInMonth(year, month) {\n    switch (month) {\n        case 1:\n            return (year % 4 == 0 && year % 100) || year % 400 == 0 ? 29 : 28;\n        case 3:\n        case 5:\n        case 8:\n        case 10:\n            return 30;\n        default:\n            return 31;\n    }\n}\nexports.daysInMonth = daysInMonth;\nfunction addDays(date, days) {\n    var result = new Date(date.getTime());\n    result.setDate(result.getDate() + days);\n    return result;\n}\nexports.addDays = addDays;\nfunction addMonths(date, months) {\n    var result = new Date(date.getTime());\n    var newMonth = result.getMonth() + months;\n    result.setMonth(newMonth);\n    // We want to maintain the same day-of-month, but that may not be possible if the new month doesn't have enough days.\n    // Loop until we back up to a day the new month has.\n    // (Weird modulo math is due to Javascript's treatment of negative numbers in modulo)\n    if (result.getMonth() !== ((newMonth % CalendarSettings.monthsInYear) + CalendarSettings.monthsInYear) % CalendarSettings.monthsInYear) {\n        result = addDays(result, -result.getDate());\n    }\n    return result;\n}\nexports.addMonths = addMonths;\nfunction areDatesEqual(date1, date2) {\n    return date1.getFullYear() == date2.getFullYear() &&\n        date1.getMonth() == date2.getMonth() &&\n        date1.getDate() == date2.getDate();\n}\nexports.areDatesEqual = areDatesEqual;\nfunction getScrollX() {\n    return window.pageXOffset;\n}\nexports.getScrollX = getScrollX;\nfunction getScrollY() {\n    return window.pageYOffset;\n}\nexports.getScrollY = getScrollY;\nfunction getAttributeValueAsBool(element, attributeName, defaultValue) {\n    var attribute = element.attributes[attributeName];\n    if (attribute) {\n        return attribute.value === \"true\";\n    }\n    return defaultValue;\n}\nexports.getAttributeValueAsBool = getAttributeValueAsBool;\nfunction getAttributeValueAsString(element, attributeName, defaultValue) {\n    var attribute = element.attributes[attributeName];\n    if (attribute) {\n        return attribute.value;\n    }\n    return defaultValue;\n}\nexports.getAttributeValueAsString = getAttributeValueAsString;\nfunction getAttributeValueAsInt(element, attributeName, defaultValue) {\n    var attribute = element.attributes[attributeName];\n    if (attribute) {\n        var n = parseInt(attribute.value);\n        if (!isNaN(n)) {\n            return n;\n        }\n    }\n    return defaultValue;\n}\nexports.getAttributeValueAsInt = getAttributeValueAsInt;\n//# sourceMappingURL=utils.js.map","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/*!\n * clipboard.js v2.0.8\n * https://clipboardjs.com/\n *\n * Licensed MIT  Zeno Rocha\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ClipboardJS\"] = factory();\n\telse\n\t\troot[\"ClipboardJS\"] = factory();\n})(this, function() {\nreturn /******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 134:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": function() { return /* binding */ clipboard; }\n});\n\n// EXTERNAL MODULE: ./node_modules/tiny-emitter/index.js\nvar tiny_emitter = __webpack_require__(279);\nvar tiny_emitter_default = /*#__PURE__*/__webpack_require__.n(tiny_emitter);\n// EXTERNAL MODULE: ./node_modules/good-listener/src/listen.js\nvar listen = __webpack_require__(370);\nvar listen_default = /*#__PURE__*/__webpack_require__.n(listen);\n// EXTERNAL MODULE: ./node_modules/select/src/select.js\nvar src_select = __webpack_require__(817);\nvar select_default = /*#__PURE__*/__webpack_require__.n(src_select);\n;// CONCATENATED MODULE: ./src/clipboard-action.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n/**\n * Inner class which performs selection from either `text` or `target`\n * properties and then executes copy or cut operations.\n */\n\nvar ClipboardAction = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   */\n  function ClipboardAction(options) {\n    _classCallCheck(this, ClipboardAction);\n\n    this.resolveOptions(options);\n    this.initSelection();\n  }\n  /**\n   * Defines base properties passed from constructor.\n   * @param {Object} options\n   */\n\n\n  _createClass(ClipboardAction, [{\n    key: \"resolveOptions\",\n    value: function resolveOptions() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.action = options.action;\n      this.container = options.container;\n      this.emitter = options.emitter;\n      this.target = options.target;\n      this.text = options.text;\n      this.trigger = options.trigger;\n      this.selectedText = '';\n    }\n    /**\n     * Decides which selection strategy is going to be applied based\n     * on the existence of `text` and `target` properties.\n     */\n\n  }, {\n    key: \"initSelection\",\n    value: function initSelection() {\n      if (this.text) {\n        this.selectFake();\n      } else if (this.target) {\n        this.selectTarget();\n      }\n    }\n    /**\n     * Creates a fake textarea element, sets its value from `text` property,\n     */\n\n  }, {\n    key: \"createFakeElement\",\n    value: function createFakeElement() {\n      var isRTL = document.documentElement.getAttribute('dir') === 'rtl';\n      this.fakeElem = document.createElement('textarea'); // Prevent zooming on iOS\n\n      this.fakeElem.style.fontSize = '12pt'; // Reset box model\n\n      this.fakeElem.style.border = '0';\n      this.fakeElem.style.padding = '0';\n      this.fakeElem.style.margin = '0'; // Move element out of screen horizontally\n\n      this.fakeElem.style.position = 'absolute';\n      this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px'; // Move element to the same position vertically\n\n      var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n      this.fakeElem.style.top = \"\".concat(yPosition, \"px\");\n      this.fakeElem.setAttribute('readonly', '');\n      this.fakeElem.value = this.text;\n      return this.fakeElem;\n    }\n    /**\n     * Get's the value of fakeElem,\n     * and makes a selection on it.\n     */\n\n  }, {\n    key: \"selectFake\",\n    value: function selectFake() {\n      var _this = this;\n\n      var fakeElem = this.createFakeElement();\n\n      this.fakeHandlerCallback = function () {\n        return _this.removeFake();\n      };\n\n      this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n      this.container.appendChild(fakeElem);\n      this.selectedText = select_default()(fakeElem);\n      this.copyText();\n      this.removeFake();\n    }\n    /**\n     * Only removes the fake element after another click event, that way\n     * a user can hit `Ctrl+C` to copy because selection still exists.\n     */\n\n  }, {\n    key: \"removeFake\",\n    value: function removeFake() {\n      if (this.fakeHandler) {\n        this.container.removeEventListener('click', this.fakeHandlerCallback);\n        this.fakeHandler = null;\n        this.fakeHandlerCallback = null;\n      }\n\n      if (this.fakeElem) {\n        this.container.removeChild(this.fakeElem);\n        this.fakeElem = null;\n      }\n    }\n    /**\n     * Selects the content from element passed on `target` property.\n     */\n\n  }, {\n    key: \"selectTarget\",\n    value: function selectTarget() {\n      this.selectedText = select_default()(this.target);\n      this.copyText();\n    }\n    /**\n     * Executes the copy operation based on the current selection.\n     */\n\n  }, {\n    key: \"copyText\",\n    value: function copyText() {\n      var succeeded;\n\n      try {\n        succeeded = document.execCommand(this.action);\n      } catch (err) {\n        succeeded = false;\n      }\n\n      this.handleResult(succeeded);\n    }\n    /**\n     * Fires an event based on the copy operation result.\n     * @param {Boolean} succeeded\n     */\n\n  }, {\n    key: \"handleResult\",\n    value: function handleResult(succeeded) {\n      this.emitter.emit(succeeded ? 'success' : 'error', {\n        action: this.action,\n        text: this.selectedText,\n        trigger: this.trigger,\n        clearSelection: this.clearSelection.bind(this)\n      });\n    }\n    /**\n     * Moves focus away from `target` and back to the trigger, removes current selection.\n     */\n\n  }, {\n    key: \"clearSelection\",\n    value: function clearSelection() {\n      if (this.trigger) {\n        this.trigger.focus();\n      }\n\n      document.activeElement.blur();\n      window.getSelection().removeAllRanges();\n    }\n    /**\n     * Sets the `action` to be performed which can be either 'copy' or 'cut'.\n     * @param {String} action\n     */\n\n  }, {\n    key: \"destroy\",\n\n    /**\n     * Destroy lifecycle.\n     */\n    value: function destroy() {\n      this.removeFake();\n    }\n  }, {\n    key: \"action\",\n    set: function set() {\n      var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n      this._action = action;\n\n      if (this._action !== 'copy' && this._action !== 'cut') {\n        throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n      }\n    }\n    /**\n     * Gets the `action` property.\n     * @return {String}\n     */\n    ,\n    get: function get() {\n      return this._action;\n    }\n    /**\n     * Sets the `target` property using an element\n     * that will be have its content copied.\n     * @param {Element} target\n     */\n\n  }, {\n    key: \"target\",\n    set: function set(target) {\n      if (target !== undefined) {\n        if (target && _typeof(target) === 'object' && target.nodeType === 1) {\n          if (this.action === 'copy' && target.hasAttribute('disabled')) {\n            throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n          }\n\n          if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n            throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n          }\n\n          this._target = target;\n        } else {\n          throw new Error('Invalid \"target\" value, use a valid Element');\n        }\n      }\n    }\n    /**\n     * Gets the `target` property.\n     * @return {String|HTMLElement}\n     */\n    ,\n    get: function get() {\n      return this._target;\n    }\n  }]);\n\n  return ClipboardAction;\n}();\n\n/* harmony default export */ var clipboard_action = (ClipboardAction);\n;// CONCATENATED MODULE: ./src/clipboard.js\nfunction clipboard_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { clipboard_typeof = function _typeof(obj) { return typeof obj; }; } else { clipboard_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return clipboard_typeof(obj); }\n\nfunction clipboard_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction clipboard_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction clipboard_createClass(Constructor, protoProps, staticProps) { if (protoProps) clipboard_defineProperties(Constructor.prototype, protoProps); if (staticProps) clipboard_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (clipboard_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n/**\n * Helper function to retrieve attribute value.\n * @param {String} suffix\n * @param {Element} element\n */\n\nfunction getAttributeValue(suffix, element) {\n  var attribute = \"data-clipboard-\".concat(suffix);\n\n  if (!element.hasAttribute(attribute)) {\n    return;\n  }\n\n  return element.getAttribute(attribute);\n}\n/**\n * Base class which takes one or more elements, adds event listeners to them,\n * and instantiates a new `ClipboardAction` on each click.\n */\n\n\nvar Clipboard = /*#__PURE__*/function (_Emitter) {\n  _inherits(Clipboard, _Emitter);\n\n  var _super = _createSuper(Clipboard);\n\n  /**\n   * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n   * @param {Object} options\n   */\n  function Clipboard(trigger, options) {\n    var _this;\n\n    clipboard_classCallCheck(this, Clipboard);\n\n    _this = _super.call(this);\n\n    _this.resolveOptions(options);\n\n    _this.listenClick(trigger);\n\n    return _this;\n  }\n  /**\n   * Defines if attributes would be resolved using internal setter functions\n   * or custom functions that were passed in the constructor.\n   * @param {Object} options\n   */\n\n\n  clipboard_createClass(Clipboard, [{\n    key: \"resolveOptions\",\n    value: function resolveOptions() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n      this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n      this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n      this.container = clipboard_typeof(options.container) === 'object' ? options.container : document.body;\n    }\n    /**\n     * Adds a click event listener to the passed trigger.\n     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n     */\n\n  }, {\n    key: \"listenClick\",\n    value: function listenClick(trigger) {\n      var _this2 = this;\n\n      this.listener = listen_default()(trigger, 'click', function (e) {\n        return _this2.onClick(e);\n      });\n    }\n    /**\n     * Defines a new `ClipboardAction` on each click event.\n     * @param {Event} e\n     */\n\n  }, {\n    key: \"onClick\",\n    value: function onClick(e) {\n      var trigger = e.delegateTarget || e.currentTarget;\n\n      if (this.clipboardAction) {\n        this.clipboardAction = null;\n      }\n\n      this.clipboardAction = new clipboard_action({\n        action: this.action(trigger),\n        target: this.target(trigger),\n        text: this.text(trigger),\n        container: this.container,\n        trigger: trigger,\n        emitter: this\n      });\n    }\n    /**\n     * Default `action` lookup function.\n     * @param {Element} trigger\n     */\n\n  }, {\n    key: \"defaultAction\",\n    value: function defaultAction(trigger) {\n      return getAttributeValue('action', trigger);\n    }\n    /**\n     * Default `target` lookup function.\n     * @param {Element} trigger\n     */\n\n  }, {\n    key: \"defaultTarget\",\n    value: function defaultTarget(trigger) {\n      var selector = getAttributeValue('target', trigger);\n\n      if (selector) {\n        return document.querySelector(selector);\n      }\n    }\n    /**\n     * Returns the support of the given action, or all actions if no action is\n     * given.\n     * @param {String} [action]\n     */\n\n  }, {\n    key: \"defaultText\",\n\n    /**\n     * Default `text` lookup function.\n     * @param {Element} trigger\n     */\n    value: function defaultText(trigger) {\n      return getAttributeValue('text', trigger);\n    }\n    /**\n     * Destroy lifecycle.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.listener.destroy();\n\n      if (this.clipboardAction) {\n        this.clipboardAction.destroy();\n        this.clipboardAction = null;\n      }\n    }\n  }], [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n      var actions = typeof action === 'string' ? [action] : action;\n      var support = !!document.queryCommandSupported;\n      actions.forEach(function (action) {\n        support = support && !!document.queryCommandSupported(action);\n      });\n      return support;\n    }\n  }]);\n\n  return Clipboard;\n}((tiny_emitter_default()));\n\n/* harmony default export */ var clipboard = (Clipboard);\n\n/***/ }),\n\n/***/ 828:\n/***/ (function(module) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ }),\n\n/***/ 438:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar closest = __webpack_require__(828);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n\n/***/ 879:\n/***/ (function(__unused_webpack_module, exports) {\n\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n\n\n/***/ }),\n\n/***/ 370:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar is = __webpack_require__(879);\nvar delegate = __webpack_require__(438);\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n\n/***/ }),\n\n/***/ 817:\n/***/ (function(module) {\n\nfunction select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module) {\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(__webpack_module_cache__[moduleId]) {\n/******/ \t\t\treturn __webpack_module_cache__[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t!function() {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = function(module) {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\tfunction() { return module['default']; } :\n/******/ \t\t\t\tfunction() { return module; };\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t// module exports must be returned from runtime so entry inlining is disabled\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(134);\n/******/ })()\n.default;\n});","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nexport const adaptiveCardSchema =\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"id\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n  \"type\": \"object\",\n  \"title\": \"Microsoft Adaptive Card Schema\",\n  \"additionalProperties\": true,\n  \"allOf\": [\n    {\n      \"$ref\": \"#/definitions/AdaptiveCard\"\n    }\n  ],\n  \"properties\": {\n    \"version\": {\n      \"type\": \"string\",\n      \"description\": \"version of schema that this card was authored \"\n    },\n    \"minVersion\": {\n      \"type\": \"string\",\n      \"description\": \"if a client doesn't support the minVersion the card should be rejected and return the fallbackText.  If it does, then the elements that are not supported are safe to ignore\"\n    },\n    \"fallbackText\": {\n      \"type\": \"string\",\n      \"description\": \"if a client is not able to show the card, show fallbackText to the user. This can be in markdown format. \"\n    },\n    \"speak\": {\n      \"type\": \"string\",\n      \"description\": \"Specifies what should be spoken for this entire Item. This is simple text or SSML fragment\"\n    }\n  },\n  \"required\": [\n    \"version\"\n  ],\n  \"definitions\": {\n    \"Action\": {\n      \"anyOf\": [\n        {\n          \"$ref\": \"#/definitions/Action.Submit\"\n        },\n        {\n          \"$ref\": \"#/definitions/Action.ShowCard\"\n        },\n        {\n          \"$ref\": \"#/definitions/Action.OpenUrl\"\n        }\n      ]\n    },\n    \"Action.OpenUrl\": {\n      \"additionalProperties\": true,\n      \"description\": \"When Action.OpenUrl is invoked it will show the given url, either by launching it to an external web browser or showing in-situ with embedded web browser.\",\n      \"properties\": {\n        \"title\": {\n          \"type\": \"string\",\n          \"description\": \"Label for button or link that represents this action\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be Action.OpenUrl\",\n          \"enum\": [\n            \"Action.OpenUrl\"\n          ]\n        },\n        \"url\": {\n          \"type\": \"string\",\n          \"description\": \"The URL to open\"\n        }\n      },\n      \"required\": [\n        \"type\",\n        \"url\"\n      ],\n      \"type\": \"object\"\n    },\n    \"Action.ShowCard\": {\n      \"type\": \"object\",\n      \"additionalProperties\": true,\n      \"description\": \"Action.ShowCard defines an inline AdaptiveCard which is shown to the user when it is clicked.\",\n      \"properties\": {\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be Action.ShowCard\",\n          \"enum\": [\n            \"Action.ShowCard\"\n          ]\n        },\n        \"title\": {\n          \"type\": \"string\",\n          \"description\": \"Label for button or link that represents this action\"\n        },\n        \"card\": {\n          \"$ref\": \"#/definitions/AdaptiveCard\"\n        }\n      },\n      \"required\": [\n        \"type\",\n        \"card\"\n      ]\n    },\n    \"Action.Submit\": {\n      \"type\": \"object\",\n      \"additionalProperties\": true,\n      \"description\": \"Submit action gathers up input fields, merges with optional data field and generates event to client asking for data to be submitted. It is up to the client to determine how that data is processed. For example: With BotFramework bots the client would send an activity through the messaging medium to the bot.\",\n      \"properties\": {\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be Action.Submit\",\n          \"enum\": [\n            \"Action.Submit\"\n          ]\n        },\n        \"title\": {\n          \"type\": \"string\",\n          \"description\": \"Label for button or link that represents this action\"\n        },\n        \"data\": {\n          \"type\": [ \"string\", \"object\" ],\n          \"description\": \"initial data that input fields will be combined with. This is essentially 'hidden' properties\"\n        }\n      },\n      \"required\": [\n        \"type\"\n      ]\n    },\n    \"Actions\": {\n      \"additionalItems\": true,\n      \"items\": {\n        \"$ref\": \"#/definitions/Action\"\n      },\n      \"type\": \"array\"\n    },\n    \"AdaptiveCard\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Card schema for an adaptive card\",\n      \"properties\": {\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be AdaptiveCard\",\n          \"enum\": [\n            \"AdaptiveCard\"\n          ]\n        },\n        \"actions\": {\n          \"description\": \"The Actions to show in the card's action bar\",\n          \"$ref\": \"#/definitions/Actions\"\n        },\n        \"body\": {\n          \"description\": \"The Card Elements to show in the primary card region\",\n          \"$ref\": \"#/definitions/CardElements\"\n        }\n      },\n      \"required\": [\n        \"type\",\n        \"version\"\n      ]\n    },\n    \"CardElement\": {\n      \"additionalProperties\": true,\n      \"properties\": {\n        \"type\": {\n          \"type\": \"string\"\n        },\n        \"id\": {\n          \"type\": \"string\",\n          \"description\": \"A unique Id associated with the element\"\n        },\n        \"spacing\": {\n          \"$ref\": \"#/definitions/SpacingStyle\"\n        },\n        \"separator\": {\n          \"type\": \"boolean\",\n          \"description\": \"The Separator object type describes the look and feel of a separation line between two elements.\",\n          \"default\": false\n        }\n      },\n      \"required\": [\n        \"type\"\n      ]\n    },\n    \"CardElements\": {\n      \"type\": \"array\",\n      \"additionalItems\": true,\n      \"items\": [\n        {\n          \"anyOf\": [\n            {\n              \"$ref\": \"#/definitions/TextBlock\"\n            },\n            {\n              \"$ref\": \"#/definitions/Image\"\n            },\n            {\n              \"$ref\": \"#/definitions/Container\"\n            },\n            {\n              \"$ref\": \"#/definitions/ColumnSet\"\n            },\n            {\n              \"$ref\": \"#/definitions/FactSet\"\n            },\n            {\n              \"$ref\": \"#/definitions/ImageSet\"\n            },\n            {\n              \"$ref\": \"#/definitions/Input.Text\"\n            },\n            {\n              \"$ref\": \"#/definitions/Input.Number\"\n            },\n            {\n              \"$ref\": \"#/definitions/Input.Date\"\n            },\n            {\n              \"$ref\": \"#/definitions/Input.Time\"\n            },\n            {\n              \"$ref\": \"#/definitions/Input.Toggle\"\n            },\n            {\n              \"$ref\": \"#/definitions/Input.ChoiceSet\"\n            }\n          ]\n        }\n      ]\n    },\n    \"Input.Choice\": {\n      \"type\": \"object\",\n      \"description\": \"Describes a Choice input. The value should be a simple string without a \\\",\\\"\",\n      \"additionalProperties\": true,\n      \"properties\": {\n        \"type\":{\n          \"type\":\"string\",\n          \"enum\": [\n            \"Input.Choice\"\n          ]\n        },\n        \"title\": {\n          \"type\": \"string\",\n          \"description\": \"The text for a choice\"\n        },\n        \"value\": {\n          \"type\": \"string\",\n          \"description\": \"The raw value for the choice. NOTE: do not use a \\\",\\\" in the value, since MultiSelect ChoiceSet returns a comma-delimited string of choice values\"\n        }\n      },\n      \"required\": [\n        \"title\",\n        \"value\"\n      ]\n    },\n    \"ChoiceInputStyle\": {\n      \"type\": \"string\",\n      \"description\": \"Style hint for Input.ChoiceSet\",\n      \"enum\": [\n        \"compact\",\n        \"expanded\"\n      ]\n    },\n    \"Column\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Defines a container that is part of a ColumnSet\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"items\": {\n          \"description\": \"The Card Elements to include in the Column\",\n          \"$ref\": \"#/definitions/CardElements\"\n        },\n        \"selectAction\": {\n          \"description\": \"An Action that will be invoked when the Column is tapped or selected\",\n          \"$ref\": \"#/definitions/Action\"\n        },\n        \"width\": {\n          \"type\": [\n            \"string\",\n            \"number\"\n          ],\n          \"description\": \"\\\"auto\\\", \\\"stretch\\\", or a number representing relative width of the column in the column group\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be Column\",\n          \"enum\": [\n            \"Column\"\n          ]\n        }\n      },\n      \"required\": [\n        \"items\"\n      ]\n    },\n    \"ColumnSet\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"ColumnSet divides a region into Column's allowing elements to sit side-by-side\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"columns\": {\n          \"type\": \"array\",\n          \"description\": \"The array of Columns to divide the region into\",\n          \"items\": {\n            \"$ref\": \"#/definitions/Column\"\n          }\n        },\n        \"selectAction\": {\n          \"$ref\": \"#/definitions/Action\",\n          \"description\": \"The Action that is executed when the ColumnSet is clicked/tapped\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be ColumnSet\",\n          \"enum\": [\n            \"ColumnSet\"\n          ]\n        }\n      }\n    },\n    \"Container\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Containers group items together\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"items\": {\n          \"description\": \"The Card Elements to render inside the Container\",\n          \"$ref\": \"#/definitions/CardElements\"\n        },\n        \"selectAction\": {\n          \"description\": \"An Action that will be invoked when the Image is tapped or selected\",\n          \"$ref\": \"#/definitions/Action\"\n        },\n        \"style\": {\n          \"type\": \"string\",\n          \"description\": \"Style hint for Container\",\n          \"enum\": [\n            \"default\",\n            \"emphasis\"\n          ]\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be Container\",\n          \"enum\": [\n            \"Container\"\n          ]\n        }\n      },\n      \"required\": [\n        \"items\"\n      ]\n    },\n    \"Fact\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Describes a Fact in a FactSet as a key/value pair\",\n      \"properties\": {\n        \"type\": {\n          \"type\": \"string\",\n          \"enum\": [\n            \"Fact\"\n          ]\n        },\n        \"title\": {\n          \"type\": \"string\",\n          \"description\": \"The title of the fact\"\n\n        },\n        \"value\": {\n          \"type\": \"string\",\n          \"description\": \"The value of the fact\"\n        }\n      },\n      \"required\": [\n        \"title\",\n        \"value\"\n      ]\n    },\n    \"FactSet\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"The FactSet Item makes it simple to display a series of facts (e.g. name/value pairs) in a tabular form.\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"facts\": {\n          \"type\": \"array\",\n          \"description\": \"The array of Facts\",\n          \"items\": {\n            \"$ref\": \"#/definitions/Fact\"\n          }\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be FactSet\",\n          \"enum\": [\n            \"FactSet\"\n          ]\n        }\n      },\n      \"required\": [\n        \"facts\"\n      ]\n    },\n    \"HorizontalAlignment\": {\n      \"type\": \"string\",\n      \"description\": \"Controls how Items are horizontally positioned within their container.\",\n      \"enum\": [\n        \"left\",\n        \"center\",\n        \"right\"\n      ]\n    },\n    \"Image\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"The Image Item allows for the inclusion of images in an Adaptive Card.\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"altText\": {\n          \"type\": \"string\",\n          \"description\": \"Alternate text for the image for accessibility\"\n        },\n        \"horizontalAlignment\": {\n          \"$ref\": \"#/definitions/HorizontalAlignment\"\n        },\n        \"selectAction\": {\n          \"description\": \"An Action that will be invoked when the Image is tapped or selected\",\n          \"$ref\": \"#/definitions/Action\"\n        },\n        \"size\": {\n          \"type\": \"object\",\n          \"$ref\": \"#/definitions/ImageSize\"\n        },\n        \"style\": {\n          \"$ref\": \"#/definitions/ImageStyle\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be Image\",\n          \"enum\": [\n            \"Image\"\n          ]\n        },\n        \"url\": {\n          \"type\": \"string\",\n          \"description\": \"The URL to the image.\"\n        }\n      },\n      \"required\": [\n        \"url\"\n      ]\n    },\n    \"ImageSet\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"The ImageSet allows for the inclusion of a collection images like a photogallery.\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"images\": {\n          \"type\": \"array\",\n          \"description\": \"The array of Image elements to show\",\n          \"items\": {\n            \"$ref\": \"#/definitions/Image\"\n          }\n        },\n        \"imageSize\": {\n          \"$ref\": \"#/definitions/ImageSize\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be ImageSet\",\n          \"enum\": [\n            \"ImageSet\"\n          ]\n        }\n      },\n      \"required\": [\n        \"images\"\n      ]\n    },\n    \"ImageSize\": {\n      \"type\": \"string\",\n      \"description\": \"Controls the approximate size of the image. The physical dimensions will vary per host. Specify \\\"auto\\\" for true image dimension or \\\"stretch\\\" to force it to fill the container\",\n      \"default\": \"auto\",\n      \"enum\": [\n        \"auto\",\n        \"stretch\",\n        \"small\",\n        \"medium\",\n        \"large\"\n      ]\n    },\n    \"ImageStyle\": {\n      \"type\": \"string\",\n      \"description\": \"Controls the way Images are displayed\",\n      \"enum\": [\n        \"default\",\n        \"person\"\n      ]\n    },\n    \"Input.ChoiceSet\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Shows an array of Choice objects\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"choices\": {\n          \"type\": \"array\",\n          \"description\": \"the choice options\",\n          \"items\": {\n            \"$ref\": \"#/definitions/Input.Choice\"\n          }\n        },\n        \"id\": {\n          \"type\": \"string\",\n          \"description\": \"Id for the value (will be used to identify collected input when SUBMIT is clicked)\"\n        },\n        \"isMultiSelect\": {\n          \"type\": \"boolean\",\n          \"description\": \"allow multiple choices to be selected\",\n          \"default\": false\n        },\n        \"style\": {\n          \"$ref\": \"#/definitions/ChoiceInputStyle\"\n        },\n        \"type\": {\n          \"description\": \"Must be Input.ChoiceInput\",\n          \"enum\": [\n            \"Input.ChoiceSet\"\n          ],\n          \"type\": \"string\"\n        },\n        \"value\": {\n          \"type\": \"string\",\n          \"description\": \"The initial choice (or set of choices) that should be selected. For multi-select, specifcy a comma-separated string of values\"\n        }\n      },\n      \"required\": [\n        \"id\",\n        \"choices\"\n      ]\n    },\n    \"Input.Date\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Input.Date collects Date from the user,\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"id\": {\n          \"type\": \"string\",\n          \"description\": \"Id for the value (will be used to identify collected input when SUBMIT is clicked)\"\n        },\n        \"max\": {\n          \"type\": \"string\",\n          \"description\": \"hint of maximum value expressed in ISO-8601 format (may be ignored by some clients)\"\n        },\n        \"min\": {\n          \"type\": \"string\",\n          \"description\": \"hint of minimum value expressed in ISO-8601 format (may be ignored by some clients)\"\n        },\n        \"placeholder\": {\n          \"type\": \"string\",\n          \"description\": \"Title Description of the input desired\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"The type must be Input.Date\",\n          \"enum\": [\n            \"Input.Date\"\n          ]\n        },\n        \"value\": {\n          \"type\": \"string\",\n          \"description\": \"The initial value for a field expressed in ISO-8601 format\"\n        }\n      },\n      \"required\": [\n        \"id\"\n      ]\n    },\n    \"Input.Number\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Input.Number collects number from the user,\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"id\": {\n          \"type\": \"string\",\n          \"description\": \"Id for the value (will be used to identify collected input when SUBMIT is clicked)\"\n        },\n        \"max\": {\n          \"type\": \"number\",\n          \"description\": \"hint of maximum value (may be ignored by some clients)\"\n        },\n        \"min\": {\n          \"type\": \"number\",\n          \"description\": \"hint of minimum value (may be ignored by some clients)\"\n        },\n        \"placeholder\": {\n          \"type\": \"string\",\n          \"description\": \"Title Description of the input desired\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"The type must be Input.Number\",\n          \"enum\": [\n            \"Input.Number\"\n          ]\n        },\n        \"value\": {\n          \"type\": \"number\",\n          \"description\": \"The initial value for a field\"\n        }\n      },\n      \"required\": [\n        \"id\"\n      ]\n    },\n    \"Input.Text\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Input.Text collects text from the user,\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"id\": {\n          \"type\": \"string\",\n          \"description\": \"Id for the value (will be used to identify collected input when SUBMIT is clicked)\"\n        },\n        \"isMultiline\": {\n          \"type\": \"boolean\",\n          \"description\": \"Do you want to allow multiple lines of input\"\n        },\n        \"maxLength\": {\n          \"type\": \"number\",\n          \"description\": \"hint of maximum length characters to collect (may be ignored by some clients)\"\n        },\n        \"placeholder\": {\n          \"type\": \"string\",\n          \"description\": \"Title Description of the input desired\"\n        },\n        \"style\": {\n          \"$ref\": \"#/definitions/TextInputStyle\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Input.Text\",\n          \"enum\": [\n            \"Input.Text\"\n          ]\n        },\n        \"value\": {\n          \"type\": \"string\",\n          \"description\": \"The initial value for a field\"\n        }\n      },\n      \"required\": [\n        \"id\"\n      ]\n    },\n    \"Input.Time\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Input.Time collects Time from the user,\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"id\": {\n          \"type\": \"string\",\n          \"description\": \"Id for the value (will be used to identify collected input when SUBMIT is clicked)\"\n        },\n        \"max\": {\n          \"type\": \"string\",\n          \"description\": \"hint of maximum value (may be ignored by some clients)\"\n        },\n        \"min\": {\n          \"type\": \"string\",\n          \"description\": \"hint of minimum value (may be ignored by some clients)\"\n        },\n        \"placeholder\": {\n          \"type\": \"string\",\n          \"description\": \"Title Description of the input desired\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"The type must be Input.Time\",\n          \"enum\": [\n            \"Input.Time\"\n          ]\n        },\n        \"value\": {\n          \"type\": \"string\",\n          \"description\": \"The initial value for a field expressed in ISO-8601 format\"\n        }\n      },\n      \"required\": [\n        \"id\"\n      ]\n    },\n    \"Input.Toggle\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"Input.Toggle collects a true/false response from the user\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"id\": {\n          \"type\": \"string\",\n          \"description\": \"Id for the value (will be used to identify collected input when SUBMIT is clicked)\"\n        },\n        \"title\": {\n          \"type\": \"string\",\n          \"description\": \"Title for the toggle\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Input.Toggle\",\n          \"enum\": [\n            \"Input.Toggle\"\n          ]\n        },\n        \"value\": {\n          \"type\": \"string\",\n          \"description\": \"The current selected value (default:false)\"\n        },\n        \"valueOff\": {\n          \"type\": \"string\",\n          \"description\": \"The value when toggle is off (default:false)\"\n        },\n        \"valueOn\": {\n          \"type\": \"string\",\n          \"description\": \"The value when toggle is on (default:true)\"\n        }\n      },\n      \"required\": [\n        \"id\",\n        \"title\"\n      ]\n    },\n    \"TextBlock\": {\n      \"additionalProperties\": true,\n      \"type\": \"object\",\n      \"description\": \"The TextBlock Item allows for the inclusion of text, with various font sizes, weight and color, in Adaptive Cards.\",\n      \"allOf\": [\n        {\n          \"$ref\": \"#/definitions/CardElement\"\n        }\n      ],\n      \"properties\": {\n        \"color\": {\n          \"type\": \"string\",\n          \"description\": \"Controls the color of TextBlock Items.\",\n          \"enum\": [\n            \"default\",\n            \"dark\",\n            \"light\",\n            \"accent\",\n            \"good\",\n            \"warning\",\n            \"attention\"\n          ]\n        },\n        \"horizontalAlignment\": {\n          \"$ref\": \"#/definitions/HorizontalAlignment\"\n        },\n        \"isSubtle\": {\n          \"type\": \"boolean\",\n          \"description\": \"Indicates whether the color of the text should be slightly toned down to appear less prominent\"\n        },\n        \"maxLines\": {\n          \"type\": \"number\",\n          \"description\": \"When Wrap is true, you can specify the maximum number of lines to allow the textBlock to use.\"\n        },\n        \"size\": {\n          \"type\": \"string\",\n          \"description\": \"controls size of the text.\",\n          \"enum\": [\n            \"small\",\n            \"default\",\n            \"medium\",\n            \"large\",\n            \"extraLarge\"\n          ]\n        },\n        \"text\": {\n          \"type\": \"string\",\n          \"description\": \"The actual text to display\"\n        },\n        \"type\": {\n          \"type\": \"string\",\n          \"description\": \"Must be TextBlock\",\n          \"enum\": [\n            \"TextBlock\"\n          ]\n        },\n        \"weight\": {\n          \"type\": \"string\",\n          \"description\": \"Controls the weight of TextBlock Items\",\n          \"enum\": [\n            \"lighter\",\n            \"default\",\n            \"bolder\"\n          ]\n        },\n        \"wrap\": {\n          \"type\": \"boolean\",\n          \"description\": \"True if be is allowed to wrap\"\n        }\n      },\n      \"required\": [\n        \"text\"\n      ]\n    },\n    \"SeparatorStyle\": {\n      \"type\": \"object\",\n      \"description\": \"Indicates whether there should be a visible separator (e.g. a line) between the element and the one before it. If this property is not specified, no separator is displayed. If it is, a separator line is displayed. A separator will only appear if there was a preceding element.\",\n      \"properties\": {\n        \"thickness\": {\n          \"type\": \"string\",\n          \"description\": \"Specifies the thickness of the separation line.\",\n          \"enum\": [\n            \"default\",\n            \"thick\"\n          ]\n        },\n        \"color\": {\n          \"type\": \"string\",\n          \"description\": \"Specifies the color of the separation line.\",\n          \"enum\": [\n            \"default\",\n            \"accent\"\n          ]\n        }\n      }\n    },\n    \"SpacingStyle\": {\n      \"type\": \"string\",\n      \"description\": \"Controls the amount of spacing between this element and the previous element.\",\n      \"enum\": [\n        \"none\",\n        \"small\",\n        \"default\",\n        \"medium\",\n        \"large\",\n        \"extraLarge\",\n        \"padding\"\n      ]\n    },\n    \"TextInputStyle\": {\n      \"type\": \"string\",\n      \"description\": \"Style hint for Input.Text.\",\n      \"enum\": [\n        \"text\",\n        \"tel\",\n        \"url\",\n        \"email\"\n      ]\n    }\n  }\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nexport * from \"./strings\";\nexport * from \"./shared\";\nexport * from \"./containers/host-container\";\nexport * from \"./containers/default/default-container\";\nexport * from \"./field-picker\";\nexport * from \"./card-designer-surface\";\nexport * from \"./card-designer\";\nexport * from \"./constants\";\nexport * from \"./draggable-element\";\nexport * from \"./designer-peers\";\nexport * from \"./peer-command\";\nexport * from \"./miscellaneous\";\nexport * from \"./settings-manager\";\nexport * from \"./side-panel\";\nexport * from \"./tool-box\";\nexport * from \"./toolbar\";\nexport * from \"./tool-palette\";\nexport * from \"./splitter\";\nexport * from \"./tree-view\";\nexport * from \"./base-tree-item\";\nexport * from \"./designer-peer-treeitem\";\nexport * from \"./data\";\nexport * from \"./catalogue\";\nexport * from \"./containers/host-container\";\nexport * from \"./containers/default/default-container\";\nexport * from \"./pic2card\";\n","import { DraggableElement } from \"./draggable-element\";\nimport { Constants } from \"adaptivecards-controls\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport abstract class BaseTreeItem extends DraggableElement {\n    private static collapsedIconClass = \"acd-icon-chevronRight\";\n    private static expandedIconClass = \"acd-icon-chevronDown\";\n\n    private _isExpanded: boolean = true;\n    private _isSelected: boolean = false;\n    private _rootElement: HTMLElement;\n    private _treeItemElement: HTMLElement;\n    private _expandCollapseElement: HTMLElement;\n    private _childContainerElement: HTMLElement;\n\n    private needsToBeScrolled() {\n        // detect the case where the treeViewHost's parent isn't currently\n        // overflowed. if it *is* overflowed (has scrollbar), then scrolling is\n        // appropriate. otherwise, we might be in a small-screen situation\n        // (single column rendering) where scrolling is undesireable\n        const treeViewHostParent = this._rootElement.closest(\".acd-treeView-host\").parentElement;\n        return (treeViewHostParent && treeViewHostParent.scrollHeight > treeViewHostParent.clientHeight);\n    }\n\n    private setIsSelected(value: boolean, scrollIntoView: boolean) {\n        if (this._isSelected !== value) {\n            this._isSelected = value;\n\n            if (this._isSelected) {\n                this._treeItemElement.classList.add(\"selected\");\n            }\n            else {\n                this._treeItemElement.classList.remove(\"selected\");\n            }\n\n            this._rootElement.setAttribute(\"aria-selected\", this._isSelected.toString());\n\n            this.selectedChanged(scrollIntoView);\n        }\n    }\n\n    protected abstract getLabelText(): string;\n\n    protected click(e: MouseEvent) {\n        super.click(e);\n\n        this.setIsSelected(true, false);\n    }\n\n    protected getIconClass(): string {\n        return null;\n    }\n\n    protected getAdditionalText(): string {\n        return null;\n    }\n\n    protected getAdditionalTextClass(): string {\n        return \"acd-tree-item-additionalText\";\n    }\n\n    protected getIndentationLevelIncrement(): number {\n        return 8;\n    }\n\n    protected getDragSourceElement(): HTMLElement {\n        return this._treeItemElement;\n    }\n\n    protected selectedChanged(scrollIntoView: boolean) {\n        if (this.isSelected && scrollIntoView && this.needsToBeScrolled()) {\n            this._rootElement.scrollIntoView();\n        }\n\n        if (this.onSelectedChange) {\n            this.onSelectedChange(this);\n        }\n    }\n\n    private getExpandCollapseAriaText() : string {\n        return (this._isExpanded ? \"collapse\" : \"expand\") + \" \" + this.getLabelText() + \" element\";\n    }\n\n    protected internalRender(): HTMLElement {\n        const hasChildren = (this.getChildCount() > 0);\n\n        const labelId = uuidv4();\n\n        this._rootElement = document.createElement(\"li\");\n        this._rootElement.style.paddingLeft = \"0\";\n        this._rootElement.style.listStyleType = \"none\";\n        this._rootElement.setAttribute(\"aria-labelledby\", labelId);\n        this._rootElement.setAttribute(\"aria-level\", this._level.toString());\n        this._rootElement.setAttribute(\"aria-selected\", this._isSelected.toString());\n        this._rootElement.tabIndex = 0;\n\n        if (hasChildren) {\n            this._rootElement.setAttribute(\"aria-expanded\", this._isExpanded.toString());\n        }\n\n        this._rootElement.setAttribute(\"role\", \"treeitem\");\n        this._rootElement.onclick = () => { this.click; };\n        this._rootElement.onkeydown = (e: KeyboardEvent) => {\n            if (e.key === Constants.keys.enter || e.key === Constants.keys.space) {\n                this.setIsSelected(!this.isSelected, !this.isSelected);\n                this._rootElement.focus();\n                e.preventDefault();\n                e.cancelBubble = true;\n            }\n        }\n\n        this._treeItemElement = document.createElement(\"div\");\n        this._treeItemElement.classList.add(\"acd-tree-item\");\n        this._treeItemElement.style.display = \"flex\";\n        this._treeItemElement.style.alignItems = \"center\";\n        this._treeItemElement.style.paddingLeft = this.getIndentationLevelIncrement() * (1 + this.level) + \"px\";\n\n        if (hasChildren) {\n            this._treeItemElement.setAttribute(\"role\", \"treeitem\");\n        }\n        this._treeItemElement.setAttribute(\"aria-labelledby\", labelId);\n\n        this._expandCollapseElement = document.createElement(\"div\");\n        this._expandCollapseElement.classList.add(\"acd-tree-item-expandCollapseButton\");\n        this._expandCollapseElement.style.flex = \"0 0 auto\";\n        this._expandCollapseElement.style.visibility = hasChildren ? \"visible\" : \"hidden\";\n        this._expandCollapseElement.tabIndex = 0;\n        this._expandCollapseElement.setAttribute(\"role\", \"button\");\n        this._expandCollapseElement.setAttribute(\"aria-label\", this.getExpandCollapseAriaText());\n\n        this._expandCollapseElement.onclick = (e: MouseEvent) => {\n            this._isExpanded = !this._isExpanded;\n\n            this.updateLayout();\n\n            e.cancelBubble = true;\n            e.preventDefault();\n        }\n\n        this._expandCollapseElement.onkeydown = (e: KeyboardEvent) => {\n            if (e.key === Constants.keys.enter || e.key === Constants.keys.space) {\n                this._isExpanded = !this._isExpanded;\n\n                this.updateLayout();\n                this._expandCollapseElement.focus();\n\n                e.preventDefault();\n                e.cancelBubble = true;\n            }\n        }\n\n        this._treeItemElement.appendChild(this._expandCollapseElement);\n\n        let textElement = document.createElement(\"div\");\n        textElement.classList.add(\"acd-tree-item-text\");\n        textElement.style.flex = \"1 1 auto\";\n        textElement.style.display = \"flex\";\n        textElement.style.alignItems = \"center\";\n        textElement.style.whiteSpace = \"nowrap\";\n        textElement.style.textOverflow = \"ellipsis\";\n        textElement.style.overflow = \"hidden\";\n\n        if (this.getIconClass()) {\n            let iconElement = document.createElement(\"div\");\n            iconElement.classList.add(\"acd-icon\", \"acd-treeView-icon\", this.getIconClass());\n\n            textElement.appendChild(iconElement);\n        }\n\n        let labelSpan = document.createElement(\"span\");\n        labelSpan.classList.add(\"acd-tree-item-typeName\");\n        labelSpan.innerText = this.getLabelText();\n        labelSpan.id = labelId;\n\n        textElement.appendChild(labelSpan);\n\n        let text = this.getAdditionalText();\n\n        if (text && text != \"\") {\n            let additionalTextSpan = document.createElement(\"span\");\n            additionalTextSpan.classList.add(this.getAdditionalTextClass());\n            additionalTextSpan.innerText = \" [\" + text + \"]\";\n\n            textElement.appendChild(additionalTextSpan);\n        }\n\n        this._treeItemElement.appendChild(textElement);\n\n        this._rootElement.appendChild(this._treeItemElement);\n\n        if (hasChildren) {\n            this._childContainerElement = document.createElement(\"ul\");\n            this._childContainerElement.style.paddingLeft = \"0\";\n            this._childContainerElement.style.listStyleType = \"none\";\n            this._childContainerElement.setAttribute(\"role\", \"group\");\n\n            for (let i = 0; i < this.getChildCount(); i++) {\n                let renderedChildItem = this.getChildAt(i).render();\n\n                renderedChildItem.setAttribute(\"aria-posinset\", (i+1).toString());\n                renderedChildItem.setAttribute(\"aria-setsize\", this.getChildCount().toString());\n\n                this._childContainerElement.appendChild(renderedChildItem);\n            }\n\n            this._rootElement.appendChild(this._childContainerElement);\n        }\n\n        this.updateLayout();\n\n        return this._rootElement;\n    }\n\n    protected _level: number = 0;\n\n    onSelectedChange: (sender: BaseTreeItem) => void;\n\n    constructor(isExpanded: boolean = true) {\n        super();\n\n        this._isExpanded = isExpanded;\n    }\n\n    abstract getChildCount(): number;\n    abstract getChildAt(index: number): BaseTreeItem;\n\n    updateLayout() {\n        if (this.getChildCount() > 0) {\n            this._rootElement.setAttribute(\"aria-expanded\", this._isExpanded.toString());\n            this._expandCollapseElement.setAttribute(\"aria-label\", this.getExpandCollapseAriaText());\n\n            if (this._isExpanded) {\n                this._childContainerElement?.classList.remove(\"acd-hidden\");\n                this._expandCollapseElement.classList.remove(BaseTreeItem.collapsedIconClass);\n                this._expandCollapseElement.classList.add(BaseTreeItem.expandedIconClass);\n            }\n            else {\n                this._childContainerElement?.classList.add(\"acd-hidden\");\n                this._expandCollapseElement.classList.add(BaseTreeItem.collapsedIconClass);\n                this._expandCollapseElement.classList.remove(BaseTreeItem.expandedIconClass);\n            }\n        }\n    }\n\n    expand() {\n        if (!this._isExpanded) {\n            this._isExpanded = true;\n\n            this.updateLayout();\n        }\n    }\n\n    collpase() {\n        if (this._isExpanded) {\n            this._isExpanded = false;\n\n            this.updateLayout();\n        }\n    }\n\n    isDraggable(): boolean {\n        return false;\n    }\n\n    get level(): number {\n        return this._level;\n    }\n\n    get isSelected(): boolean {\n        return this._isSelected;\n    }\n\n    set isSelected(value: boolean) {\n        this.setIsSelected(value, true);\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as Adaptive from \"adaptivecards\";\nimport { Constants } from \"adaptivecards-controls\";\nimport { DraggableElement } from \"./draggable-element\";\nimport { IPoint, Utils } from \"./miscellaneous\";\nimport * as DesignerPeers from \"./designer-peers\";\nimport * as ACData from \"adaptivecards-templating\";\nimport * as Shared from \"./shared\";\nimport { HostContainer } from \"./containers\";\nimport { FieldDefinition } from \"./data\";\n\nexport enum BindingPreviewMode {\n    NoPreview,\n    GeneratedData,\n    SampleData\n}\n\nexport type CardElementType = { new(): Adaptive.CardElement };\nexport type ActionType = { new(): Adaptive.Action };\nexport type CardElementPeerType = {\n    new(\n        parent: DesignerPeers.DesignerPeer,\n        designerSurface: CardDesignerSurface,\n        registration: DesignerPeers.DesignerPeerRegistrationBase,\n        cardElement: Adaptive.CardElement,\n        initializeCardElement?: boolean\n    ): DesignerPeers.CardElementPeer\n};\nexport type ActionPeerType = {\n    new(\n        parent: DesignerPeers.DesignerPeer,\n        designerSurface: CardDesignerSurface,\n        registration: DesignerPeers.DesignerPeerRegistrationBase,\n        action: Adaptive.Action\n    ): DesignerPeers.ActionPeer\n};\n\nclass DesignerPeerCategory {\n    static Unknown = \"Unknown\";\n    static Containers = \"Containers\";\n    static Elements = \"Elements\";\n    static Inputs = \"Inputs\";\n    static Actions = \"Actions\";\n}\n\nexport abstract class DesignerPeerRegistry<TSource, TPeer> {\n    protected _items: Array<DesignerPeers.DesignerPeerRegistration<TSource, TPeer>> = [];\n\n    readonly defaultRegistration = new DesignerPeers.DesignerPeerRegistrationBase(DesignerPeerCategory.Unknown, \"acd-icon-unknownPeer\");\n\n    constructor() {\n        this.reset();\n    }\n\n    abstract reset();\n\n    clear() {\n        this._items = [];\n    }\n\n    findTypeRegistration(sourceType: TSource): DesignerPeers.DesignerPeerRegistration<TSource, TPeer> {\n        for (let i = 0; i < this._items.length; i++) {\n            if (this._items[i].sourceType === sourceType) {\n                return this._items[i];\n            }\n        }\n\n        return null;\n    }\n\n    registerPeer(sourceType: TSource, peerType: TPeer, category: string, iconClass: string = null) {\n        var registrationInfo = this.findTypeRegistration(sourceType);\n\n        if (registrationInfo != null) {\n            registrationInfo.peerType = peerType;\n        }\n        else {\n            registrationInfo = new DesignerPeers.DesignerPeerRegistration<TSource, TPeer> (\n                sourceType,\n                peerType,\n                category,\n                iconClass);\n\n            this._items.push(registrationInfo);\n        }\n    }\n\n    unregisterPeer(sourceType: TSource) {\n        for (let i = 0; i < this._items.length; i++) {\n            if (this._items[i].sourceType === sourceType) {\n                this._items.splice(i, 1);\n\n                return;\n            }\n        }\n    }\n}\n\nexport class CardElementPeerRegistry extends DesignerPeerRegistry<CardElementType, CardElementPeerType> {\n    reset() {\n        this.clear();\n\n        this.registerPeer(Adaptive.AdaptiveCard, DesignerPeers.AdaptiveCardPeer, DesignerPeerCategory.Containers, \"acd-icon-adaptiveCard\");\n        this.registerPeer(Adaptive.Container, DesignerPeers.ContainerPeer, DesignerPeerCategory.Containers, \"acd-icon-container\");\n        this.registerPeer(Adaptive.ColumnSet, DesignerPeers.ColumnSetPeer, DesignerPeerCategory.Containers, \"acd-icon-columnSet\");\n        this.registerPeer(Adaptive.Column, DesignerPeers.ColumnPeer, DesignerPeerCategory.Containers, \"acd-icon-column\");\n        this.registerPeer(Adaptive.ImageSet, DesignerPeers.ImageSetPeer, DesignerPeerCategory.Containers, \"acd-icon-imageSet\");\n        this.registerPeer(Adaptive.FactSet, DesignerPeers.FactSetPeer, DesignerPeerCategory.Containers, \"acd-icon-factSet\");\n        this.registerPeer(Adaptive.Table, DesignerPeers.TablePeer, DesignerPeerCategory.Containers, \"acd-icon-table\");\n        this.registerPeer(Adaptive.TableRow, DesignerPeers.TableRowPeer, DesignerPeerCategory.Containers, \"acd-icon-tableRow\");\n        this.registerPeer(Adaptive.TableCell, DesignerPeers.TableCellPeer, DesignerPeerCategory.Containers, \"acd-icon-tableCell\");\n\n        this.registerPeer(Adaptive.TextBlock, DesignerPeers.TextBlockPeer, DesignerPeerCategory.Elements, \"acd-icon-textBlock\");\n        this.registerPeer(Adaptive.RichTextBlock, DesignerPeers.RichTextBlockPeer, DesignerPeerCategory.Elements, \"acd-icon-richTextBlock\");\n        this.registerPeer(Adaptive.Image, DesignerPeers.ImagePeer, DesignerPeerCategory.Elements, \"acd-icon-image\");\n        this.registerPeer(Adaptive.Media, DesignerPeers.MediaPeer, DesignerPeerCategory.Elements, \"acd-icon-media\");\n        this.registerPeer(Adaptive.ActionSet, DesignerPeers.ActionSetPeer, DesignerPeerCategory.Elements, \"acd-icon-actionSet\");\n\n        this.registerPeer(Adaptive.TextInput, DesignerPeers.TextInputPeer, DesignerPeerCategory.Inputs, \"acd-icon-inputText\");\n        this.registerPeer(Adaptive.DateInput, DesignerPeers.DateInputPeer, DesignerPeerCategory.Inputs, \"acd-icon-inputDate\");\n        this.registerPeer(Adaptive.TimeInput, DesignerPeers.TimeInputPeer, DesignerPeerCategory.Inputs, \"acd-icon-inputTime\");\n        this.registerPeer(Adaptive.ToggleInput, DesignerPeers.ToggleInputPeer, DesignerPeerCategory.Inputs, \"acd-icon-inputToggle\");\n        this.registerPeer(Adaptive.NumberInput, DesignerPeers.NumberInputPeer, DesignerPeerCategory.Inputs, \"acd-icon-inputNumber\");\n        this.registerPeer(Adaptive.ChoiceSetInput, DesignerPeers.ChoiceSetInputPeer, DesignerPeerCategory.Inputs, \"acd-icon-inputChoiceSet\");\n    }\n\n    createPeerInstance(designerSurface: CardDesignerSurface, parent: DesignerPeers.DesignerPeer, cardElement: Adaptive.CardElement, initializeCardElement?: boolean): DesignerPeers.CardElementPeer {\n        var registrationInfo = this.findTypeRegistration((<any>cardElement).constructor);\n\n        var peer = registrationInfo ?\n            new registrationInfo.peerType(parent, designerSurface, registrationInfo, cardElement, initializeCardElement) :\n            new DesignerPeers.CardElementPeer(parent, designerSurface, this.defaultRegistration, cardElement, initializeCardElement);\n\n        return peer;\n    }\n}\n\nexport class ActionPeerRegistry extends DesignerPeerRegistry<ActionType, ActionPeerType> {\n    reset() {\n        this.clear();\n\n        this.registerPeer(Adaptive.HttpAction, DesignerPeers.HttpActionPeer, DesignerPeerCategory.Actions, \"acd-icon-actionHttp\");\n        this.registerPeer(Adaptive.SubmitAction, DesignerPeers.SubmitActionPeer, DesignerPeerCategory.Actions, \"acd-icon-actionSubmit\");\n        this.registerPeer(Adaptive.ExecuteAction, DesignerPeers.ExecuteActionPeer, DesignerPeerCategory.Actions, \"acd-icon-actionSubmit\");\n        this.registerPeer(Adaptive.OpenUrlAction, DesignerPeers.OpenUrlActionPeer, DesignerPeerCategory.Actions, \"acd-icon-actionOpenUrl\");\n        this.registerPeer(Adaptive.ShowCardAction, DesignerPeers.ShowCardActionPeer, DesignerPeerCategory.Actions, \"acd-icon-actionShowCard\");\n        this.registerPeer(Adaptive.ToggleVisibilityAction, DesignerPeers.ToggleVisibilityActionPeer, DesignerPeerCategory.Actions, \"acd-icon-actionToggleVisibility\");\n    }\n\n    createPeerInstance(designerSurface: CardDesignerSurface, parent: DesignerPeers.DesignerPeer, action: Adaptive.Action): DesignerPeers.ActionPeer {\n        var registrationInfo = this.findTypeRegistration((<any>action).constructor);\n\n        var peer = registrationInfo ? new registrationInfo.peerType(parent, designerSurface, registrationInfo, action) : new DesignerPeers.ActionPeer(parent, designerSurface, this.defaultRegistration, action);\n\n        return peer;\n    }\n}\n\nclass DragHandle extends DraggableElement {\n    protected internalRender(): HTMLElement {\n        let element = document.createElement(\"div\");\n        element.classList.add(\"acd-peerButton\", \"acd-peerButton-icon\", \"fixedWidth\", \"circular\", \"acd-icon-drag\");\n        element.title = \"Drag to move this element\";\n        element.style.visibility = \"hidden\";\n        element.style.position = \"absolute\";\n        element.style.zIndex = \"500\";\n\n        return element;\n    }\n}\n\nexport abstract class DesignContext {\n    abstract get hostContainer(): HostContainer;\n    abstract get targetVersion(): Adaptive.Version;\n    abstract get dataStructure(): FieldDefinition;\n    abstract get bindingPreviewMode(): BindingPreviewMode;\n    abstract get sampleData(): any;\n}\n\nexport class CardDesignerSurface {\n    static readonly cardElementPeerRegistry: CardElementPeerRegistry = new CardElementPeerRegistry();\n    static readonly actionPeerRegistry: ActionPeerRegistry = new ActionPeerRegistry();\n\n    private _updateCount: number = 0;\n\n    private _card: Adaptive.AdaptiveCard;\n    private _allPeers: Array<DesignerPeers.DesignerPeer> = [];\n    private _rootPeer: DesignerPeers.DesignerPeer;\n    private _cardHost: HTMLElement;\n    private _designerSurface: HTMLDivElement;\n    private _selectedPeer: DesignerPeers.DesignerPeer;\n    private _draggedPeer: DesignerPeers.DesignerPeer;\n    private _dropTarget: DesignerPeers.DesignerPeer;\n    private _dragHandle: DragHandle;\n    private _removeCommandElement: HTMLElement;\n    private _peerCommandsHostElement: HTMLElement;\n    private _serializationContext: Adaptive.SerializationContext;\n    private _isPreviewMode: boolean = false;\n    private _dragVisual?: HTMLElement;\n\n    private updatePeerCommandsLayout() {\n        if (this._selectedPeer) {\n            let peerRect = this._selectedPeer.getBoundingRect();\n            let dragHandleRect = this._dragHandle.renderedElement.getBoundingClientRect();\n            let removeButtonRect = this._removeCommandElement.getBoundingClientRect();\n\n            this._dragHandle.renderedElement.style.left = (peerRect.left - dragHandleRect.width) + \"px\";\n            this._dragHandle.renderedElement.style.top = (peerRect.top - dragHandleRect.height) + \"px\";\n\n            this._removeCommandElement.style.left = peerRect.right + \"px\";\n            this._removeCommandElement.style.top = (peerRect.top - removeButtonRect.height) + \"px\";\n\n            this._peerCommandsHostElement.style.left = peerRect.left + \"px\";\n            this._peerCommandsHostElement.style.top = (peerRect.bottom + 2) + \"px\";\n            this._peerCommandsHostElement.style.width = peerRect.width + \"px\";\n\n            this._dragHandle.renderedElement.style.visibility = this._selectedPeer.isDraggable() ? \"visible\" : \"hidden\";\n            this._removeCommandElement.style.visibility = this._selectedPeer.canBeRemoved() ? \"visible\" : \"hidden\";\n            this._peerCommandsHostElement.style.visibility = this._peerCommandsHostElement.childElementCount > 0 ? \"visible\" : \"hidden\";\n        }\n        else {\n            this._dragHandle.renderedElement.style.visibility = \"hidden\";\n            this._removeCommandElement.style.visibility = \"hidden\";\n            this._peerCommandsHostElement.style.visibility = \"hidden\";\n        }\n    }\n\n    private setSelectedPeer(value: DesignerPeers.DesignerPeer) {\n        if (this._selectedPeer != value) {\n            if (this._selectedPeer) {\n                this._selectedPeer.isSelected = false;\n            }\n\n            this._selectedPeer = value;\n\n            this._peerCommandsHostElement.innerHTML = \"\";\n\n            if (this._selectedPeer) {\n                this._selectedPeer.isSelected = true;\n\n                let commands = this._selectedPeer.getCommands(this.context);\n\n                for (let command of commands) {\n                    this._peerCommandsHostElement.appendChild(command.render());\n                }\n            }\n\n            this.updatePeerCommandsLayout();\n\n            if (this.onSelectedPeerChanged) {\n                this.onSelectedPeerChanged(this._selectedPeer);\n            }\n        }\n    }\n\n    private peerChanged(peer: DesignerPeers.DesignerPeer, updatePropertySheet: boolean) {\n        this.renderCard()\n        this.updateLayout();\n\n        if (updatePropertySheet && this.onSelectedPeerChanged) {\n            this.onSelectedPeerChanged(this._selectedPeer);\n        }\n    }\n\n    private peerRemoved(peer: DesignerPeers.DesignerPeer) {\n        this._allPeers.splice(this._allPeers.indexOf(peer), 1);\n\n        if (peer == this._selectedPeer) {\n            this.setSelectedPeer(null);\n        }\n\n        if (this._updateCount == 0) {\n            this.renderCard();\n            this.updateLayout();\n        }\n    }\n\n    private generateCardToRender(asPreview: boolean): Adaptive.AdaptiveCard {\n        let cardToRender: Adaptive.AdaptiveCard = this.card;\n\n        if (asPreview) {\n            let inputPayload = this.card.toJSON(this._serializationContext);\n\n            cardToRender = new Adaptive.AdaptiveCard();\n            cardToRender.hostConfig = this.card.hostConfig;\n\n            let outputPayload = inputPayload;\n\n            if (Shared.GlobalSettings.enableDataBindingSupport) {\n                try {\n                    let template = new ACData.Template(inputPayload);\n\n                    let evaluationContext: ACData.IEvaluationContext;\n\n                    if (this.context.bindingPreviewMode === BindingPreviewMode.SampleData) {\n                        evaluationContext = { $root: this.context.sampleData };\n                    }\n                    else {\n                        evaluationContext = { $root: this.context.dataStructure.dataType.generateSampleData() };\n                    }\n\n                    outputPayload = template.expand(evaluationContext);\n                }\n                catch (e) {\n                    console.log(\"Template expansion error: \" + e.message);\n                }\n            }\n\n            cardToRender.parse(outputPayload, this._serializationContext);\n        }\n\n        return cardToRender;\n    }\n\n    private renderCard() {\n        this._cardHost.innerHTML = \"\";\n\n        if (this.onCardValidated) {\n            let allValidationEvents: Adaptive.IValidationEvent[] = [];\n\n            for (let i = 0; i < this._serializationContext.eventCount; i++) {\n                allValidationEvents.push(this._serializationContext.getEventAt(i));\n            }\n\n            allValidationEvents.push(...this.card.validateProperties().validationEvents);\n\n            this.onCardValidated(allValidationEvents);\n        }\n\n        let cardToRender = this.generateCardToRender(this.isPreviewMode);\n\n        if (this.isPreviewMode) {\n            cardToRender.onExecuteAction = (action: Adaptive.Action) => {\n                const actionType = action.getJsonTypeName();\n                let message = `Action executed: \"${actionType}\" title: \"${action.title}\"`;\n\n                const verb = (<Adaptive.ExecuteAction>action).verb;\n                if (verb) {\n                    message += ` verb: \"${verb}\"`;\n                }\n                \n                const url = (<Adaptive.OpenUrlAction>action).url;\n                if (url) {\n                    message += `\\nurl: \"${url}\"`;\n                }\n                \n                const data = (<Adaptive.SubmitActionBase>action).data;\n                if (data) {\n                    message += `\\nSubmitted data: ${JSON.stringify(data, undefined, 4)}`;\n                }\n\n                alert(message);\n            };\n        }\n\n        let renderedCard = cardToRender.render();\n\n        if (this.fixedHeightCard) {\n            renderedCard.style.height = \"100%\";\n\n        }\n        this._cardHost.appendChild(renderedCard);\n    }\n\n    private addPeer(peer: DesignerPeers.DesignerPeer) {\n        if (this._allPeers.indexOf(peer) < 0) {\n            this._allPeers.push(peer);\n\n            peer.render();\n\n            peer.onSelectedChanged = (peer: DesignerPeers.DesignerPeer) => {\n                if (peer.isSelected) {\n                    this.setSelectedPeer(peer);\n                }\n                else {\n                    if (this._selectedPeer == peer) {\n                        this.setSelectedPeer(null);\n                    }\n                }\n            };\n            peer.onChanged = (sender: DesignerPeers.DesignerPeer, updatePropertySheet: boolean) => { this.peerChanged(sender, updatePropertySheet); };\n            peer.onPeerRemoved = (sender: DesignerPeers.DesignerPeer) => { this.peerRemoved(sender); };\n            peer.onPeerAdded = (sender: DesignerPeers.DesignerPeer, newPeer: DesignerPeers.DesignerPeer) => {\n                this.addPeer(newPeer);\n                this.updateLayout();\n            };\n            peer.onStartDrag = (sender: DesignerPeers.DesignerPeer) => { this.startDrag(sender); }\n            peer.onEndDrag = (sender: DesignerPeers.DesignerPeer) => { this.endDrag(false); }\n\n            peer.addElementsToDesignerSurface(this._designerSurface);\n\n            for (let i = 0; i < peer.getChildCount(); i++) {\n                this.addPeer(peer.getChildAt(i));\n            }\n        }\n    }\n\n    private internalFindDropTarget(pointerPosition: IPoint, currentPeer: DesignerPeers.DesignerPeer, forPeer: DesignerPeers.DesignerPeer): DesignerPeers.DesignerPeer {\n        if (currentPeer == forPeer) {\n            return null;\n        }\n\n        var result: DesignerPeers.DesignerPeer = null;\n        var lookDeeper = currentPeer instanceof DesignerPeers.ActionPeer;\n\n        if (!lookDeeper) {\n            var boundingRect = currentPeer.getBoundingRect();\n\n            lookDeeper = boundingRect.isInside(pointerPosition);\n        }\n\n        if (lookDeeper) {\n            let canDrop = currentPeer.canDrop(forPeer);\n\n            if (canDrop) {\n                result = currentPeer;\n            }\n\n            for (let i = 0; i < currentPeer.getChildCount(); i++) {\n                var deeperResult = this.internalFindDropTarget(pointerPosition, currentPeer.getChildAt(i), forPeer);\n\n                if (deeperResult) {\n                    result = deeperResult;\n\n                    break;\n                }\n            }\n        }\n\n        return result;\n    }\n\n    private findCardElementPeer(cardElement: Adaptive.CardElement): DesignerPeers.CardElementPeer {\n        for (let i = 0; i < this._allPeers.length; i++) {\n            var peer = this._allPeers[i];\n\n            if (peer instanceof DesignerPeers.CardElementPeer && peer.cardElement == cardElement) {\n                return peer;\n            }\n        }\n\n        return null;\n    }\n\n    private findActionPeer(action: Adaptive.Action): DesignerPeers.ActionPeer {\n        for (let i = 0; i < this._allPeers.length; i++) {\n            var peer = this._allPeers[i];\n\n            if (peer instanceof DesignerPeers.ActionPeer && peer.action == action) {\n                return peer;\n            }\n        }\n\n        return null;\n    }\n\n    private inlineCardExpanded(action: Adaptive.ShowCardAction, isExpanded: boolean) {\n        let peer = this.findCardElementPeer(action.card);\n\n        if (isExpanded) {\n            if (!peer) {\n                let registration = CardDesignerSurface.cardElementPeerRegistry.findTypeRegistration(Adaptive.AdaptiveCard);\n\n                peer = new registration.peerType(peer, this, registration, action.card);\n\n                let parentPeer = this.findActionPeer(action);\n\n                if (parentPeer) {\n                    parentPeer.insertChild(peer);\n                }\n                else {\n                    this._rootPeer.insertChild(peer);\n                }\n            }\n            else {\n                peer.addElementsToDesignerSurface(this._designerSurface, true);\n            }\n        }\n        else {\n            if (peer) {\n                peer.removeElementsFromDesignerSurface(true);\n            }\n        }\n\n        this.updateLayout();\n    }\n\n    private get card(): Adaptive.AdaptiveCard {\n        return this._card;\n    }\n\n    private setDraggedPeer(value: DesignerPeers.DesignerPeer) {\n        if (this._draggedPeer != value) {\n            if (this._draggedPeer) {\n                this._draggedPeer.dragging = false;\n            }\n\n            this._draggedPeer = value;\n\n            if (this._draggedPeer) {\n                this._draggedPeer.dragging = true;\n            }\n        }\n    }\n\n    constructor(readonly context: DesignContext) {\n        this._serializationContext = this.context.hostContainer.createSerializationContext(this.context.targetVersion);\n\n        var rootElement = document.createElement(\"div\");\n        rootElement.style.position = \"relative\";\n        rootElement.style.width = \"100%\";\n        rootElement.style.height = \"100%\";\n\n        this._cardHost = document.createElement(\"div\");\n        this._cardHost.style.height = \"100%\";\n\n        rootElement.appendChild(this._cardHost);\n\n        this._designerSurface = document.createElement(\"div\");\n        this._designerSurface.classList.add(\"acd-designersurface\");\n        this._designerSurface.tabIndex = 0;\n        this._designerSurface.style.position = \"absolute\";\n        this._designerSurface.style.left = \"0\";\n        this._designerSurface.style.top = \"0\";\n        this._designerSurface.style.width = \"100%\";\n        this._designerSurface.style.height = \"100%\";\n\n        this._designerSurface.onkeyup = (e: KeyboardEvent) => {\n            if (this._selectedPeer) {\n                switch (e.key) {\n                    case Constants.keys.escape:\n                        if (this.draggedPeer) {\n                            this.endDrag(true);\n                        }\n                        else {\n                            this.setSelectedPeer(this._selectedPeer.parent);\n                        }\n\n                        break;\n                    case Constants.keys.delete:\n                        if (!this.draggedPeer) {\n                            this.removeSelected();\n                        }\n\n                        break;\n                }\n            }\n\n            return !e.cancelBubble;\n        }\n\n        this._designerSurface.onpointermove = (e: PointerEvent) => {\n            let clientRect = this._designerSurface.getBoundingClientRect();\n\n            if (this.draggedPeer) {\n                if (this._designerSurface.hasPointerCapture && !this._designerSurface.hasPointerCapture(e.pointerId)) {\n                    this._designerSurface.setPointerCapture(e.pointerId);\n                }\n\n                if (!this._dragVisual) {\n                    this._dragVisual = document.createElement(\"div\");\n                    this._dragVisual.style.pointerEvents = \"none\";\n                    this._dragVisual.style.backgroundColor = \"white\";\n                    this._dragVisual.style.padding = \"6px\";\n                    this._dragVisual.style.opacity = \"0.6\";\n                    this._dragVisual.style.boxShadow = \"0 0 15px -5px rgba(0, 0, 0, 0.4)\";\n                    this._dragVisual.style.position = \"absolute\";\n                    this._dragVisual.style.boxSizing = \"content-box\";\n\n                    this._dragVisual.appendChild(this.draggedPeer.getCardObject().renderedElement.cloneNode(true));\n\n                    document.body.appendChild(this._dragVisual);\n                }\n\n                const adjustedPoint = Utils.adjustPointForScroll(e);\n                this._dragVisual.style.left = (adjustedPoint.x - 6) + \"px\";\n                this._dragVisual.style.top = (adjustedPoint.y - 6) + \"px\";\n\n                let renderedCardObjectRect = this.draggedPeer.getCardObject().renderedElement.getBoundingClientRect();\n\n                this._dragVisual.style.width = renderedCardObjectRect.width + \"px\";\n                this._dragVisual.style.height = renderedCardObjectRect.height + \"px\";\n\n                this.tryDrop({ x: e.x - clientRect.left, y: e.y - clientRect.top }, this.draggedPeer);\n            }\n        }\n\n        this._designerSurface.onpointerup = (e: PointerEvent) => {\n            this._designerSurface.releasePointerCapture(e.pointerId);\n\n            if (this.draggedPeer) {\n                this.endDrag(false);\n            }\n        }\n\n        rootElement.appendChild(this._designerSurface);\n\n        this.context.hostContainer.cardHost.innerHTML = \"\";\n        this.context.hostContainer.cardHost.appendChild(rootElement);\n\n        this._card = new Adaptive.AdaptiveCard();\n        this._card.onInlineCardExpanded = (action: Adaptive.ShowCardAction, isExpanded: boolean) => { this.inlineCardExpanded(action, isExpanded); };\n        this._card.onPreProcessPropertyValue = (sender: Adaptive.CardObject, property: Adaptive.PropertyDefinition, value: any) => {\n            if (Shared.GlobalSettings.enableDataBindingSupport && typeof value === \"string\" && this.context.sampleData && this.context.bindingPreviewMode !== BindingPreviewMode.NoPreview) {\n                let expression = ACData.Template.parseInterpolatedString(value);\n\n                if (typeof expression === \"string\") {\n                    return expression;\n                }\n                else {\n                    let evaluationContext: ACData.IEvaluationContext;\n\n                    if (this.context.bindingPreviewMode === BindingPreviewMode.SampleData) {\n                        evaluationContext = { $root: this.context.sampleData };\n                    }\n                    else {\n                        evaluationContext = { $root: this.context.dataStructure.dataType.generateSampleData() };\n                    }\n\n                    let evaluationResult = ACData.Template.tryEvaluateExpression(expression, evaluationContext, true);\n\n                    return typeof evaluationResult.value === \"string\" ? evaluationResult.value : value;\n                }\n            }\n\n            return value;\n        };\n        this._card.version = this.context.targetVersion;\n        this._card.hostConfig = this.context.hostContainer.getHostConfig();\n        this._card.designMode = true;\n\n        this.render();\n    }\n\n    onCardValidated: (logEntries: Adaptive.IValidationEvent[]) => void;\n    onSelectedPeerChanged: (peer: DesignerPeers.DesignerPeer) => void;\n    onLayoutUpdated: (isFullRefresh: boolean) => void;\n\n    fixedHeightCard: boolean = false;\n\n    getDesignerSurfaceOffset(): IPoint {\n        let clientRect = this._designerSurface.getBoundingClientRect();\n\n        return { x: clientRect.left, y: clientRect.top };\n    }\n\n    findDropTarget(pointerPosition: IPoint, peer: DesignerPeers.DesignerPeer): DesignerPeers.DesignerPeer {\n        return this.internalFindDropTarget(pointerPosition, this._rootPeer, peer);\n    }\n\n    findPeer(cardObject: Adaptive.CardObject) {\n        for (let peer of this._allPeers) {\n            if (peer.getCardObject() === cardObject) {\n                return peer;\n            }\n        }\n\n        return undefined;\n    }\n\n    beginUpdate() {\n        this._updateCount++;\n    }\n\n    endUpdate(renderCard: boolean) {\n        if (this._updateCount > 0) {\n            this._updateCount--;\n\n            if (this._updateCount == 0) {\n                if (renderCard) {\n                    this.renderCard();\n                }\n\n                this.updateLayout();\n            }\n        }\n    }\n\n    render() {\n        this._designerSurface.innerHTML = \"\";\n        this._allPeers = [];\n\n        this.setSelectedPeer(null);\n\n        this.renderCard();\n\n        this._rootPeer = CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(this, null, this.card);\n\n        this.addPeer(this._rootPeer);\n\n        this._removeCommandElement = document.createElement(\"div\");\n        this._removeCommandElement.classList.add(\"acd-peerButton\", \"acd-peerButton-icon\", \"fixedWidth\", \"circular\", \"acd-icon-remove\");\n        this._removeCommandElement.title = \"Remove\";\n        this._removeCommandElement.style.visibility = \"hidden\";\n        this._removeCommandElement.style.position = \"absolute\";\n        this._removeCommandElement.style.zIndex = \"500\";\n        this._removeCommandElement.onclick = (e) => {\n            this.removeSelected();\n        }\n\n        this._dragHandle = new DragHandle();\n        this._dragHandle.onStartDrag = (sender) => {\n            this._dragHandle.endDrag();\n            this.startDrag(this._selectedPeer);\n        }\n        this._dragHandle.render();\n\n        this._peerCommandsHostElement = document.createElement(\"div\");\n        this._peerCommandsHostElement.style.visibility = \"hidden\";\n        this._peerCommandsHostElement.style.position = \"absolute\";\n        this._peerCommandsHostElement.style.display = \"flex\";\n        this._peerCommandsHostElement.style.justifyContent = \"flex-end\";\n        this._peerCommandsHostElement.style.zIndex = \"500\";\n        this._peerCommandsHostElement.style.pointerEvents = \"none\";\n\n        this._designerSurface.appendChild(this._dragHandle.renderedElement);\n        this._designerSurface.appendChild(this._removeCommandElement);\n        this._designerSurface.appendChild(this._peerCommandsHostElement);\n\n        this.updateLayout();\n    }\n\n    getCardPayloadAsObject(): object {\n        return this.card.toJSON(this._serializationContext);\n    }\n\n    setCardPayloadAsObject(payload: object) {\n        this._serializationContext.clearEvents();\n\n        this.card.parse(payload, this._serializationContext);\n\n        this.render();\n    }\n\n    setCardPayloadAsString(payload: string) {\n        try {\n            this.setCardPayloadAsObject(JSON.parse(payload));\n        }\n        catch (e) {\n            console.warn(\"Invalid JSON string. \" + e);\n        }\n    }\n\n    getBoundCardPayloadAsObject(): object {\n        return this.generateCardToRender(true).toJSON(this._serializationContext);\n    }\n\n    updateLayout(isFullRefresh: boolean = true) {\n        if (!this.isPreviewMode) {\n            for (let i = 0; i < this._allPeers.length; i++) {\n                this._allPeers[i].updateLayout();\n            }\n\n            this.updatePeerCommandsLayout();\n\n            if (this.onLayoutUpdated) {\n                this.onLayoutUpdated(isFullRefresh);\n            }\n        }\n    }\n\n    removeSelected() {\n        if (this.selectedPeer) {\n            this.beginUpdate();\n\n            try {\n                let parent = this.selectedPeer.parent;\n\n                if (this.selectedPeer.remove(false, true)) {\n                    this.setSelectedPeer(parent);\n                }\n            }\n            finally {\n                this.endUpdate(true);\n            }\n        }\n    }\n\n    onStartDrag: (sender: CardDesignerSurface) => void;\n    onEndDrag: (sender: CardDesignerSurface, wasCancelled: boolean) => void;\n\n    startDrag(peer: DesignerPeers.DesignerPeer) {\n        if (!this.draggedPeer) {\n            this._designerSurface.classList.add(\"dragging\");\n\n            this.setDraggedPeer(peer);\n            this.setSelectedPeer(this.draggedPeer);\n\n            if (this.onStartDrag) {\n                this.onStartDrag(this);\n            }\n        }\n    }\n\n    endDrag(wasCancelled: boolean) {\n        if (this.draggedPeer) {\n            // Ensure that the dragged peer's elements are at the top in Z order\n            this.draggedPeer.removeElementsFromDesignerSurface(true);\n            this.draggedPeer.addElementsToDesignerSurface(this._designerSurface, true);\n\n            this._dropTarget.renderedElement.classList.remove(\"dragover\");\n\n            this._dragVisual?.parentNode.removeChild(this._dragVisual);\n            this._dragVisual = undefined;\n\n            this.setDraggedPeer(null);\n\n            if (this.onEndDrag) {\n                this.onEndDrag(this, wasCancelled);\n            }\n\n            this._designerSurface.classList.remove(\"dragging\");\n        }\n    }\n\n    tryDrop(pointerPosition: IPoint, peer: DesignerPeers.DesignerPeer): boolean {\n        if (peer) {\n            if (this._dropTarget) {\n                this._dropTarget.renderedElement.classList.remove(\"dragover\");\n            }\n\n            var newDropTarget = this.findDropTarget(pointerPosition, peer);\n\n            if (newDropTarget) {\n                this._dropTarget = newDropTarget;\n                this._dropTarget.renderedElement.classList.add(\"dragover\");\n\n                return this._dropTarget.tryDrop(peer, pointerPosition);\n            }\n        }\n\n        return false;\n    }\n\n    isPointerOver(x: number, y: number) {\n        let clientRect = this._designerSurface.getBoundingClientRect();\n\n        return (x >= clientRect.left) && (x <= clientRect.right) && (y >= clientRect.top) && (y <= clientRect.bottom);\n    }\n\n    pageToClientCoordinates(x: number, y: number): IPoint {\n        let clientRect = this._designerSurface.getBoundingClientRect();\n\n        return {\n            x: x - clientRect.left,\n            y: y - clientRect.top\n        }\n    }\n\n    get rootPeer(): DesignerPeers.DesignerPeer {\n        return this._rootPeer;\n    }\n\n    get selectedPeer(): DesignerPeers.DesignerPeer {\n        return this._selectedPeer;\n    }\n\n    get draggedPeer(): DesignerPeers.DesignerPeer {\n        return this._draggedPeer;\n    }\n\n    get isPreviewMode(): boolean {\n        return this._isPreviewMode;\n    }\n\n    set isPreviewMode(value: boolean) {\n        if (this._isPreviewMode != value) {\n            this._isPreviewMode = value;\n\n            if (this._isPreviewMode) {\n                this._designerSurface.classList.add(\"acd-hidden\");\n                this._dragHandle.renderedElement.classList.add(\"acd-hidden\");\n                this._removeCommandElement.classList.add(\"acd-hidden\");\n                this._peerCommandsHostElement.classList.add(\"acd-hidden\");\n            }\n            else {\n                this._designerSurface.classList.remove(\"acd-hidden\");\n                this._dragHandle.renderedElement.classList.remove(\"acd-hidden\");\n                this._removeCommandElement.classList.remove(\"acd-hidden\");\n                this._peerCommandsHostElement.classList.remove(\"acd-hidden\");\n            }\n\n            this.card.designMode = !this._isPreviewMode;\n\n            this.renderCard();\n            this.updateLayout(false);\n        }\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as Clipboard from \"clipboard\";\nimport * as Adaptive from \"adaptivecards\";\nimport * as monaco from \"monaco-editor\";\nimport * as Constants from \"./constants\";\nimport * as Designer from \"./card-designer-surface\";\nimport * as DesignerPeers from \"./designer-peers\";\nimport { Pic2Card } from \"./pic2card\";\nimport { OpenSampleDialog } from \"./open-sample-dialog\";\nimport { OpenJsonSchemaDialog } from \"./open-json-schema-dialog\";\nimport { HostContainer } from \"./containers/host-container\";\nimport { adaptiveCardSchema } from \"./adaptive-card-schema\";\nimport { OpenImageDialog } from \"./open-image-dialog\";\nimport { FullScreenHandler } from \"./fullscreen-handler\";\nimport { Toolbar, ToolbarButton, ToolbarChoicePicker, ToolbarElementAlignment } from \"./toolbar\";\nimport { IPoint, Utils, defaultHostConfig } from \"./miscellaneous\";\nimport { BasePaletteItem, ElementPaletteItem, DataPaletteItem, CustomPaletteItem } from \"./tool-palette\";\nimport { DefaultContainer } from \"./containers/default/default-container\";\nimport { SidePanel, SidePanelAlignment } from \"./side-panel\";\nimport { Toolbox, IToolboxCommand } from \"./tool-box\";\nimport { FieldDefinition } from \"./data\";\nimport { DataTreeItem } from \"./data-treeitem\";\nimport { Strings } from \"./strings\";\nimport * as Shared from \"./shared\";\nimport { TreeView } from \"./tree-view\";\nimport { SampleCatalogue } from \"./catalogue\";\nimport { HelpDialog } from \"./help-dialog\";\n\nexport class CardDesigner extends Designer.DesignContext {\n    private static internalProcessMarkdown(text: string, result: Adaptive.IMarkdownProcessingResult) {\n        if (CardDesigner.onProcessMarkdown) {\n            CardDesigner.onProcessMarkdown(text, result);\n        } else {\n            // Check for markdownit\n            if (window[\"markdownit\"]) {\n                result.outputHtml = window[\"markdownit\"]().render(text);\n                result.didProcess = true;\n            }\n\t\t}\n    }\n\n    static onProcessMarkdown: (text: string, result: Adaptive.IMarkdownProcessingResult) => void = null;\n\n    private static MAX_UNDO_STACK_SIZE = 50;\n\n    private _isAttached: boolean = false;\n    private _cardEditor: monaco.editor.IStandaloneCodeEditor;\n    private _sampleDataEditor: monaco.editor.IStandaloneCodeEditor;\n    private _hostContainers: Array<HostContainer>;\n    private _isMonacoEditorLoaded: boolean = false;\n    private _designerSurface: Designer.CardDesignerSurface;\n    private _designerHostElement: HTMLElement;\n    private _draggedPaletteItem: BasePaletteItem;\n    private _draggedElement: HTMLElement;\n    private _currentMousePosition: IPoint;\n    private _hostContainer: HostContainer;\n    private _undoStack: Array<object> = [];\n    private _undoStackIndex: number = -1;\n    private _startDragPayload: object;\n    private _toolPaletteToolbox: Toolbox;\n    private _propertySheetToolbox: Toolbox;\n    private _propertySheetCard: Adaptive.AdaptiveCard;\n    private _treeViewToolbox: Toolbox;\n    private _jsonEditorsPanel: SidePanel;\n    private _cardEditorToolbox: Toolbox;\n    private _sampleDataEditorToolbox: Toolbox;\n    private _dataToolbox: Toolbox;\n    private _assetPath: string;\n    private _dataStructure: FieldDefinition;\n    private _sampleData: any;\n    private _bindingPreviewMode: Designer.BindingPreviewMode = Designer.BindingPreviewMode.NoPreview;\n    private _customPeletteItems: CustomPaletteItem[];\n    private _sampleCatalogue: SampleCatalogue = new SampleCatalogue();\n\n    private togglePreview() {\n        this._designerSurface.isPreviewMode = !this._designerSurface.isPreviewMode;\n\n        if (this._designerSurface.isPreviewMode) {\n            this._togglePreviewButton.toolTip = \"Return to Design mode\";\n            this._designerSurface.setCardPayloadAsString(this.getCurrentCardEditorPayload());\n        }\n        else {\n            this._togglePreviewButton.toolTip = \"Switch to Preview mode\";\n            this.updateCardFromJson(false);\n        }\n\n        this.buildTreeView();\n    }\n\n    private buildTreeView() {\n        if (this._treeViewToolbox.content) {\n            this._treeViewToolbox.content.innerHTML = \"\";\n\n            if (this.designerSurface.isPreviewMode) {\n                this.treeViewToolbox.content.innerHTML =\n                    '<div style=\"padding: 8px; display: flex; justify-content: center;\">' +\n                        '<div>The Card Structure isn\\'t available in Preview mode.</div>' +\n                    '</div>';\n            }\n            else {\n                let treeView = new TreeView(this.designerSurface.rootPeer.treeItem);\n\n                this._treeViewToolbox.content.appendChild(treeView.render());\n            }\n        }\n    }\n\n    private buildDataExplorer() {\n        if (this._dataToolbox && this._dataToolbox.content) {\n            this._dataToolbox.content.innerHTML = \"\";\n\n            if (this.dataStructure) {\n                let treeItem = new DataTreeItem(this.dataStructure);\n                let treeView = new TreeView(treeItem);\n\n                this._dataToolbox.content.appendChild(treeView.render());\n            }\n        }\n    }\n\n    private buildPropertySheet(peer: DesignerPeers.DesignerPeer) {\n        if (this._propertySheetToolbox.content) {\n            // if focus is already on _propertySheetCard, remember the focused object's id\n            const restoreFocusId = this._propertySheetCard?.findDOMNodeOwner(document.activeElement)?.id;\n            this._propertySheetToolbox.content.innerHTML = \"\";\n\n            if (peer) {\n                this._propertySheetCard = peer.buildPropertySheetCard(this);\n            }\n            else {\n                this._propertySheetCard = new Adaptive.AdaptiveCard();\n                this._propertySheetCard.parse(\n                    {\n                        type: \"AdaptiveCard\",\n                        version: \"1.0\",\n                        body: [\n                            {\n                                type: \"TextBlock\",\n                                wrap: true,\n                                text: \"**Nothing is selected**\"\n                            },\n                            {\n                                type: \"TextBlock\",\n                                wrap: true,\n                                text: \"Select an element in the card to modify its properties.\"\n                            }\n                        ]\n                    },\n                    new Adaptive.SerializationContext(this.targetVersion)\n                );\n                this._propertySheetCard.padding = new Adaptive.PaddingDefinition(\n                    Adaptive.Spacing.Small,\n                    Adaptive.Spacing.Small,\n                    Adaptive.Spacing.Small,\n                    Adaptive.Spacing.Small\n                );\n            }\n\n            this._propertySheetCard.hostConfig = defaultHostConfig;\n\n            this._propertySheetToolbox.content.appendChild(this._propertySheetCard.render());\n\n            if (restoreFocusId) {\n                // attempt to restore focus if new card has object with same id\n                const focusTarget = this._propertySheetCard.getElementById(restoreFocusId) ?? this._propertySheetCard.getActionById(restoreFocusId);\n                focusTarget?.renderedElement?.focus();\n            }\n        }\n    }\n\n    private addPaletteItem(paletteItem: BasePaletteItem, hostElement: HTMLElement) {\n        paletteItem.render();\n        paletteItem.onStartDrag = (sender: BasePaletteItem) => {\n            this._draggedPaletteItem = sender;\n\n            this._draggedElement = sender.renderDragVisual();\n            this._draggedElement.style.position = \"absolute\";\n            const adjustedPosition = Utils.adjustPointForScroll(this._currentMousePosition);\n            this._draggedElement.style.left = adjustedPosition.x + \"px\";\n            this._draggedElement.style.top = adjustedPosition.y + \"px\";\n\n            document.body.appendChild(this._draggedElement);\n        }\n\n        hostElement.appendChild(paletteItem.renderedElement);\n    }\n\n    private buildPalette() {\n        if (!this._isAttached) {\n            return;\n        }\n\n        this._toolPaletteToolbox.content.innerHTML = \"\";\n\n        let categorizedTypes: object = {};\n\n        for (let i = 0; i < this.hostContainer.elementsRegistry.getItemCount(); i++) {\n            let registration = this.hostContainer.elementsRegistry.getItemAt(i);\n\n            if (registration.schemaVersion.compareTo(this.targetVersion) <= 0) {\n                let peerRegistration = Designer.CardDesignerSurface.cardElementPeerRegistry.findTypeRegistration(registration.objectType);\n\n                if (peerRegistration) {\n                    if (!categorizedTypes.hasOwnProperty(peerRegistration.category)) {\n                        categorizedTypes[peerRegistration.category] = [];\n                    }\n\n                    let paletteItem = new ElementPaletteItem(\n                        registration,\n                        peerRegistration\n                    )\n\n                    paletteItem.onDoubleClick = (sender) => {\n                        const peer = paletteItem.createPeer(this, this.designerSurface);\n\n                        if (this.designerSurface.rootPeer.tryAdd(peer)) {\n                            peer.isSelected = true;\n                        };\n                    }\n\n                    categorizedTypes[peerRegistration.category].push(paletteItem);\n                }\n            }\n        }\n\n        if (this.customPaletteItems) {\n            for (let item of this.customPaletteItems) {\n                if (!categorizedTypes.hasOwnProperty(item.category)) {\n                    categorizedTypes[item.category] = [];\n                }\n\n                categorizedTypes[item.category].push(item);\n            }\n        }\n\n        for (let category in categorizedTypes) {\n\n            let categoryList = document.createElement('div');\n            categoryList.setAttribute(\"aria-label\", category)\n\n            let node = document.createElement('div');\n            categoryList.appendChild(node);\n            node.innerText = category;\n            node.className = \"acd-palette-category\";\n\n            this._toolPaletteToolbox.content.appendChild(categoryList);\n\n            let paletteItemContainer = document.createElement('div');\n            paletteItemContainer.className = \"acd-palette-item-container\";\n\n            for (let i = 0; i < categorizedTypes[category].length; i++) {\n                this.addPaletteItem(categorizedTypes[category][i], paletteItemContainer);\n            }\n\n            categoryList.appendChild(paletteItemContainer);\n        }\n    }\n\n    private endDrag() {\n        if (this._draggedPaletteItem) {\n            this._draggedPaletteItem.endDrag();\n            this._draggedElement.parentNode.removeChild(this._draggedElement);\n\n            this._draggedPaletteItem = null;\n            this._draggedElement = null;\n        }\n    }\n\n    private renderErrorPaneElement(message: string, source?: Adaptive.SerializableObject): HTMLElement {\n        let errorElement = document.createElement(\"div\");\n        errorElement.className = \"acd-error-pane-message\";\n\n        if (source && source instanceof Adaptive.CardObject) {\n            errorElement.classList.add(\"selectable\");\n            errorElement.title = \"Click to select this element\";\n            errorElement.onclick = (e) => {\n                let peer = this.designerSurface.findPeer(source);\n\n                if (peer) {\n                    peer.isSelected = true;\n                    peer.scrollIntoView();\n                }\n            }\n        }\n\n        errorElement.innerText = message;\n\n        return errorElement;\n    }\n\n    private recreateDesignerSurface() {\n        let styleSheetLinkElement = <HTMLLinkElement>document.getElementById(\"adaptiveCardStylesheet\");\n\n        if (styleSheetLinkElement == null) {\n            styleSheetLinkElement = document.createElement(\"link\");\n            styleSheetLinkElement.id = \"adaptiveCardStylesheet\";\n\n            document.getElementsByTagName(\"head\")[0].appendChild(styleSheetLinkElement);\n        }\n\n        styleSheetLinkElement.rel = \"stylesheet\";\n\t\tstyleSheetLinkElement.type = \"text/css\";\n\n\t\tif (Utils.isAbsoluteUrl(this.hostContainer.styleSheet))\n        {\n\t\t\tstyleSheetLinkElement.href = this.hostContainer.styleSheet;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstyleSheetLinkElement.href = Utils.joinPaths(this._assetPath, this.hostContainer.styleSheet);\n\t\t}\n\n        let cardArea = document.getElementById(\"cardArea\");\n\n        if (cardArea) {\n            cardArea.style.backgroundColor = this.hostContainer.getBackgroundColor();\n        }\n\n        this.hostContainer.initialize();\n\n        this._designerHostElement.innerHTML = \"\";\n        this.hostContainer.renderTo(this._designerHostElement);\n\n        let wasInPreviewMode = this._designerSurface ? this._designerSurface.isPreviewMode : false;\n\n        this._designerSurface = new Designer.CardDesignerSurface(this);\n        this._designerSurface.fixedHeightCard = this.hostContainer.isFixedHeight;\n        this._designerSurface.onSelectedPeerChanged = (peer: DesignerPeers.DesignerPeer) => {\n            this.buildPropertySheet(peer);\n        };\n        this._designerSurface.onLayoutUpdated = (isFullRefresh: boolean) => {\n            if (isFullRefresh) {\n                this.scheduleUpdateJsonFromCard();\n                this.buildTreeView();\n            }\n        };\n        this._designerSurface.onCardValidated = (logEntries: Adaptive.IValidationEvent[]) => {\n            if (this.onCardValidated) {\n                this.onCardValidated(this, logEntries);\n            }\n\n            let errorPane = document.getElementById(\"errorPane\");\n            errorPane.innerHTML = \"\";\n\n            if(this.targetVersion.toString() == \"1.4\" && (this.hostContainer.name == \"Microsoft Teams - Dark\" || this.hostContainer.name == \"Microsoft Teams - Light\")){\n                errorPane.appendChild(this.renderErrorPaneElement(\"[Warning] The selected Target Version (\" + this.targetVersion.toString() + \") is only supported by bot sent card. For user sent cards please use version 1.3\"));\n            }\n\n            if (this.targetVersion.compareTo(this.hostContainer.targetVersion) > 0 && Shared.GlobalSettings.showTargetVersionMismatchWarning) {\n                errorPane.appendChild(this.renderErrorPaneElement(\"[Warning] The selected Target Version (\" + this.targetVersion.toString() + \") is greater than the version supported by \" + this.hostContainer.name + \" (\" + this.hostContainer.targetVersion.toString() + \")\"));\n            }\n\n            if (logEntries.length > 0) {\n                let dedupedEntries: Adaptive.IValidationEvent[] = [];\n\n                for (let entry of logEntries) {\n                    if (dedupedEntries.indexOf(entry) < 0) {\n                        dedupedEntries.push(entry);\n                    }\n                }\n\n                for (let entry of dedupedEntries) {\n                    let s: string = \"\";\n\n                    switch (entry.phase) {\n                        case Adaptive.ValidationPhase.Parse:\n                            s = \"[Parse]\";\n                            break;\n                        case Adaptive.ValidationPhase.ToJSON:\n                            s = \"[Serialize]\";\n                            break;\n                        default:\n                            s = \"[Validation]\";\n                            break;\n                    }\n\n                    errorPane.appendChild(this.renderErrorPaneElement(s + \" \" + entry.message, entry.source));\n                }\n            }\n\n            if (errorPane.childElementCount > 0) {\n                errorPane.classList.remove(\"acd-hidden\");\n            }\n            else {\n                errorPane.classList.add(\"acd-hidden\");\n            }\n        };\n        this._designerSurface.onStartDrag = (sender: Designer.CardDesignerSurface) => {\n            this._startDragPayload = JSON.parse(this.getCurrentCardEditorPayload());\n        };\n        this._designerSurface.onEndDrag = (sender: Designer.CardDesignerSurface, wasCancelled: boolean) => {\n            if (wasCancelled) {\n                this.setCardPayload(this._startDragPayload, false);\n            }\n            else {\n                this.addToUndoStack(this._designerSurface.getCardPayloadAsObject());\n            }\n        };\n\n        this.buildPalette();\n        this.buildPropertySheet(null);\n\n        this.updateCardFromJson(false);\n        this.updateSampleData();\n\n        this._designerSurface.isPreviewMode = wasInPreviewMode;\n\n        this.updateFullLayout();\n    }\n\n    private activeHostContainerChanged() {\n        this.recreateDesignerSurface();\n\n        if (this.onActiveHostContainerChanged) {\n            this.onActiveHostContainerChanged(this);\n        }\n    }\n\n    private targetVersionChanged() {\n        let cardPayload = this.designerSurface.getCardPayloadAsObject();\n\n        if (typeof cardPayload === \"object\") {\n            cardPayload[\"version\"] = this.targetVersion.toString();\n\n            this.setCardPayload(cardPayload, false);\n        }\n\n        this.recreateDesignerSurface();\n\n        if (this.onTargetVersionChanged) {\n            this.onTargetVersionChanged(this);\n        }\n    }\n\n    private updateToolboxLayout(toolbox: Toolbox, hostPanelRect: ClientRect | DOMRect) {\n        if (toolbox) {\n            let jsonEditorHeaderRect = toolbox.getHeaderBoundingRect();\n\n            toolbox.content.style.height = (hostPanelRect.height - jsonEditorHeaderRect.height) + \"px\";\n        }\n    }\n\n    private updateJsonEditorsLayout() {\n        if (this._isMonacoEditorLoaded) {\n            let jsonEditorsPaneRect = this._jsonEditorsPanel.contentHost.getBoundingClientRect();\n\n            this.updateToolboxLayout(this._cardEditorToolbox, jsonEditorsPaneRect);\n            this._cardEditor.layout();\n\n            if (this._sampleDataEditorToolbox) {\n                this.updateToolboxLayout(this._sampleDataEditorToolbox, jsonEditorsPaneRect);\n                this._sampleDataEditor.layout();\n            }\n        }\n    }\n\n    private updateFullLayout() {\n        this.scheduleLayoutUpdate();\n        this.updateJsonEditorsLayout();\n    }\n\n    private _jsonUpdateTimer: any;\n    private _cardUpdateTimer: any;\n    private _updateLayoutTimer: any;\n    private _preventCardUpdate: boolean = false;\n\n    private cardPayloadChanged() {\n        if (this.onCardPayloadChanged) {\n            this.onCardPayloadChanged(this);\n        }\n    }\n\n    private _cardEditorUpdateCounter = 0;\n\n    private beginCardEditorUpdate() {\n        this._cardEditorUpdateCounter++;\n    }\n\n    private endCardEditorUpdate() {\n        if (this._cardEditorUpdateCounter > 0) {\n            this._cardEditorUpdateCounter--;\n        }\n    }\n\n    private setCardPayload(payload: object, addToUndoStack: boolean) {\n        if (this._isMonacoEditorLoaded) {\n            this.beginCardEditorUpdate();\n\n            try {\n                if (payload.hasOwnProperty(\"version\")) {\n                    payload[\"version\"] = this.targetVersion.toString();\n                }\n\n                this._cardEditor.setValue(JSON.stringify(payload, null, 4));\n                this.updateCardFromJson(addToUndoStack);\n            }\n            finally {\n                this.endCardEditorUpdate();\n            }\n        }\n\n        this.cardPayloadChanged();\n    }\n\n    private setSampleDataPayload(payload: any) {\n        if (this._isMonacoEditorLoaded && this._sampleDataEditor) {\n            this._sampleDataEditor.setValue(JSON.stringify(payload, null, 4));\n        }\n    }\n\n    private updateJsonFromCard(addToUndoStack: boolean = true) {\n        try {\n            this._preventCardUpdate = true;\n\n            if (!this.preventJsonUpdate && this._isMonacoEditorLoaded) {\n                let cardPayload = this._designerSurface.getCardPayloadAsObject();\n\n                this.setCardPayload(cardPayload, addToUndoStack);\n            }\n        }\n        finally {\n            this._preventCardUpdate = false;\n        }\n    }\n\n    private scheduleUpdateJsonFromCard() {\n        clearTimeout(this._jsonUpdateTimer);\n\n        if (!this.preventJsonUpdate) {\n            this._jsonUpdateTimer = setTimeout(() => { this.updateJsonFromCard(); }, 100);\n        }\n    }\n\n    private preventJsonUpdate: boolean = false;\n\n    private getCurrentCardEditorPayload(): string {\n        return this._isMonacoEditorLoaded ? this._cardEditor.getValue() : Constants.defaultPayload;\n    }\n\n    private getCurrentSampleDataEditorPayload(): string {\n        return this._isMonacoEditorLoaded && this._sampleDataEditor ? this._sampleDataEditor.getValue() : \"\";\n    }\n\n    private updateCardFromJson(addToUndoStack: boolean) {\n        try {\n            this.preventJsonUpdate = true;\n\n            let currentEditorPayload = this.getCurrentCardEditorPayload();\n\n            if (addToUndoStack) {\n                try {\n                    this.addToUndoStack(JSON.parse(currentEditorPayload));\n                }\n                catch {\n                    // Swallow the parse error\n                }\n            }\n\n            if (!this._preventCardUpdate) {\n                this.designerSurface.setCardPayloadAsString(currentEditorPayload);\n\n                this.cardPayloadChanged();\n            }\n        } finally {\n            this.preventJsonUpdate = false;\n        }\n    }\n\n    private scheduleUpdateCardFromJson() {\n        clearTimeout(this._cardUpdateTimer);\n\n        if (!this._preventCardUpdate) {\n            this._cardUpdateTimer = setTimeout(() => { this.updateCardFromJson(true); }, 300);\n        }\n    }\n\n    private _isEdgeHTML?: boolean = undefined;\n\n    private isEdgeHTML(): boolean {\n        if (this._isEdgeHTML === undefined) {\n            this._isEdgeHTML = window.navigator.userAgent.toLowerCase().indexOf(\"edge\") > -1;\n        }\n\n        return this._isEdgeHTML;\n    }\n\n    private scheduleLayoutUpdate() {\n        if (this.designerSurface) {\n            if (!this.isEdgeHTML()) {\n                this.designerSurface.updateLayout(false);\n            }\n            else {\n                // In \"old\" Edge, updateLayout() is *super* slow (because it uses getBoundingClientRect\n                // heavily which is itself super slow) and we have to call it only on idle\n                clearTimeout(this._updateLayoutTimer);\n\n                this._updateLayoutTimer = setTimeout(\n                    () => {\n                        if (this.designerSurface) {\n                            this.designerSurface.updateLayout(false);\n                        }\n                    },\n                    5);\n            }\n        }\n    }\n\n    private _targetVersion: Adaptive.Version = Adaptive.Versions.latest;\n    private _fullScreenHandler = new FullScreenHandler();\n    private _fullScreenButton: ToolbarButton;\n    private _hostContainerChoicePicker: ToolbarChoicePicker;\n    private _versionChoicePicker: ToolbarChoicePicker;\n    private _undoButton: ToolbarButton;\n    private _redoButton: ToolbarButton;\n    private _newCardButton: ToolbarButton;\n    private _copyJSONButton: ToolbarButton;\n    private _togglePreviewButton: ToolbarButton;\n    private _helpButton: ToolbarButton;\n    private _preventRecursiveSetTargetVersion = false;\n\n    private prepareToolbar() {\n        if (Shared.GlobalSettings.showVersionPicker) {\n            this._versionChoicePicker = new ToolbarChoicePicker(CardDesigner.ToolbarCommands.VersionPicker);\n            this._versionChoicePicker.label = \"Target version:\"\n            this._versionChoicePicker.alignment = ToolbarElementAlignment.Right;\n            this._versionChoicePicker.separator = true;\n\n            for (let i = 0; i < Shared.GlobalSettings.supportedTargetVersions.length; i++) {\n                this._versionChoicePicker.choices.push(\n                    {\n                        name: Shared.GlobalSettings.supportedTargetVersions[i].label,\n                        value: i.toString()\n                    });\n            }\n\n            this.toolbar.addElement(this._versionChoicePicker);\n        }\n\n        this._newCardButton = new ToolbarButton(\n            CardDesigner.ToolbarCommands.NewCard,\n            \"New card\",\n            \"acd-icon-newCard\",\n            (sender: ToolbarButton) => {\n                let dialog = new OpenSampleDialog({\n                    catalogue: this._sampleCatalogue,\n                    handlers: [\n                        {\n                            label: \"From JSON Schema\",\n                            onClick: () => {\n                                dialog.close()\n                                this.launchJsonSchemaPopup()\n                            },\n                            cardData: {\n                                thumbnail: () => {\n                                    const thumbnail = document.createElement(\"div\");\n                                    thumbnail.className = \"acd-image-container\";\n                                    thumbnail.innerHTML = `<div class=\"acd-image-upload acd-open-sample-item\">\n                                        <img alt=\"json schema image\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAACKCAMAAABCWSJWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJDUExURQAAAAAAAEBAQGBgYFVVVU1NTUZGRl1dXVVVVU5OTlVVVVBQUEtLS1FRUVFRUVJSUlJSUk9PT1JSUlBQUFNTU1BQUE5OTlNTU1FRUU5OTlNTU09PT1NTU1FRUU9PT1NTU1BQUE5OTlJSUlBQUFJSUlBQUE9PT1JSUlFRUU9PT05OTlFRUU5OTlJSUlFRUVBQUFFRUU9PT05OTlFRUVBQUE9PT05OTlJSUlFRUVFRUVBQUFBQUE9PT1FRUVBQUE9PT1FRUU9PT05OTlBQUFBQUFBQUE9PT1FRUVFRUU9PT1BQUE9PT1FRUU9PT09PT1BQUE1NTVBQUE9PT1BQUE9PT05OTlBQUFFRUVBQUFBQUE9PT1FRUVFRUVBQUE9PT1FRUVBQUE9PT1FRUVBQUE9PT05OTlBQUFBQUFBQUFBQUE9PT1BQUE9PT1FRUVBQUFFRUVBQUFFRUVBQUFBQUFBQUFFRUVBQUFBQUFBQUFFRUVFRUVBQUFBQUFBQUE9PT1FRUVBQUFBQUE9PT1FRUVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFFRUVBQUFBQUE9PT1FRUVBQUE9PT1BQUFBQUFBQUFBQUFBQUFBQUFBQUFFRUU9PT1FRUVBQUFBQUFBQUFFRUVBQUFBQUFBQUFBQUE9PT1BQUFFRUVBQUFBQUE9PT1FRUVBQUFBQUFBQUFFRUVBQUFBQUFBQUFFRUVBQUE9PT1BQUE9PT1FRUVBQUFBQUFBQUE9PT1BQUE9PT1BQUFFRUc/1aIgAAAC+dFJOUwABBAgJCgsLDA0PEBETFhkcHR8gIiMkJSYnKCorLC0uMDEyMzU2Nzg5Ojs8Pj4/Q0VHSEhJSktLTE9QU1RVVldYWltcXWBhYWJkZmdoamtscHN0eX5/gIGCg4SEhYaIiImKi4yOj4+QlZaXmZqbnJ6goaKjpqeoqaqqq6ytsLGxsrO0tLW2ubq7vL2/wcLDxMTFx8jJysvNzs/R1NTV1tra293e4OHj4+Xm5+fo6erq6+zt7e7y9ff3+Pr8/v6BMG3iAAAACXBIWXMAADLAAAAywAEoZFrbAAAEwklEQVR4Xu2c+1tURRjHVxSEAhXTLBNLCSMzu6nYFpQheEXCSk3D1MrQUjQTLbxg3lBERUHMa0ZZlikQRVg6/mntvvNdd3b33T17mDknnp75/MLznXn3nQ+H3XPmUYZAKnLLG9q6BoQX3Bf3+i43b5iJlRx47hBe5iU3a3OwXHIe+wLFXtNbgxWTMasblT7QOAKLslSjyh/OP4FlGd5EjV+cT3pdiu6g5Le62eNSXj13TPkTfXs2zx2fmVewpAlZfI2KBDpR8H4mBgxxBn0/yMZAoPgAhpK8dxfL2e5ZyKaokH375iIT6+Rgz0jkWH6Qs9MRjXFV9o27rcFlDWIMZXJuPqIxXpV9FyI+QP6MbiDFIO9tLUjm+Jz6tiFFeZbGxQxElV6aCSKZ4wb1fQNJQV6WdUgKE2hiIAPRGPnUVzz48ERZShNHkRRm0kQrkjmKqG8HkkoBzVxEUpB32gYkcwSp7z4klTya6UVSqKKJOiRzVFLfeiSVETQzgKTgv8o4mulCUvBfZTbNJH7K/wOVTTSzE0nBd5XM2zRTjqjgu8pqmhC5iAp+q5TQuDiEqOKzygz5nGH3Af6qYA8jtiPH4KNKVtkpGhTi1gQMxRCv8nq9DsvQJaLyHcZD7G2/S0NhXkFRLPEqBykPlnPoElHhqUJNHP6r9JeiJB7fVc4WoiIBn1WuJex1o/ip8uvWlPvWeJVRlTpMRpeIykmMhwhOy8dUMuJVTCFVmGdQcqwKh1XhsCocVoXDqnDEq5h9HFqVMFaF4/+qYgqrwmFVOKwKh1XhsCocBlTGVulQhC5GVOyTOYxV4RjCKnPqdIj+o58BFVNYFQ6rwmFVOKwKh1XhMKCyokOHTehiRMVuEsJYFY4hrBJ4WodhaGJGxRBrqW8nUlp4pTKEropV4bAqHFaFw6pwWBUOq8JhVTisCodLlfyiYOUOeslx/B6dFm+/98kidHanEtwiz6oY5Q6au1FZcI1KTeNeZWo7FZrHtUrpX1TnAW5V5IfGE1yqvExFRMd+/A63Bl9FDjoK8ftPh7FGeiqP3qIiIU6V8Yf/XHIC7bp2jMEIkY5K5LRwBbImNWi3CjlCGio4a9fLHbYbBNk9sl/CN5aGyjdUIkoQdVkj2y1HjOKs8jBViNWI2lygdgeQFJxV3qKK7ixEXSZSO1GMqOCs8iVVbEbSRr5p25FUnFVOU4Wpd0rgU2r3LpKKs8r3VDEeSZtd1I45iJqGSj9VGDvO3UrtuBuDs0ofVeQhaXOE2r2EpCLfRR8jcVyiigIkbbZRO+7G/RHNJN5vojRTxRIkbWqp3WdIKvLzMQ+JYwNVNCFpI8/9/oykgOPMTyJyyOPL4hlEXXJku8SrvJHGryDx3KQaY5dF/nmSHx9CjFBIw2I9Io/86YoPEXXB38DYjwhyr8jhp5B5cnAc0pRLi2y3ezhymMexi4/+nxlPZK/TxDzDBsGLaNf5GgZCe2fsYf6O2dZx7JGFoUf70gID9zqcxA1tUN+ZOjojf3qtvKGHcN4nZn2L0hD38NULVmK9VEyKunioshGrpSazEeUeqlRjLUdq8M7ySuXYC1goDbJrfwm/xBuV9mSnUJPx/Prmi3/gxab453rH3upHsEAqAoF/ATgD/WK2xh4JAAAAAElFTkSuQmCC\" />\n                                        <div class=\"acd-image-text-container\">\n                                            <div class=\"acd-image-upload-title\">From JSON Schema</div>\n                                        </div>\n                                    </div>`;\n                                    return thumbnail;\n                                },\n                            },\n                        },\n                        Pic2Card.pic2cardService ?\n                            {\n                                label: \"Pic2Card\",\n                                onClick: () => {\n                                    dialog.close()\n                                    this.launchImagePopup()\n                                },\n                                cardData: {\n                                    thumbnail: () => {\n                                        const thumbnail = document.createElement(\"div\");\n                                        thumbnail.className = \"acd-image-container\";\n                                        thumbnail.innerHTML = `<div class=\"acd-image-upload acd-open-sample-item\">\n                                            <img alt=\"pic2card image\" src=\"data:image/png;base64,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\" />\n                                            <div class=\"acd-image-text-container\">\n                                                <div class=\"acd-image-new-title\">NEW PREVIEW</div>\n                                                <div class=\"acd-image-upload-title\">Create from Image </div>\n                                                <div id=\"image-description-id\" class=\"acd-image-description\">Upload your own image and convert it magically to an Adaptive card</div>\n                                                <input aria-labelledby=\"image-description-id\" class=\"acd-try-now-button\" value=\"Try Now\" type=\"button\" />\n                                            </div>\n                                        </div>`;\n                                        return thumbnail;\n                                    },\n                                },\n                            } : null,\n                    ]\n                });\n                dialog.title = \"Create\";\n                dialog.closeButton.caption = \"Cancel\";\n                dialog.width = \"80%\";\n                dialog.height = \"80%\";\n                dialog.onClose = (d) => {\n                    const newCardButton = this._newCardButton.renderedElement;\n                    if (dialog.output) {\n                        try {\n                            let cardPayload = JSON.parse(dialog.output.cardPayload);\n\n                            this.setCardPayload(cardPayload, true);\n                        } catch {\n                            alert(\"The card template could not be loaded.\");\n                            return\n                        }\n\n                        if (dialog.output.sampleData) {\n                            try {\n                                let sampleDataPayload = JSON.parse(dialog.output.sampleData);\n\n                                this.setSampleDataPayload(sampleDataPayload);\n                                this.dataStructure = FieldDefinition.deriveFrom(sampleDataPayload);\n                            } catch {\n                                alert(\"The card data could not be loaded.\")\n                            }\n                        } else {\n                            this.setSampleDataPayload({});\n                        }\n                    }\n                    if (newCardButton) {\n                        newCardButton.focus();\n                    }\n                };\n                dialog.open();\n            });\n        this._newCardButton.separator = true;\n\n        this.toolbar.addElement(this._newCardButton);\n\n        if (this._hostContainers && this._hostContainers.length > 0) {\n            this._hostContainerChoicePicker = new ToolbarChoicePicker(CardDesigner.ToolbarCommands.HostAppPicker);\n            this._hostContainerChoicePicker.separator = true;\n            this._hostContainerChoicePicker.label = \"Select host app:\"\n\n            for (let i = 0; i < this._hostContainers.length; i++) {\n                this._hostContainerChoicePicker.choices.push(\n                    {\n                        name: this._hostContainers[i].name,\n                        value: i.toString(),\n                    }\n                );\n            }\n\n            this._hostContainerChoicePicker.onChanged = (sender) => {\n                this.hostContainer = this._hostContainers[parseInt(this._hostContainerChoicePicker.value)];\n\n                this.activeHostContainerChanged();\n            };\n\n            this.toolbar.addElement(this._hostContainerChoicePicker);\n        }\n\n        this._undoButton = new ToolbarButton(\n            CardDesigner.ToolbarCommands.Undo,\n            \"Undo\",\n            \"acd-icon-undo\",\n            (sender: ToolbarButton) => { this.undo(); });\n        this._undoButton.separator = true;\n        this._undoButton.toolTip = \"Undo your last change\";\n        this._undoButton.isEnabled = false;\n\n        this.toolbar.addElement(this._undoButton);\n\n        this._redoButton = new ToolbarButton(\n            CardDesigner.ToolbarCommands.Redo,\n            \"Redo\",\n            \"acd-icon-redo\",\n            (sender: ToolbarButton) => { this.redo(); });\n        this._redoButton.toolTip = \"Redo your last changes\";\n        this._redoButton.isEnabled = false;\n\n        this.toolbar.addElement(this._redoButton);\n\n        this._copyJSONButton = new ToolbarButton(\n            CardDesigner.ToolbarCommands.CopyJSON,\n            \"Copy card payload\",\n            \"acd-icon-copy\");\n        this._copyJSONButton.toolTip = \"Copy the generated JSON payload of the card (template bound with data) to the clipboard. To copy only the template payload, use the Card Payload Editor.\";\n        this.toolbar.addElement(this._copyJSONButton);\n\n        this._togglePreviewButton = new ToolbarButton(\n            CardDesigner.ToolbarCommands.TogglePreview,\n            \"Preview mode\",\n            \"acd-icon-preview\",\n            (sender: ToolbarButton) => { this.togglePreview(); });\n        this._togglePreviewButton.separator = true;\n        this._togglePreviewButton.allowToggle = true;\n        this._togglePreviewButton.isVisible = Shared.GlobalSettings.enableDataBindingSupport;\n\n        this.toolbar.addElement(this._togglePreviewButton);\n\n        this._helpButton = new ToolbarButton(\n            CardDesigner.ToolbarCommands.Help,\n            \"Help\",\n            \"acd-icon-help\",\n            (sender: ToolbarButton) => { this.showHelp(); });\n        this._helpButton.toolTip = \"Display help.\";\n        this._helpButton.separator = true;\n        this._helpButton.alignment = ToolbarElementAlignment.Right;\n        this.toolbar.addElement(this._helpButton);\n\n        this._fullScreenHandler = new FullScreenHandler();\n        this._fullScreenHandler.onFullScreenChanged = (isFullScreen: boolean) => {\n            this._fullScreenButton.toolTip = isFullScreen ? \"Exit full screen\" : \"Enter full screen\";\n\n            this.updateFullLayout();\n        }\n    }\n\n    private launchJsonSchemaPopup() {\n        let dialog = new OpenJsonSchemaDialog();\n        dialog.title = \"Create from JSON Schema\";\n        dialog.closeButton.caption = \"Cancel\";\n        dialog.preventLightDismissal = true;\n        dialog.width = \"80%\";\n        dialog.height = \"80%\";\n        dialog.open();\n\n        dialog.submitButton.onClick = () => {\n            dialog.close();\n            if (dialog.output) {\n                try {\n                    let cardPayload = JSON.parse(dialog.output.cardPayload);\n\n                    this.setCardPayload(cardPayload, true);\n                } catch {\n                    alert(\"The card template could not be loaded.\");\n                    return\n                }\n\n                if (dialog.output.sampleData) {\n                    try {\n                        let sampleDataPayload = JSON.parse(dialog.output.sampleData);\n\n                        this.setSampleDataPayload(sampleDataPayload);\n                        this.dataStructure = FieldDefinition.deriveFrom(sampleDataPayload);\n                    } catch {\n                        alert(\"The card data could not be loaded.\")\n                    }\n                } else {\n                    this.setSampleDataPayload({});\n                }\n            }\n\n            const newCardButton = this._newCardButton.renderedElement;\n\n            if (newCardButton) {\n                newCardButton.focus();\n            }\n        }\n\n        dialog.onClose = (d) => {\n            const newCardButton = this._newCardButton.renderedElement;\n\n            if (newCardButton) {\n                newCardButton.focus();\n            }\n        };\n    }\n\n\n    private launchImagePopup() {\n        let dialog = new OpenImageDialog();\n        dialog.title = \"Pic2card Dialog for Image Upload\";\n        dialog.closeButton.caption = \"Cancel\";\n        dialog.preventLightDismissal = true;\n        dialog.width = \"80%\";\n        dialog.height = \"80%\";\n        dialog.open();\n        dialog.onClose = (d) => {\n            const newCardButton = this._newCardButton.renderedElement;\n\n            if (dialog.predictedCardJSON) {\n                const { card, data } = dialog.predictedCardJSON;\n                const addToUndoStack = true;\n\n                this.setCardPayload(card, addToUndoStack);\n                this.setSampleDataPayload(data);\n\n                let loadNotification = document.createElement(\"span\");\n                loadNotification.id = \"pic2cardLoadNotification\";\n                loadNotification.setAttribute(\"role\", \"status\");\n                loadNotification.setAttribute(\"aria-label\", \"Pic2Card generated Adaptive Card loaded\");\n\n                // It's a bit odd to jump up to the parent element here, but we need a place to park this empty element\n                // so that it's seen by accessibility tools. If we put it on the button itself, the status message gets\n                // read twice (once on DOM entry and again on focus).\n                newCardButton.parentElement.appendChild(loadNotification);\n\n                // element needs to enter the DOM, but shouldn't stay forever, lest it be read again...\n                setTimeout(() => {\n                    newCardButton.parentElement.removeChild(loadNotification);\n                }, 500);\n            }\n\n            if (newCardButton) {\n                newCardButton.focus();\n            }\n        };\n    }\n\n    private onResize() {\n        this._cardEditor.layout();\n\n        if (this._sampleDataEditor) {\n            this._sampleDataEditor.layout();\n        }\n    }\n\n    private updateSampleData() {\n        try {\n            this._sampleData = JSON.parse(this.getCurrentSampleDataEditorPayload());\n\n            this.scheduleUpdateCardFromJson();\n        }\n        catch {\n            // Swallow expression, the payload isn't a valid JSON document\n        }\n    }\n\n    private updateToolbar() {\n        this._undoButton.isEnabled = this.canUndo;\n        this._redoButton.isEnabled = this.canRedo;\n    }\n\n    private addToUndoStack(payload: object) {\n        let doAdd: boolean = !this._designerSurface.draggedPeer;\n\n        if (doAdd) {\n            if (this._undoStack.length > 0) {\n                doAdd = this._undoStack[this._undoStack.length - 1] != payload;\n            }\n\n            if (doAdd) {\n                let undoPayloadsToDiscard = this._undoStack.length - (this._undoStackIndex + 1);\n\n                if (undoPayloadsToDiscard > 0) {\n                    this._undoStack.splice(this._undoStackIndex + 1, undoPayloadsToDiscard);\n                }\n\n                this._undoStack.push(payload);\n\n                if (this._undoStack.length > CardDesigner.MAX_UNDO_STACK_SIZE) {\n                    this._undoStack.splice(0, 1);\n                }\n\n                this._undoStackIndex = this._undoStack.length - 1;\n\n                this.updateToolbar();\n            }\n        }\n    }\n\n    private handlePointerUp(e: PointerEvent) {\n        this.endDrag();\n\n        if (this.designerSurface) {\n            this.designerSurface.endDrag(false);\n        }\n    }\n\n    private handlePointerMove(e: PointerEvent) {\n        this._currentMousePosition = { x: e.x, y: e.y };\n\n        if (this.designerSurface) {\n            let isPointerOverDesigner = this.designerSurface.isPointerOver(this._currentMousePosition.x, this._currentMousePosition.y);\n            let peerDropped = false;\n\n            if (this._draggedPaletteItem && isPointerOverDesigner) {\n                let peer = this._draggedPaletteItem.createPeer(this, this.designerSurface);\n\n                let clientCoordinates = this.designerSurface.pageToClientCoordinates(this._currentMousePosition.x, this._currentMousePosition.y);\n\n                if (this.designerSurface.tryDrop(clientCoordinates, peer)) {\n                    this.endDrag();\n\n                    this.designerSurface.startDrag(peer);\n\n                    peerDropped = true;\n                }\n            }\n\n            if (!peerDropped && this._draggedElement) {\n                const adjustedPosition = Utils.adjustPointForScroll(this._currentMousePosition);\n                this._draggedElement.style.left = adjustedPosition.x - 10 + \"px\";\n                this._draggedElement.style.top = adjustedPosition.y - 10 + \"px\";\n            }\n        }\n    }\n\n    readonly toolbar: Toolbar = new Toolbar();\n\n    lockDataStructure: boolean = false;\n\n    constructor(hostContainers: Array<HostContainer> = null) {\n        super();\n\n        Adaptive.GlobalSettings.enableFullJsonRoundTrip = true;\n        Adaptive.GlobalSettings.allowPreProcessingPropertyValues = true;\n        Adaptive.GlobalSettings.setTabIndexAtCardRoot = false;\n\n        Adaptive.AdaptiveCard.onProcessMarkdown = (text: string, result: Adaptive.IMarkdownProcessingResult) => {\n            CardDesigner.internalProcessMarkdown(text, result);\n        }\n\n        this._hostContainers = hostContainers ? hostContainers : [];\n\n        this.prepareToolbar();\n    }\n\n    monacoModuleLoaded(monaco: any = null) {\n\t\tif (!monaco) {\n            monaco = window[\"monaco\"];\n        }\n\n        let monacoConfiguration = {\n            schemas: [\n                {\n                    uri: \"http://adaptivecards.io/schemas/adaptive-card.json\",\n                    schema: adaptiveCardSchema,\n                    fileMatch: [\"*\"],\n                }\n            ],\n            validate: true,\n            allowComments: true\n        }\n\n\t\t// TODO: set this in our editor instead of defaults\n        monaco.languages.json.jsonDefaults.setDiagnosticsOptions(monacoConfiguration);\n\n        // Setup card JSON editor\n        this._cardEditorToolbox.content = document.createElement(\"div\");\n        this._cardEditorToolbox.content.setAttribute(\"role\", \"region\");\n        this._cardEditorToolbox.content.setAttribute(\"aria-label\", \"card payload editor\");\n        this._cardEditorToolbox.content.classList.add(\"acd-code-editor\");\n\n        this._cardEditor = monaco.editor.create(\n            this._cardEditorToolbox.content,\n            {\n                folding: true,\n                fontSize: 13.5,\n                language: 'json',\n                minimap: {\n                    enabled: true\n                }\n            }\n        );\n\n        this._cardEditor.onDidChangeModelContent(() => {\n            if (this._cardEditorUpdateCounter == 0) {\n                this.scheduleUpdateCardFromJson();\n            }\n        });\n\n        if (this._sampleDataEditorToolbox) {\n            // Setup sample data JSON editor\n            this._sampleDataEditorToolbox.content = document.createElement(\"div\");\n            this._sampleDataEditorToolbox.content.setAttribute(\"role\", \"region\");\n            this._sampleDataEditorToolbox.content.setAttribute(\"aria-label\", \"sample data editor\");\n            this._sampleDataEditorToolbox.content.classList.add(\"acd-code-editor\");\n\n            this._sampleDataEditor = monaco.editor.create(\n                this._sampleDataEditorToolbox.content,\n                {\n                    folding: true,\n                    fontSize: 13.5,\n                    language: 'json',\n                    minimap: {\n                        enabled: false\n                    }\n                }\n            );\n\n            this._sampleDataEditor.onDidChangeModelContent(\n                () => {\n                    this.updateSampleData();\n\n                    if (!this.lockDataStructure) {\n                        try {\n                            this.dataStructure = FieldDefinition.deriveFrom(JSON.parse(this.getCurrentSampleDataEditorPayload()));\n                        }\n                        catch {\n                            // Swallow exception\n                        }\n                    }\n                });\n        }\n\n        window.addEventListener('resize', () => { this.onResize(); });\n\n        this._isMonacoEditorLoaded = true;\n\n        this.updateJsonEditorsLayout();\n        this.updateJsonFromCard(true);\n    }\n\n    attachTo(root: HTMLElement)  {\n        let styleSheetLinkElement = document.createElement(\"link\");\n        styleSheetLinkElement.id = \"__ac-designer\";\n        styleSheetLinkElement.rel = \"stylesheet\";\n\t\tstyleSheetLinkElement.type = \"text/css\";\n        styleSheetLinkElement.href = Utils.joinPaths(this._assetPath, \"adaptivecards-designer.css\");\n\n        document.getElementsByTagName(\"head\")[0].appendChild(styleSheetLinkElement);\n\n        if (this._hostContainers && this._hostContainers.length > 0) {\n            this._hostContainer = this._hostContainers[0];\n        }\n        else {\n            this._hostContainer = new DefaultContainer(\"Default\", \"adaptivecards-defaulthost.css\");\n        }\n\n        root.classList.add(\"acd-designer-root\");\n        root.style.flex = \"1 1 auto\";\n        root.style.display = \"flex\";\n        root.style.flexDirection = \"column\";\n        root.style.overflow = \"hidden\";\n\n        root.innerHTML =\n            '<div id=\"toolbarHost\" role=\"region\" aria-label=\"toolbar\"></div>' +\n            '<div class=\"content\">' +\n                '<div id=\"leftCollapsedPaneTabHost\" class=\"acd-verticalCollapsedTabContainer acd-dockedLeft\"></div>' +\n                '<div id=\"toolPalettePanel\" class=\"acd-toolPalette-pane\" role=\"region\" aria-label=\"card elements\"></div>' +\n                '<div class=\"acd-previewRightAndBottomDocks\">' +\n                    '<div class=\"acd-previewAndBottomDocks\">' +\n                        '<div class=\"acd-designer-card-header\">CARD PREVIEW</div>' +\n                        '<div id=\"cardArea\" class=\"acd-designer-cardArea\" role=\"region\" aria-label=\"card preview\">' +\n                            '<div style=\"flex: 1 1 100%; overflow: auto;\">' +\n                                '<div id=\"designerHost\" class=\"acd-designer-host\"></div>' +\n                            '</div>' +\n                            '<div id=\"errorPane\" class=\"acd-error-pane acd-hidden\"></div>' +\n                        '</div>' +\n                        '<div id=\"treeViewPanel\" class=\"acd-treeView-pane\" role=\"region\" aria-label=\"card structure\"></div>' +\n                       '<div id=\"propertySheetPanel\" class=\"acd-propertySheet-pane\" role=\"region\" aria-label=\"element properties\"></div>' +\n                    '</div>' +\n                    '<div id=\"jsonEditorPanel\" class=\"acd-json-editor-pane\"></div>' +\n                    '<div id=\"bottomCollapsedPaneTabHost\" class=\"acd-horizontalCollapsedTabContainer\"></div>' +\n                '</div>' +\n                '<div id=\"rightCollapsedPaneTabHost\" class=\"acd-verticalCollapsedTabContainer acd-dockedRight\"></div>' +\n            '</div>';\n\n        this.toolbar.attachTo(document.getElementById(\"toolbarHost\"));\n\n        if (this._versionChoicePicker) {\n            this._versionChoicePicker.selectedIndex = Shared.GlobalSettings.supportedTargetVersions.indexOf(this.targetVersion);\n            this._versionChoicePicker.onChanged = (sender: ToolbarChoicePicker) => {\n                this.targetVersion = Shared.GlobalSettings.supportedTargetVersions[parseInt(this._versionChoicePicker.value)];\n            }\n        }\n\n        if (this._copyJSONButton.isVisible) {\n            new Clipboard(\n                this._copyJSONButton.renderedElement,\n                {\n                    text: (trigger) => JSON.stringify(this.getBoundCard(), null, 4)\n                })\n                .on(\"error\", () => this._copyJSONButton.renderedElement.focus())\n                .on(\"success\", () => this._copyJSONButton.renderedElement.focus());\n        }\n\n        // Tool palette panel\n        let toolPaletteHost = document.createElement(\"div\");\n        toolPaletteHost.className = \"acd-dockedPane\";\n\n        this._toolPaletteToolbox = new Toolbox(\"toolPalette\", Strings.toolboxes.toolPalette.title);\n        this._toolPaletteToolbox.content = toolPaletteHost;\n\n        let toolPalettePanel = new SidePanel(\n            \"toolPalettePanel\",\n            SidePanelAlignment.Left,\n            document.getElementById(\"leftCollapsedPaneTabHost\"));\n        toolPalettePanel.addToolbox(this._toolPaletteToolbox);\n        toolPalettePanel.isResizable = false;\n\n        toolPalettePanel.attachTo(document.getElementById(\"toolPalettePanel\"));\n\n        // JSON editors panel\n        this._cardEditorToolbox = new Toolbox(\"cardEditor\", Strings.toolboxes.cardEditor.title);\n        this._cardEditorToolbox.content = document.createElement(\"div\");\n        this._cardEditorToolbox.content.style.padding = \"8px\";\n        this._cardEditorToolbox.content.innerText = Strings.loadingEditor;\n\n        this._jsonEditorsPanel = new SidePanel(\n            \"jsonEditorPanel\",\n            SidePanelAlignment.Bottom,\n            document.getElementById(\"bottomCollapsedPaneTabHost\"));\n        this._jsonEditorsPanel.onResized = (sender: SidePanel) => {\n            this.updateJsonEditorsLayout();\n        }\n        this._jsonEditorsPanel.onToolboxResized = (sender: SidePanel) => {\n            this.updateJsonEditorsLayout();\n        }\n        this._jsonEditorsPanel.onToolboxExpandedOrCollapsed = (sender: SidePanel) => {\n            this.updateJsonEditorsLayout();\n        }\n\n        this._jsonEditorsPanel.addToolbox(this._cardEditorToolbox);\n\n        if (Shared.GlobalSettings.enableDataBindingSupport && Shared.GlobalSettings.showSampleDataEditorToolbox) {\n            this._sampleDataEditorToolbox = new Toolbox(\"sampleDataEditor\", Strings.toolboxes.sampleDataEditor.title);\n            this._sampleDataEditorToolbox.content = document.createElement(\"div\");\n            this._sampleDataEditorToolbox.content.style.padding = \"8px\";\n            this._sampleDataEditorToolbox.content.innerText = Strings.loadingEditor;\n\n            this._jsonEditorsPanel.addToolbox(this._sampleDataEditorToolbox);\n        }\n\n        this._jsonEditorsPanel.attachTo(document.getElementById(\"jsonEditorPanel\"));\n\n        // Property sheet panel\n        let propertySheetHost = document.createElement(\"div\");\n        propertySheetHost.className = \"acd-propertySheet-host\";\n\n        this._propertySheetToolbox = new Toolbox(\"propertySheet\", Strings.toolboxes.propertySheet.title);\n        this._propertySheetToolbox.content = propertySheetHost;\n\n        let propertySheetPanel = new SidePanel(\n            \"propertySheetPanel\",\n            SidePanelAlignment.Right,\n            document.getElementById(\"rightCollapsedPaneTabHost\"));\n        propertySheetPanel.addToolbox(this._propertySheetToolbox);\n        propertySheetPanel.onResized = (sender: SidePanel) => {\n            this.scheduleLayoutUpdate();\n        }\n\n        propertySheetPanel.attachTo(document.getElementById(\"propertySheetPanel\"));\n\n        // Tree view panel\n        let treeViewHost = document.createElement(\"div\");\n        treeViewHost.className = \"acd-treeView-host\";\n\n        this._treeViewToolbox = new Toolbox(\"treeView\", Strings.toolboxes.cardStructure.title);\n        this._treeViewToolbox.content = treeViewHost;\n\n        let treeViewPanel = new SidePanel(\n            \"treeViewPanel\",\n            SidePanelAlignment.Right,\n            document.getElementById(\"rightCollapsedPaneTabHost\"));\n        treeViewPanel.addToolbox(this._treeViewToolbox);\n        treeViewPanel.onResized = (sender: SidePanel) => {\n            this.scheduleLayoutUpdate();\n        }\n\n        if (Shared.GlobalSettings.enableDataBindingSupport && Shared.GlobalSettings.showDataStructureToolbox) {\n            let dataExplorerHost = document.createElement(\"div\");\n            dataExplorerHost.className = \"acd-treeView-host\";\n\n            this._dataToolbox = new Toolbox(\"data\", Strings.toolboxes.dataStructure.title);\n            this._dataToolbox.content = dataExplorerHost;\n\n            treeViewPanel.addToolbox(this._dataToolbox);\n        }\n\n        treeViewPanel.attachTo(document.getElementById(\"treeViewPanel\"));\n\n        this._designerHostElement = document.getElementById(\"designerHost\");\n\n        window.addEventListener(\"pointermove\", (e: PointerEvent) => { this.handlePointerMove(e); });\n        window.addEventListener(\"resize\", () => { this.scheduleLayoutUpdate(); });\n        window.addEventListener(\"pointerup\", (e: PointerEvent) => { this.handlePointerUp(e); });\n\n        this._isAttached = true;\n\n        this.recreateDesignerSurface();\n    }\n\n    clearUndoStack() {\n        this._undoStack = [];\n        this._undoStackIndex = -1;\n        this.updateToolbar();\n    }\n\n    setCard(payload: object) {\n        this.clearUndoStack();\n        this.setCardPayload(payload, true);\n    }\n\n    getCard(): object {\n        return this._designerSurface ? this._designerSurface.getCardPayloadAsObject() : undefined;\n    }\n\n    getBoundCard(): object {\n        return this._designerSurface ? this._designerSurface.getBoundCardPayloadAsObject() : undefined;\n    }\n\n    undo() {\n        if (this.canUndo) {\n            this._undoStackIndex--;\n\n            let card = this._undoStack[this._undoStackIndex];\n\n            this.setCardPayload(card, false);\n            this.updateToolbar();\n        }\n    }\n\n    redo() {\n        if (this._undoStackIndex < this._undoStack.length - 1) {\n            this._undoStackIndex++;\n\n            let payload = this._undoStack[this._undoStackIndex];\n\n            this.setCardPayload(payload, false);\n            this.updateToolbar();\n        }\n    }\n\n    showHelp() {\n        let helpDialog = new HelpDialog();\n        helpDialog.title = \"Help\";\n        helpDialog.open();\n    }\n\n    newCard() {\n        let card = {\n            type: \"AdaptiveCard\",\n            $schema: \"http://adaptivecards.io/schemas/adaptive-card.json\",\n            version: this.targetVersion.toString(),\n            body: [\n            ]\n        }\n\n        this.setCardPayload(card, true);\n    }\n\n    onCardPayloadChanged: (designer: CardDesigner) => void;\n    onCardValidated: (designer: CardDesigner, validationLogEntries: Adaptive.IValidationEvent[]) => void;\n    onActiveHostContainerChanged: (designer: CardDesigner) => void;\n    onTargetVersionChanged: (designer: CardDesigner) => void;\n\n    get targetVersion(): Adaptive.Version {\n        return this._targetVersion;\n    }\n\n    set targetVersion(value: Adaptive.Version) {\n        if (this._targetVersion.compareTo(value) !== 0 && !this._preventRecursiveSetTargetVersion) {\n            this._preventRecursiveSetTargetVersion = true;\n\n            try {\n                this._targetVersion = value;\n\n                this.targetVersionChanged();\n\n                if (this._versionChoicePicker) {\n                    this._versionChoicePicker.selectedIndex = Shared.GlobalSettings.supportedTargetVersions.indexOf(this._targetVersion);\n                }\n            }\n            finally {\n                this._preventRecursiveSetTargetVersion = false;\n            }\n        }\n    }\n\n    get dataStructure(): FieldDefinition {\n        return this._dataStructure;\n    }\n\n    set dataStructure(value: FieldDefinition) {\n        this._dataStructure = value;\n\n        this.buildDataExplorer();\n    }\n\n    get sampleData(): any {\n        return this._sampleData;\n    }\n\n    set sampleData(value: any) {\n        this._sampleData = value;\n\n        this.setSampleDataPayload(value);\n    }\n\n    get bindingPreviewMode(): Designer.BindingPreviewMode {\n        return this._bindingPreviewMode;\n    }\n\n    set bindingPreviewMode(value: Designer.BindingPreviewMode) {\n        this._bindingPreviewMode = value;\n    }\n\n    get hostContainer(): HostContainer {\n        return this._hostContainer;\n    }\n\n    set hostContainer(value: HostContainer) {\n        if (this._hostContainer !== value) {\n            this._hostContainer = value;\n\n            this.activeHostContainerChanged();\n\n            if (Shared.GlobalSettings.selectedHostContainerControlsTargetVersion) {\n                this.targetVersion = this._hostContainer.targetVersion;\n            }\n        }\n    }\n\n    get canUndo(): boolean {\n        return this._undoStackIndex >= 1;\n    }\n\n    get canRedo(): boolean {\n        return this._undoStackIndex < this._undoStack.length - 1;\n    }\n\n    get designerSurface(): Designer.CardDesignerSurface {\n        return this._designerSurface;\n    }\n\n    get treeViewToolbox(): Toolbox {\n        return this._treeViewToolbox;\n    }\n\n    get propertySheetToolbox(): Toolbox {\n        return this._propertySheetToolbox;\n    }\n\n    get jsonEditorToolbox(): Toolbox {\n        return this._cardEditorToolbox;\n    }\n\n    get toolPaletteToolbox(): Toolbox {\n        return this._toolPaletteToolbox;\n\t}\n\n    get dataToolbox(): Toolbox {\n        return this._dataToolbox;\n\t}\n\n\tget assetPath(): string {\n\t\treturn this._assetPath;\n\t}\n\n\tset assetPath(value: string) {\n\t\tthis._assetPath = value;\n    }\n\n    get customPaletteItems(): CustomPaletteItem[] {\n        return this._customPeletteItems;\n    }\n\n    set customPaletteItems(value: CustomPaletteItem[]) {\n        this._customPeletteItems = value;\n\n        this.buildPalette();\n    }\n\n    get sampleCatalogueUrl(): string {\n        return this._sampleCatalogue.url;\n    }\n\n    set sampleCatalogueUrl(value: string) {\n        this._sampleCatalogue.url = value;\n    }\n}\n\nexport module CardDesigner {\n    export class ToolbarCommands {\n        static readonly HostAppPicker = \"__hostAppPicker\";\n        static readonly VersionPicker = \"__versionPicker\";\n        static readonly Undo = \"__undoButton\";\n        static readonly Redo = \"__redoButton\";\n        static readonly NewCard = \"__newCardButton\";\n        static readonly CopyJSON = \"__copyJsonButton\";\n        static readonly TogglePreview = \"__togglePreviewButton\";\n        static readonly Help = \"__helpButton\";\n    }\n}\n","import * as Adaptive from \"adaptivecards\";\nimport { Downloader } from \"./downloader\";\n\nexport class CatalogueEntry {\n    private _cardPayload: string;\n    private _cardPayloadDownloaded: boolean = false;\n    private _sampleData: string;\n    private _sampleDataDownloaded: boolean = false;\n    private _cardId: string;\n\n    private downloadCompleted() {\n        if (this._cardPayloadDownloaded && this._sampleDataDownloaded && this.onDownloaded) {\n            this.onDownloaded(this);\n        }\n    }\n\n    sampleDataUrl?: string;\n\n    onDownloaded: (sender: CatalogueEntry) => void = null;\n\n    constructor(readonly displayName: string, readonly cardPayloadUrl: string, sampleDataUrl?: string, cardId?:string) {\n        this.sampleDataUrl = sampleDataUrl;\n        this._cardId = cardId;\n    }\n\n    download() {\n        let cardPayloadDownloadComplete = false;\n        let sampleDataDownloadComplete = false;\n\n        if (!this.cardPayloadDownloaded) {\n            let payloadDownloader = new Downloader(this.cardPayloadUrl);\n            payloadDownloader.onSuccess = () => {\n                this._cardPayload = payloadDownloader.data;\n                this._cardPayloadDownloaded = true;\n\n                this.downloadCompleted();\n            }\n            payloadDownloader.onError = () => {\n                this._cardPayloadDownloaded = true;\n\n                this.downloadCompleted();\n            }\n            payloadDownloader.download();\n        }\n        else {\n            cardPayloadDownloadComplete = true;\n        }\n\n        if (this.sampleDataUrl && !this.sampleDataDownloaded) {\n            let sampleDataDownloader = new Downloader(this.sampleDataUrl);\n            sampleDataDownloader.onSuccess = () => {\n                this._sampleData = sampleDataDownloader.data;\n                this._sampleDataDownloaded = true;\n\n                this.downloadCompleted();\n            }\n            sampleDataDownloader.onError = () => {\n                this._sampleDataDownloaded = true;\n\n                this.downloadCompleted();\n            }\n            sampleDataDownloader.download();\n        }\n        else {\n            this._sampleDataDownloaded = true;\n\n            sampleDataDownloadComplete = true;\n        }\n\n        if (cardPayloadDownloadComplete && sampleDataDownloadComplete) {\n            this.downloadCompleted();\n        }\n    }\n\n    get cardPayloadDownloaded(): boolean {\n        return this._cardPayloadDownloaded;\n    }\n\n\n    get cardId(): string  {\n        return this._cardId;\n    }\n\n    get cardPayload(): string {\n        return this._cardPayload;\n    }\n\n    get sampleDataDownloaded(): boolean {\n        return this._sampleDataDownloaded;\n    }\n\n    get sampleData(): string {\n        return this._sampleData;\n    }\n}\n\nexport class SampleCatalogue {\n    private _entries: CatalogueEntry[] = [];\n    private _isDownloaded: boolean = false;\n    private _url: string;\n\n    private downloaded() {\n        this._isDownloaded = true;\n\n        if (this.onDownloaded) {\n            this.onDownloaded(this);\n        }\n    }\n\n    private parse(input: any) {\n        let entries: any[] = null;\n\n        if (Array.isArray(input)) {\n            entries = input;\n        }\n        else {\n            entries = Array.isArray(input[\"entries\"]) ? input[\"entries\"] : null;\n        }\n\n        this._entries = [];\n\n        if (entries != null) {\n            for (let entry of entries) {\n                if (typeof entry === \"object\") {\n                    let displayName = Adaptive.parseString(entry[\"displayName\"]);\n                    let cardPayloadUrl = Adaptive.parseString(entry[\"cardPayloadUrl\"]);\n\n                    if (displayName && cardPayloadUrl) {\n                        this._entries.push(\n                            new CatalogueEntry(\n                                displayName,\n                                cardPayloadUrl,\n                                Adaptive.parseString(entry[\"dataSampleUrl\"])));\n                    }\n                }\n            }\n        }\n    }\n\n    onDownloaded: (sender: SampleCatalogue) => void;\n\n    constructor(url: string = \"./sample-catalogue.json\") {\n        this.url = url;\n    }\n\n    download() {\n        if (!this.isDownloaded) {\n            let downloader = new Downloader(this.url);\n            downloader.onError = () => {\n                if (this._entries.length === 0) {\n                    this._entries = [];\n                }\n                \n                this.downloaded();\n            };\n            downloader.onSuccess = () => {\n                if (downloader.data) {\n                    try {\n                        this.parse(JSON.parse(downloader.data));\n                    }\n                    catch (e) {\n                        // Swallow the error\n                    }\n                }\n\n                this.downloaded();\n            };\n            downloader.download();\n        }\n        else {\n            this.downloaded();\n        }\n    }\n\n    get isDownloaded(): boolean {\n        return this._isDownloaded;\n    }\n\n    get entries(): CatalogueEntry[] {\n        return this._entries;\n    }\n\n    get url(): string {\n        return this._url;\n    }\n\n    set url(value: string) {\n        if (value !== this._url) {\n            this._url = value;\n\n            this._isDownloaded = false;\n        }\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nexport const otherTestPayload: string = `{\n\t\"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n\t\"type\": \"AdaptiveCard\",\n\t\"version\": \"1.0\",\n\t\"body\": [\n\t\t{\n\t\t\t\"type\": \"ActionSet\",\n\t\t\t\"actions\": [\n\t\t\t\t{\n\t\t\t\t\t\"type\": \"Action.ShowCard\",\n\t\t\t\t\t\"title\": \"Set due date\",\n\t\t\t\t\t\"card\": {\n\t\t\t\t\t\t\"type\": \"AdaptiveCard\",\n\t\t\t\t\t\t\"body\": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\": \"Input.Date\",\n\t\t\t\t\t\t\t\t\"id\": \"dueDate\",\n\t\t\t\t\t\t\t\t\"title\": \"Select due date\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\": \"Input.Text\",\n\t\t\t\t\t\t\t\t\"id\": \"comment\",\n\t\t\t\t\t\t\t\t\"isMultiline\": true,\n\t\t\t\t\t\t\t\t\"placeholder\": \"Add a comment\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"actions\": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\": \"Action.OpenUrl\",\n\t\t\t\t\t\t\t\t\"title\": \"OK\",\n\t\t\t\t\t\t\t\t\"url\": \"https://adaptivecards.io\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"type\": \"Action.OpenUrl\",\n\t\t\t\t\t\"title\": \"View\",\n\t\t\t\t\t\"url\": \"https://adaptivecards.io\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]\n}`;\n\nexport const defaultPayload: string = `{\n    \"type\": \"AdaptiveCard\",\n    \"body\": [\n        {\n            \"type\": \"TextBlock\",\n            \"size\": \"Medium\",\n            \"weight\": \"Bolder\",\n            \"text\": \"Publish Adaptive Card schema\"\n        },\n        {\n            \"type\": \"ColumnSet\",\n            \"columns\": [\n                {\n                    \"type\": \"Column\",\n                    \"items\": [\n                        {\n                            \"type\": \"Image\",\n                            \"style\": \"Person\",\n                            \"url\": \"https://matthidinger.com/images/bio-photo.jpg\",\n                            \"size\": \"Small\"\n                        }\n                    ],\n                    \"width\": \"auto\"\n                },\n                {\n                    \"type\": \"Column\",\n                    \"items\": [\n                        {\n                            \"type\": \"TextBlock\",\n                            \"weight\": \"Bolder\",\n                            \"text\": \"Matt Hidinger\",\n                            \"wrap\": true\n                        },\n                        {\n                            \"type\": \"TextBlock\",\n                            \"spacing\": \"None\",\n                            \"text\": \"Created {{DATE(2017-02-14T06:08:39Z,SHORT)}}\",\n                            \"isSubtle\": true,\n                            \"wrap\": true\n                        }\n                    ],\n                    \"width\": \"stretch\"\n                }\n            ]\n        },\n        {\n            \"type\": \"TextBlock\",\n            \"text\": \"Now that we have defined the main rules and features of the format, we need to produce a schema and publish it to GitHub. The schema will be the starting point of our reference documentation.\",\n            \"wrap\": true\n        },\n        {\n            \"type\": \"FactSet\",\n            \"facts\": [\n                {\n                    \"title\": \"Board:\",\n                    \"value\": \"Adaptive Card\"\n                },\n                {\n                    \"title\": \"List:\",\n                    \"value\": \"Backlog\"\n                },\n                {\n                    \"title\": \"Assigned to:\",\n                    \"value\": \"Matt Hidinger\"\n                },\n                {\n                    \"title\": \"Due date:\",\n                    \"value\": \"Not set\"\n                }\n            ]\n        }\n    ],\n    \"actions\": [\n        {\n            \"type\": \"Action.ShowCard\",\n            \"title\": \"Set due date\",\n            \"card\": {\n                \"type\": \"AdaptiveCard\",\n                \"body\": [\n                    {\n                        \"type\": \"Input.Date\",\n                        \"id\": \"dueDate\"\n                    },\n                    {\n                        \"type\": \"Input.Text\",\n                        \"id\": \"comment\",\n                        \"placeholder\": \"Add a comment\",\n                        \"isMultiline\": true\n                    }\n                ],\n                \"actions\": [\n                    {\n                        \"type\": \"Action.OpenUrl\",\n                        \"title\": \"OK\",\n                        \"url\": \"http://adaptivecards.io\"\n                    }\n                ],\n                \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\"\n            }\n        },\n        {\n            \"type\": \"Action.OpenUrl\",\n            \"title\": \"View\",\n            \"url\": \"http://adaptivecards.io\"\n        }\n    ],\n    \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n    \"version\": \"1.0\"\n}`;\n\nexport const defaultTemplatePayload: string = `{\n    \"type\": \"AdaptiveCard\",\n    \"body\": [\n        {\n            \"type\": \"Container\",\n            \"items\": [\n                {\n                    \"type\": \"TextBlock\",\n                    \"text\": \"This example uses [Adaptive Card Templating](https://docs.microsoft.com/en-us/adaptive-cards/templating/) *(Preview)*\",\n                    \"size\": \"Medium\",\n                    \"wrap\": true\n                },\n                {\n                    \"type\": \"TextBlock\",\n                    \"text\": \"Click the **Preview mode** toolbar button to see the card bound to the **Sample Data** in the lower-right. Sample Data helps design your card by simulating the real data.\",\n                    \"wrap\": true\n                },\n                {\n                    \"type\": \"TextBlock\",\n                    \"text\": \"When you're ready to populate it with real data, use the Adaptive Card [templating SDKs](https://docs.microsoft.com/en-us/adaptive-cards/templating/sdk).\",\n                    \"wrap\": true\n                }\n            ],\n            \"style\": \"good\",\n            \"bleed\": true\n        },\n        {\n            \"type\": \"TextBlock\",\n            \"size\": \"Medium\",\n            \"weight\": \"Bolder\",\n            \"text\": \"{title}\"\n        },\n        {\n            \"type\": \"ColumnSet\",\n            \"columns\": [\n                {\n                    \"type\": \"Column\",\n                    \"items\": [\n                        {\n                            \"type\": \"Image\",\n                            \"style\": \"Person\",\n                            \"url\": \"{creator.profileImage}\",\n                            \"size\": \"Small\"\n                        }\n                    ],\n                    \"width\": \"auto\"\n                },\n                {\n                    \"type\": \"Column\",\n                    \"items\": [\n                        {\n                            \"type\": \"TextBlock\",\n                            \"weight\": \"Bolder\",\n                            \"text\": \"{creator.name}\",\n                            \"wrap\": true\n                        },\n                        {\n                            \"type\": \"TextBlock\",\n                            \"spacing\": \"None\",\n                            \"text\": \"Created {{DATE({createdUtc},SHORT)}}\",\n                            \"isSubtle\": true,\n                            \"wrap\": true\n                        }\n                    ],\n                    \"width\": \"stretch\"\n                }\n            ]\n        },\n        {\n            \"type\": \"TextBlock\",\n            \"text\": \"{description}\",\n            \"wrap\": true\n        },\n        {\n            \"type\": \"FactSet\",\n            \"facts\": [\n                {\n                    \"$data\": \"{properties}\",\n                    \"title\": \"{key}:\",\n                    \"value\": \"{value}\"\n                }\n            ]\n        }\n    ],\n    \"actions\": [\n        {\n            \"type\": \"Action.ShowCard\",\n            \"title\": \"Set due date\",\n            \"card\": {\n                \"type\": \"AdaptiveCard\",\n                \"body\": [\n                    {\n                        \"type\": \"Input.Date\",\n                        \"id\": \"dueDate\"\n                    },\n                    {\n                        \"type\": \"Input.Text\",\n                        \"id\": \"comment\",\n                        \"placeholder\": \"Add a comment\",\n                        \"isMultiline\": true\n                    }\n                ],\n                \"actions\": [\n                    {\n                        \"type\": \"Action.Submit\",\n                        \"title\": \"OK\"\n                    }\n                ],\n                \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\"\n            }\n        },\n        {\n            \"type\": \"Action.OpenUrl\",\n            \"title\": \"View\",\n            \"url\": \"{viewUrl}\"\n        }\n    ],\n    \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n    \"version\": \"1.0\"\n}`;\n\nexport const defaultDataPayload: string = `{\n    \"title\": \"Publish Adaptive Card Schema\",\n    \"description\": \"Now that we have defined the main rules and features of the format, we need to produce a schema and publish it to GitHub. The schema will be the starting point of our reference documentation.\",\n    \"creator\": {\n        \"name\": \"Matt Hidinger\",\n        \"profileImage\": \"https://matthidinger.com/images/bio-photo.jpg\"\n    },\n    \"createdUtc\": \"2017-02-14T06:08:39Z\",\n    \"viewUrl\": \"https://adaptivecards.io\",\n    \"properties\": [\n        { \"key\": \"Board\", \"value\": \"Adaptive Cards\" },\n        { \"key\": \"List\", \"value\": \"Backlog\" },\n        { \"key\": \"Assigned to\", \"value\": \"Matt Hidinger\" },\n        { \"key\": \"Due date\", \"value\": \"Not set\" }\n    ]\n}`","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport { HostContainer } from \"../host-container\";\n\nexport class DefaultContainer extends HostContainer {\n    public renderTo(hostElement: HTMLElement) {\n        hostElement.classList.add(\"card-frame\");\n        hostElement.appendChild(this.cardHost);\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport { GlobalSettings, GlobalRegistry, CardObjectRegistry, CardElement, Action, HostConfig, SerializationContext, Version, Versions } from \"adaptivecards\";\nimport * as hostConfig from \"../hostConfigs/sample.json\";\n\nexport abstract class HostContainer {\n    private _cardHost: HTMLElement;\n    private _elementsRegistry = new CardObjectRegistry<CardElement>();\n    private _actionsRegistry = new CardObjectRegistry<Action>();\n\n    readonly name: string;\n    readonly styleSheet: string;\n\n    constructor(name: string, styleSheet: string) {\n        this.name = name;\n        this.styleSheet = styleSheet;\n\n        this._cardHost = document.createElement(\"div\");\n        this._cardHost.className = \"cardHost\";\n\n        GlobalRegistry.populateWithDefaultElements(this._elementsRegistry);\n        GlobalRegistry.populateWithDefaultActions(this._actionsRegistry);\n    }\n\n    abstract renderTo(hostElement: HTMLElement);\n\n    public initialize() {\n        GlobalSettings.useMarkdownInRadioButtonAndCheckbox = true;\n        GlobalSettings.useAdvancedCardBottomTruncation = false;\n        GlobalSettings.useAdvancedTextBlockTruncation = true;\n    }\n\n    public createSerializationContext(targetVersion: Version): SerializationContext {\n        let context = new SerializationContext(targetVersion);\n        context.setElementRegistry(this.elementsRegistry);\n        context.setActionRegistry(this.actionsRegistry);\n\n        return context;\n    }\n\n    public getBackgroundColor(): string {\n        return \"#F6F6F6\";\n    }\n\n    public parseElement(element: CardElement, source: any, context: SerializationContext) {\n        // Do nothing in base implementation\n    }\n\n    public anchorClicked(element: CardElement, anchor: HTMLAnchorElement): boolean {\n        // Not handled by the host container by default\n        return false;\n    }\n\n    public getHostConfig(): HostConfig {\n        return new HostConfig(hostConfig);\n    }\n\n    supportsActionBar: boolean = false;\n\n    get cardHost(): HTMLElement {\n        return this._cardHost;\n    }\n\n    get isFixedHeight(): boolean {\n        return false;\n    }\n\n    get elementsRegistry(): CardObjectRegistry<CardElement> {\n        return this._elementsRegistry;\n    }\n\n    get actionsRegistry(): CardObjectRegistry<Action> {\n        return this._actionsRegistry;\n    }\n\n    get targetVersion(): Version {\n        return Versions.v1_0;\n    }\n}\n","import { BaseTreeItem } from \"./base-tree-item\";\nimport * as Data from \"./data\";\n\nexport class DataTreeItem extends BaseTreeItem {\n    private _children: Array<DataTreeItem> = null;\n\n    private buildChildList() {\n        if (!this._children) {\n            this._children = [];\n\n            let properties = this.field.children;\n\n            if (properties) {\n                let keys = Object.keys(properties);\n\n                for (let key of keys) {\n                    this._children.push(new DataTreeItem(properties[key]));\n                }\n            }\n        }\n    }\n\n    protected getLabelText(): string {\n        return this.field.displayName;\n    }\n\n    protected getAdditionalText(): string {\n        return this.field.valueType;\n    }\n\n    protected getAdditionalTextClass(): string {\n        return \"acd-data-tree-item-additionalText\";\n    }\n\n    readonly field: Data.FieldDefinition;\n\n    constructor(field: Data.FieldDefinition) {\n        super();\n\n        this.field = field;\n\n        this._level = 0;\n\n        let currentField = field;\n\n        while (currentField) {\n            this._level++;\n\n            currentField = currentField.parent;\n        }\n    }\n\n    isDraggable(): boolean {\n        return false;\n    }\n\n    getChildCount(): number {\n        this.buildChildList();\n\n        return this._children.length;\n    }\n\n    getChildAt(index: number): DataTreeItem {\n        this.buildChildList();\n\n        return this._children[index];\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nfunction shouldUseIndexerSyntax(name: string): boolean {\n    let regEx = /[a-zA-Z0-9_$]*/;\n    let matches = regEx.exec(name);\n\n    // If name doesn't only contain letters/digits/_\n    // the accessor must use the indexer syntax\n    return !(matches && matches[0] === name);\n}   \n\nexport type ValueType = \"String\" | \"Boolean\" | \"Number\" | \"Array\" | \"Object\";\n\nexport interface IStringData {\n    valueType: \"String\"\n    sampleValue?: string;\n}\n\nexport interface INumberData {\n    valueType: \"Number\"\n    sampleValue?: number;\n}\n\nexport interface IBooleanData {\n    valueType: \"Boolean\"\n    sampleValue?: boolean;\n}\n\nexport interface IArrayData {\n    valueType: \"Array\";\n    itemType: IData;\n}\n\nexport interface IObjectData {\n    valueType: \"Object\";\n    fields: IField[];\n}\n\nexport type IData = IStringData | IBooleanData | INumberData | IArrayData | IObjectData;\n\nexport interface IDataField {\n    name: string;\n    displayName: string;\n}\n\nexport interface IStringField extends IDataField, IStringData { }\nexport interface INumberField extends IDataField, INumberData { }\nexport interface IBooleanField extends IDataField, IBooleanData { }\nexport interface IObjectField extends IDataField, IObjectData { }\nexport interface IArrayField extends IDataField, IArrayData { }\n\nexport type IField = IStringField | INumberField | IBooleanField | IObjectField | IArrayField;\n\nexport abstract class DataType {\n    static parse(parent: FieldDefinition, data: IData): DataType {\n        switch (data.valueType) {\n            case \"String\":\n                return new ValueTypeData<string>(parent, \"Sample data\", data.sampleValue);\n            case \"Number\":\n                return new ValueTypeData<number>(parent, 123, data.sampleValue);\n            case \"Boolean\":\n                return new ValueTypeData<boolean>(parent, true, data.sampleValue);\n            case \"Array\":\n                return ArrayData.parse(parent, data);\n            case \"Object\":\n                return ObjectData.parse(parent, data);\n        }\n    }\n\n    static deriveFrom(parent: FieldDefinition, value: any): DataType {\n        if (typeof value === \"string\") {\n            return new ValueTypeData<string>(parent, \"Sample data\", value);\n        }\n        else if (typeof value === \"boolean\") {\n            return new ValueTypeData<boolean>(parent, true, value);\n        }\n        else if (typeof value === \"number\") {\n            return new ValueTypeData<number>(parent, 123, value);\n        }\n        else if (typeof value === \"object\") {\n            if (Array.isArray(value)) {\n                return ArrayData.deriveFrom(parent, value);\n            }\n            else {\n                return ObjectData.deriveFrom(parent, value);\n            }\n        }\n        else {\n            throw new Error(\"Unsupported data type: \" + typeof value);\n        }\n    }\n\n    constructor(readonly owner: FieldDefinition) {}\n\n    abstract generateSampleData(): any;\n\n    getChildFields(): FieldDefinition[] {\n        return null;\n    }\n\n    qualifyFieldName(fieldName: string, fieldIsLeaf: boolean) {\n        return fieldName;\n    }\n\n    abstract get valueType(): ValueType;\n\n    get isCollection(): boolean {\n        return false;\n    }\n}\n\nexport class ValueTypeData<T extends string | number | boolean> extends DataType {\n    private _sampleValue: T;\n\n    constructor(\n        readonly owner: FieldDefinition,\n        readonly defaultSampleValue: T,\n        sampleValue?: T) {\n        super(owner);\n\n        this._sampleValue = sampleValue;\n    }\n\n    generateSampleData(): T {\n        return this.sampleValue ? this.sampleValue : this.defaultSampleValue;\n    }\n\n    get sampleValue() {\n        return this._sampleValue;\n    }\n\n    get valueType(): ValueType {\n        switch (typeof this.defaultSampleValue) {\n            case \"string\":\n                return \"String\";\n            case \"number\":\n                return \"Number\";\n            case \"boolean\":\n                return \"Boolean\";\n        }\n    }\n}\n\nexport class ArrayData extends DataType {\n    static parse(parent: FieldDefinition, data: IArrayData): ArrayData {\n        let result = new ArrayData(parent);\n        result.dataType = DataType.parse(parent, data.itemType);\n\n        return result;\n    }\n\n    static deriveFrom(parent: FieldDefinition, input: object): ArrayData {\n        if (!Array.isArray(input)) {\n            throw new Error(\"Input is not an array.\");\n        }\n\n        let result = new ArrayData(parent);\n\n        if (input.length > 0) {\n            result.dataType = DataType.deriveFrom(parent, input[0]);\n        }\n\n        return result;\n    }\n\n    dataType: DataType = undefined;\n\n    constructor(readonly owner: FieldDefinition) {\n        super(owner);\n    }\n\n    generateSampleData(): any {\n        let result = [];\n\n        if (this.dataType) {\n            for (let i = 1; i <= 3; i++) {\n                result.push(this.dataType.generateSampleData());\n            }\n        }\n\n        return result;\n    }\n\n    getChildFields(): FieldDefinition[] {\n        return this.dataType ? this.dataType.getChildFields() : [];\n    }\n\n    qualifyFieldName(fieldName: string, fieldIsLeaf: boolean) {\n        if (!fieldIsLeaf) {\n            return fieldName + \"[0]\";\n        }\n        else {\n            return super.qualifyFieldName(fieldName, fieldIsLeaf);\n        }\n    }\n\n    get isCollection(): boolean {\n        return true;\n    }\n\n    get valueType(): ValueType {\n        return \"Array\";\n    }\n}\n\nexport class ObjectData extends DataType {\n    static parse(parent: FieldDefinition, data: IObjectData): ObjectData {\n        let result = new ObjectData(parent);\n\n        for (let field of data.fields) {\n            let fieldDefinition = new FieldDefinition(parent);\n            fieldDefinition.name = field.name;\n            fieldDefinition.displayName = field.displayName;\n            fieldDefinition.dataType = DataType.parse(fieldDefinition, <IData>field);\n\n            result.fields.push(fieldDefinition);\n        }\n\n        return result;\n    }\n\n    static deriveFrom(parent: FieldDefinition, input: object): ObjectData {\n        let result = new ObjectData(parent);\n\n        if (input !== null) {\n            for (let key of Object.keys(input)) {\n                let field = new FieldDefinition(parent);\n                field.dataType =  DataType.deriveFrom(field, input[key]);\n                field.name = key;\n\n                result.fields.push(field);\n            }\n        }\n\n        return result;\n    }\n\n    readonly fields: FieldDefinition[] = [];\n\n    constructor(readonly owner: FieldDefinition) {\n        super(owner);\n    }\n\n    generateSampleData(): any {\n        let result = {};\n\n        for (let field of this.fields) {\n            result[field.name] = field.dataType.generateSampleData();\n        }\n\n        return result;\n    }\n\n    getChildFields(): FieldDefinition[] {\n        return this.fields;\n    }\n\n    get valueType(): ValueType {\n        return \"Object\";\n    }\n}\n\nexport class FieldDefinition {\n    static parse(data: IData): FieldDefinition {\n        let field = new FieldDefinition(null);\n        field.name = \"$root\";\n        field.dataType = DataType.parse(field, data);\n\n        return field;\n    }\n\n    static deriveFrom(input: any): FieldDefinition {\n        let field = new FieldDefinition(null);\n        field.name = \"$root\";\n        field.dataType = DataType.deriveFrom(field, input);\n\n        return field;\n    }\n\n    private _displayName: string;\n\n    name: string;\n    dataType: DataType;\n\n    constructor(readonly parent: FieldDefinition) {}\n\n    asExpression(): string {\n        return \"${\" + this.getPath() + \"}\";\n    }\n\n    getPath(asLeaf: boolean = true): string {\n        let currentField: FieldDefinition = this;\n        let path: FieldDefinition[] = [];\n\n        while (currentField) {\n            path.push(currentField);\n\n            currentField = currentField.parent;\n        }\n\n        let result = \"\";\n        let forceIndexerSyntax: boolean = false;\n\n        for (let i = path.length - 1; i >= 0; i--) {\n            let qualifiedName = path[i].qualifiedName(false)\n\n            if (shouldUseIndexerSyntax(qualifiedName) || forceIndexerSyntax) {\n                qualifiedName = \"['\" + qualifiedName + \"']\";\n\n                forceIndexerSyntax = true;\n            }\n            else {\n                if (result) {\n                    result += \".\";\n                }\n            }\n\n            result += qualifiedName;\n        }\n\n        return result;\n    }\n\n    qualifiedName(asLeaf: boolean): string {\n        return this.dataType.qualifyFieldName(this.name, asLeaf);\n    }\n\n    get displayName(): string {\n        return this._displayName ? this._displayName : this.name;\n    }\n\n    set displayName(value: string) {\n        this._displayName = value;\n    }\n\n    get children(): FieldDefinition[] {\n        return this.dataType.getChildFields();\n    }\n\n    get isCollection(): boolean {\n        return this.dataType.isCollection;\n    }\n\n    get valueType(): string {\n        return this.dataType.valueType;\n    }\n}\n","// Copyright (C) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport { BaseTreeItem } from \"./base-tree-item\";\nimport { DesignerPeer } from \"./designer-peers\";\n\nexport class DesignerPeerTreeItem extends BaseTreeItem {\n    private computeLevel() {\n        this._level = 0;\n\n        let peer = this.owner;\n\n        while (peer) {\n            this._level++;\n\n            peer = peer.parent;\n        }\n\n        for (let i = 0; i < this.getChildCount(); i++) {\n            (this.getChildAt(i) as DesignerPeerTreeItem).computeLevel();\n        }\n    }\n\n    protected getIconClass(): string {\n        return this.owner.registration.iconClass;\n    }\n\n    protected getLabelText(): string {\n        return this.owner.getCardObject().getJsonTypeName();\n    }\n\n    protected getAdditionalText(): string {\n        return this.owner.getTreeItemText();\n    }\n\n    protected selectedChanged(scrollIntoView: boolean) {\n        super.selectedChanged(scrollIntoView);\n\n        this.owner.isSelected = this.isSelected;\n    }\n\n    readonly owner: DesignerPeer;\n\n    constructor(owner: DesignerPeer, isExpanded: boolean = true) {\n        super(isExpanded);\n\n        this.owner = owner;\n        this.owner.onParentChanged = (sender: DesignerPeer) => {\n            this.computeLevel();\n        }\n\n        this.computeLevel();\n    }\n\n    getChildCount(): number {\n        return this.owner.getChildCount();\n    }\n\n    getChildAt(index: number): BaseTreeItem {\n        return this.owner.getChildAt(index).treeItem;\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as Adaptive  from \"adaptivecards\";\nimport * as Controls  from \"adaptivecards-controls\";\nimport { DraggableElement } from \"./draggable-element\";\nimport { PeerCommand } from \"./peer-command\";\nimport { CardDesignerSurface, DesignContext } from \"./card-designer-surface\";\nimport { DesignerPeerTreeItem } from \"./designer-peer-treeitem\";\nimport { Rect, IPoint, Utils } from \"./miscellaneous\";\nimport { GlobalSettings } from \"./shared\";\nimport { FieldPicker } from \"./field-picker\";\nimport { Strings } from \"./strings\";\n\nexport abstract class DesignerPeerInplaceEditor {\n    onClose: (applyChanges: boolean) => void;\n\n    abstract initialize();\n    abstract applyChanges();\n    abstract render(): HTMLElement;\n}\n\nexport abstract class CardElementPeerInplaceEditor<TCardElement extends Adaptive.CardElement> extends DesignerPeerInplaceEditor {\n    readonly cardElement: TCardElement;\n\n    constructor(cardElement: TCardElement) {\n        super();\n\n        this.cardElement = cardElement;\n    }\n}\n\nexport class DesignerPeerRegistrationBase {\n    private _iconClass?: string;\n\n    readonly category: string;\n\n    constructor(category: string, iconClass?: string) {\n        this.category = category;\n        this._iconClass = iconClass;\n    }\n\n    get iconClass(): string {\n        return this._iconClass ? this._iconClass : \"acd-icon-defaultElementIcon\";\n    }\n}\n\nexport class DesignerPeerRegistration<TSource, TPeer> extends DesignerPeerRegistrationBase{\n    readonly sourceType: TSource;\n\n    peerType: TPeer;\n\n    constructor(sourceType: TSource, peerType: TPeer, category: string, iconClass: string = null) {\n        super(category, iconClass);\n\n        this.sourceType = sourceType;\n        this.peerType = peerType;\n    }\n}\n\nexport class PropertySheetCategory {\n    static readonly DefaultCategory = \"__defaultCategory\";\n    static readonly LayoutCategory = \"Layout\";\n    static readonly StyleCategory = \"Style\";\n    static readonly SelectionAction = \"Selection action\";\n    static readonly InlineAction = \"Inline action\";\n    static readonly Validation = \"Validation\";\n    static readonly Refresh = \"Refresh\"\n\n    private _entries: PropertySheetEntry[] = [];\n\n    constructor(readonly name: string) { }\n\n    render(container: Adaptive.Container, context: PropertySheetContext, displayCategoryName: boolean) {\n        let entriesToRender: PropertySheetEntry[] = [];\n\n        for (let entry of this._entries) {\n            if (Adaptive.isVersionLessOrEqual(entry.targetVersion, context.designContext.targetVersion)) {\n                entriesToRender.push(entry);\n            }\n        }\n\n        if (entriesToRender.length > 0) {\n            if (displayCategoryName) {\n                let header = new Adaptive.TextBlock();\n                header.separator = true;\n                header.text = \"**\" + (this.name === PropertySheetCategory.DefaultCategory ? context.peer.getCardObject().getJsonTypeName() : this.name) + \"**\";\n\n                container.addItem(header);\n            }\n\n            for (let entry of entriesToRender) {\n                if (Adaptive.isVersionLessOrEqual(entry.targetVersion, context.designContext.targetVersion)) {\n                    container.addItem(entry.render(context));\n                }\n            }\n        }\n    }\n\n    add(...entries: PropertySheetEntry[]) {\n        this._entries = this._entries.concat(entries);\n    }\n\n    remove(...entries: PropertySheetEntry[]) {\n        for (let entry of entries) {\n            let index: number;\n\n            do {\n                let index = this._entries.indexOf(entry);\n\n                if (index >= 0) {\n                    this._entries.splice(index, 1);\n                }\n            } while (index >= 0);\n        }\n    }\n\n    getEntryAt(index: number): PropertySheetEntry {\n        return this._entries[index];\n    }\n\n    get length(): number {\n        return this._entries.length;\n    }\n}\n\nexport class PropertySheet {\n    private _categories: { [key: string]: PropertySheetCategory } = {};\n\n    constructor(readonly displayCategoryNames: boolean = true) {\n        this._categories[PropertySheetCategory.DefaultCategory] = new PropertySheetCategory(PropertySheetCategory.DefaultCategory);\n        this._categories[PropertySheetCategory.LayoutCategory] = new PropertySheetCategory(PropertySheetCategory.LayoutCategory);\n        this._categories[PropertySheetCategory.StyleCategory] = new PropertySheetCategory(PropertySheetCategory.StyleCategory);\n    }\n\n    add(categoryName: string, ...entries: PropertySheetEntry[]) {\n        let category = this._categories[categoryName];\n\n        if (!category) {\n            category = new PropertySheetCategory(categoryName);\n\n            this._categories[categoryName] = category;\n        }\n\n        category.add(...entries);\n    }\n\n    addActionProperties(\n        targetVersion: Adaptive.Version,\n        peer: DesignerPeer,\n        action: Adaptive.Action,\n        category: string,\n        excludeProperties: PropertySheetEntry[] = [ ActionPeer.iconUrlProperty, ActionPeer.styleProperty, ActionPeer.modeProperty ]) {\n        let actionPeer = CardDesignerSurface.actionPeerRegistry.createPeerInstance(peer.designerSurface, null, action);\n        actionPeer.onChanged = (sender: DesignerPeer, updatePropertySheet: boolean) => { peer.changed(updatePropertySheet); };\n\n        let subPropertySheet = new PropertySheet(false);\n        actionPeer.populatePropertySheet(subPropertySheet, category);\n\n        if (excludeProperties.length > 0) {\n            subPropertySheet.remove(...excludeProperties);\n        }\n\n        this.add(\n            category,\n            new SubPropertySheetEntry(targetVersion, action, subPropertySheet));\n    }\n\n    remove(...entries: PropertySheetEntry[]) {\n        for (let categoryName of Object.keys(this._categories)) {\n            this._categories[categoryName].remove(...entries);\n        }\n    }\n\n    render(container: Adaptive.Container, context: PropertySheetContext) {\n        for (let categoryName of Object.keys(this._categories)) {\n            this._categories[categoryName].render(container, context, this.displayCategoryNames);\n        }\n    }\n}\n\nexport class PropertySheetContext {\n    private _target: object = undefined;\n\n    constructor(\n        readonly designContext: DesignContext,\n        readonly peer: DesignerPeer,\n        target: object = undefined) {\n        this._target = target;\n    }\n\n    get target(): object {\n        return this._target != undefined ? this._target : this.peer.getCardObject();\n    }\n}\n\nexport abstract class PropertySheetEntry {\n    abstract render(context: PropertySheetContext): Adaptive.CardElement;\n\n    constructor(readonly targetVersion: Adaptive.TargetVersion) { }\n}\n\nexport class SubPropertySheetEntry {\n    render(context: PropertySheetContext): Adaptive.CardElement {\n        let container = new Adaptive.Container();\n        container.spacing = Adaptive.Spacing.Small;\n\n        this.propertySheet.render(container, new PropertySheetContext(\n            context.designContext,\n            context.peer,\n            this.target));\n\n        return container;\n    }\n\n    constructor(readonly targetVersion: Adaptive.TargetVersion, readonly target: object, readonly propertySheet: PropertySheet) { }\n}\n\nexport class CustomPropertySheetEntry extends PropertySheetEntry {\n    render(context: PropertySheetContext): Adaptive.CardElement {\n        if (this.onRender) {\n            return this.onRender(context);\n        }\n    }\n\n    constructor(readonly targetVersion: Adaptive.TargetVersion, readonly onRender: (context: PropertySheetContext) => Adaptive.CardElement) {\n        super(targetVersion);\n    }\n}\n\nexport interface IPropertySheetEditorCommand {\n    id?: string;\n    caption: string;\n    altText?: string;\n    expanded?: boolean;\n    onExecute: (sender: SingleInputPropertyEditor, clickedElement: HTMLElement) => void;\n}\n\nexport abstract class SingleInputPropertyEditor extends PropertySheetEntry {\n    protected abstract createInput(context: PropertySheetContext): Adaptive.Input;\n\n    protected getPropertyValue(context: PropertySheetContext): any {\n        return context.target[this.propertyName];\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        context.target[this.propertyName] = value;\n    }\n\n    protected getAdditionalCommands(context: PropertySheetContext): IPropertySheetEditorCommand[] {\n        return [];\n    }\n\n    render(context: PropertySheetContext): Adaptive.CardElement {\n        let leftColumn = new Adaptive.Column();\n        leftColumn.width = new Adaptive.SizeAndUnit(100, Adaptive.SizeUnit.Pixel);\n        leftColumn.verticalContentAlignment = Adaptive.VerticalAlignment.Center;\n\n        let rightColumn = new Adaptive.Column();\n        rightColumn.width = \"stretch\";\n        rightColumn.verticalContentAlignment = Adaptive.VerticalAlignment.Center;\n\n        let columnSet = new Adaptive.ColumnSet();\n\n        columnSet.spacing = Adaptive.Spacing.Small;\n\n        columnSet.addColumn(leftColumn);\n        columnSet.addColumn(rightColumn);\n\n        let label = new Adaptive.TextBlock();\n        label.horizontalAlignment = Adaptive.HorizontalAlignment.Right;\n        label.wrap = true;\n        label.text = this.label;\n        label.id = Adaptive.generateUniqueId();\n\n        let input = this.createInput(context);\n        input.labelledBy = label.id;\n\n        input.onValueChanged = () => {\n            this.setPropertyValue(context, input.value);\n\n            context.peer.changed(this.causesPropertySheetRefresh);\n        }\n\n        leftColumn.addItem(label);\n        rightColumn.addItem(input);\n\n        let additionalCommands = this.getAdditionalCommands(context);\n\n        if (additionalCommands && additionalCommands.length > 0) {\n            let commandColumn = new Adaptive.Column();\n            commandColumn.width = \"auto\";\n            commandColumn.spacing = Adaptive.Spacing.Small;\n            commandColumn.verticalContentAlignment = Adaptive.VerticalAlignment.Center;\n\n            let actionSet = new Adaptive.ActionSet();\n\n            for (let command of additionalCommands) {\n                let action = new Adaptive.SubmitAction();\n                action.id = command.id;\n                action.title = command.caption;\n                action.tooltip = command.altText;\n\n                if (command.expanded) {\n                    action.state = Adaptive.ActionButtonState.Expanded;\n                }\n                \n                action.onExecute = (sender: Adaptive.Action) => { command.onExecute(this, sender.renderedElement); };\n\n                actionSet.addAction(action);\n            }\n\n            commandColumn.addItem(actionSet);\n            columnSet.addColumn(commandColumn);\n        }\n\n        return columnSet;\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly label: string,\n        readonly causesPropertySheetRefresh: boolean = false) {\n        super(targetVersion);\n    }\n}\n\nexport class BaseStringPropertyEditor extends SingleInputPropertyEditor {\n    protected placeHolder: string = \"(not set)\";\n\n    protected createInput(context: PropertySheetContext): Adaptive.Input {\n        let input = new Adaptive.TextInput();\n        input.defaultValue = this.getPropertyValue(context);\n        input.placeholder = this.placeHolder;\n        input.isMultiline = this.isMultiline;\n\n        return input;\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly label: string,\n        readonly allowBinding: boolean = false,\n        readonly isMultiline: boolean = false,\n        readonly causesPropertySheetRefresh: boolean = false) {\n        super(targetVersion, propertyName, label, causesPropertySheetRefresh);\n    }\n}\n\nexport class StringPropertyEditor extends BaseStringPropertyEditor {\n    protected getAdditionalCommands(context: PropertySheetContext): IPropertySheetEditorCommand[] {\n        if (GlobalSettings.enableDataBindingSupport && this.allowBinding) {\n            return [\n                {\n                    id: this.propertyName + \"BindData\",\n                    caption: Strings.toolboxes.propertySheet.commands.bindData.displayText(),\n                    altText: Strings.toolboxes.propertySheet.commands.bindData.accessibleText(this.label),\n                    expanded: false,\n                    onExecute: (sender: SingleInputPropertyEditor, clickedElement: HTMLElement) => {\n                        clickedElement.setAttribute(\"aria-expanded\", \"true\");\n\n                        let fieldPicker = new FieldPicker(context.designContext.dataStructure);\n                        fieldPicker.onClose = (sender, wasCancelled) => {\n                            clickedElement.setAttribute(\"aria-expanded\", \"false\");\n                            if (!wasCancelled) {\n                                this.setPropertyValue(context, fieldPicker.selectedField.asExpression());\n                                clickedElement.focus();\n                                context.peer.changed(true);\n                            }\n                            clickedElement.focus();\n                        }\n                        fieldPicker.popup(clickedElement);\n                    }\n                }\n            ];\n        }\n        else {\n            return super.getAdditionalCommands(context);\n        }\n    }\n}\n\nexport class StringArrayPropertyEditor extends BaseStringPropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        let rawValue = context.target[this.propertyName];\n        let result: string[] = [];\n\n        if (rawValue !== undefined && Array.isArray(rawValue)) {\n            for (let item of rawValue) {\n                if (typeof item === \"string\") {\n                    result.push(item);\n                }\n            }\n        }\n\n        return result.length > 0 ? result.join(\",\") : undefined;\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        if (value !== undefined) {\n            let rawValues = value.split(\",\");\n            let result: string[] = [];\n\n            for (let rawValue of rawValues) {\n                if (rawValue) {\n                    result.push(rawValue);\n                }\n            }\n\n            context.target[this.propertyName] = result.length > 0 ? result : undefined;\n        }\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly label: string,\n        readonly allowBinding: boolean = false,\n        readonly isMultiline: boolean = false,\n        readonly causesPropertySheetRefresh: boolean = false) {\n        super(targetVersion, propertyName, label, allowBinding, isMultiline, causesPropertySheetRefresh);\n\n        this.placeHolder = \"(not set, comma-separated list)\";\n    }\n}\n\nexport class NumberPropertyEditor extends SingleInputPropertyEditor {\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        try {\n            context.target[this.propertyName] = parseFloat(value);\n        }\n        catch {\n            context.target[this.propertyName] = this.defaultValue;\n        }\n    }\n\n    protected createInput(context: PropertySheetContext): Adaptive.Input {\n        let input = new Adaptive.NumberInput();\n        input.defaultValue = this.getPropertyValue(context);\n        input.placeholder = \"(not set)\";\n\n        return input;\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly label: string,\n        readonly defaultValue: number | undefined = undefined,\n        readonly causesPropertySheetRefresh: boolean = false) {\n        super(targetVersion, propertyName, label, causesPropertySheetRefresh);\n    }\n}\n\nexport class ObjectPropertyEditor extends StringPropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        return JSON.stringify(context.target[this.propertyName]);\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        context.target[this.propertyName] = JSON.parse(value);\n    }\n}\n\nexport class CustomCardObjectPropertyEditor extends StringPropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        return context.peer.getCardObject().getCustomProperty(this.propertyName);\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        context.peer.getCardObject().setCustomProperty(this.propertyName, value);\n    }\n}\n\nexport class BooleanPropertyEditor extends SingleInputPropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        let v = context.target[this.propertyName];\n\n        return typeof v === \"boolean\" ? v.toString() : \"false\";\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        context.target[this.propertyName] = value == \"true\";\n    }\n\n    protected createInput(context: PropertySheetContext): Adaptive.Input {\n        let input = new Adaptive.ToggleInput();\n        input.defaultValue = this.getPropertyValue(context);\n\n        return input;\n    }\n}\n\nexport interface IVersionedChoice {\n    targetVersion: Adaptive.TargetVersion;\n    name: string;\n    value: string;\n}\n\nconst NotSetValue = \"@@not_set@@\";\n\nexport class ChoicePropertyEditor extends SingleInputPropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        let currentValue = context.target[this.propertyName];\n\n        return currentValue !== undefined ? currentValue.toString() : NotSetValue;\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        if (value === NotSetValue) {\n            context.target[this.propertyName] = undefined;\n        }\n        else {\n            context.target[this.propertyName] = value;\n        }\n    }\n\n    protected createInput(context: PropertySheetContext): Adaptive.Input {\n        let input = new Adaptive.ChoiceSetInput();\n        input.defaultValue = this.getPropertyValue(context);\n        input.isCompact = true;\n\n        if (this.isNullable) {\n            input.choices.push(new Adaptive.Choice(\"(not set)\", NotSetValue));\n        }\n        else {\n            input.placeholder = \"(not set)\";\n        }\n\n        for (let choice of this.choices) {\n            if (Adaptive.isVersionLessOrEqual(choice.targetVersion, context.designContext.targetVersion)) {\n                input.choices.push(new Adaptive.Choice(choice.name, choice.value));\n            }\n        }\n\n        return input;\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly label: string,\n        readonly choices: IVersionedChoice[],\n        readonly causesPropertySheetRefresh: boolean = false,\n        readonly isNullable: boolean = false) {\n        super(targetVersion, propertyName, label, causesPropertySheetRefresh);\n    }\n}\n\nexport class ContainerStylePropertyEditor extends ChoicePropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        let currentStyle = context.target[this.propertyName];\n\n        return currentStyle ? currentStyle.toString() : NotSetValue;\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        if (value == NotSetValue) {\n            context.target[this.propertyName] = undefined;\n        }\n        else {\n            context.target[this.propertyName] = value;\n        }\n    }\n\n    constructor(readonly targetVersion: Adaptive.TargetVersion,readonly propertyName: string, readonly label: string) {\n        super(\n            targetVersion,\n            propertyName,\n            label,\n            [\n                { targetVersion: Adaptive.Versions.v1_0, name: \"(not set)\", value: NotSetValue },\n                { targetVersion: Adaptive.Versions.v1_0, name: \"Default\", value: \"default\" },\n                { targetVersion: Adaptive.Versions.v1_0, name: \"Emphasis\", value: \"emphasis\" },\n                { targetVersion: Adaptive.Versions.v1_2, name: \"Accent\", value: \"accent\" },\n                { targetVersion: Adaptive.Versions.v1_2, name: \"Good\", value: \"good\" },\n                { targetVersion: Adaptive.Versions.v1_2, name: \"Attention\", value: \"attention\" },\n                { targetVersion: Adaptive.Versions.v1_2, name: \"Warning\", value: \"warning\" }\n            ]);\n    }\n}\n\nexport class NullableBooleanPropertyEditor extends ChoicePropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        let currentValue = context.target[this.propertyName];\n\n        return typeof currentValue === \"boolean\" ? currentValue.toString() : NotSetValue;\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        if (value === NotSetValue) {\n            context.target[this.propertyName] = undefined;\n        }\n        else {\n            context.target[this.propertyName] = value === \"true\";\n        }\n    }\n\n    constructor(readonly targetVersion: Adaptive.TargetVersion,readonly propertyName: string, readonly label: string) {\n        super(\n            targetVersion,\n            propertyName,\n            label,\n            [\n                { targetVersion: Adaptive.Versions.v1_0, name: \"(not set)\", value: NotSetValue },\n                { targetVersion: Adaptive.Versions.v1_0, name: \"True\", value: \"true\" },\n                { targetVersion: Adaptive.Versions.v1_0, name: \"False\", value: \"false\" }\n            ]);\n    }\n}\n\nexport class ColumnWidthPropertyEditor extends ChoicePropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        if (context.target[this.propertyName] instanceof Adaptive.SizeAndUnit) {\n            if (context.target[this.propertyName].unit == Adaptive.SizeUnit.Pixel) {\n                return \"pixels\";\n            }\n            else {\n                return \"weighted\";\n            }\n        }\n        else {\n            return context.target[this.propertyName].toString();\n        }\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        switch (value) {\n            case \"auto\":\n                context.target[this.propertyName] = \"auto\";\n                break;\n            case \"pixels\":\n                context.target[this.propertyName] = new Adaptive.SizeAndUnit(50, Adaptive.SizeUnit.Pixel);\n                break;\n            case \"weighted\":\n                context.target[this.propertyName] = new Adaptive.SizeAndUnit(50, Adaptive.SizeUnit.Weight);\n                break;\n            case \"stretch\":\n            default:\n                context.target[this.propertyName] = \"stretch\";\n                break;\n        }\n    }\n}\n\nexport class HeightPropertyEditor extends ChoicePropertyEditor {\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        let processedValue: string;\n\n        switch (value) {\n            case \"auto\":\n            case \"stretch\":\n                processedValue = value;\n                break;\n            default:\n                processedValue = \"auto\";\n                break;\n        }\n\n        context.target[this.propertyName] = processedValue;\n    }\n}\n\nexport class SizeAndUnitPropertyEditor extends NumberPropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        return (<Adaptive.SizeAndUnit>context.target[this.propertyName]).physicalSize.toString();\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        context.target[this.propertyName] = new Adaptive.SizeAndUnit(parseInt(value), this.sizeUnit);\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly label: string,\n        readonly sizeUnit: Adaptive.SizeUnit,\n        readonly defaultValue: number | undefined = undefined,\n        readonly causesPropertySheetRefresh: boolean = false) {\n        super(targetVersion, propertyName, label, defaultValue, causesPropertySheetRefresh);\n    }\n}\n\nexport class ActionPropertyEditor extends SingleInputPropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        let action = <Adaptive.Action>context.target[this.propertyName];\n\n        return action ? action.getJsonTypeName() : \"none\";\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        if (value == \"none\") {\n            context.target[this.propertyName] = undefined;\n        }\n        else {\n            context.target[this.propertyName] = context.designContext.hostContainer.actionsRegistry.createInstance(value, context.designContext.targetVersion);\n        }\n    }\n\n    protected createInput(context: PropertySheetContext): Adaptive.Input {\n        let input = new Adaptive.ChoiceSetInput();\n        input.defaultValue = this.getPropertyValue(context);\n        input.isCompact = true;\n        input.placeholder = \"(not set)\";\n        input.choices.push(new Adaptive.Choice(\"(not set)\", \"none\"));\n\n        for (let i = 0; i < context.designContext.hostContainer.actionsRegistry.getItemCount(); i++) {\n            let actionType = context.designContext.hostContainer.actionsRegistry.getItemAt(i).typeName;\n            let excludeAction = true;\n\n            if (this.forbiddenActionTypes) {\n                // If the list contains \"*\", all action types are disallowed...\n                excludeAction = this.forbiddenActionTypes.indexOf(\"*\") >= 0 || this.forbiddenActionTypes.indexOf(actionType) >= 0;\n\n                if (excludeAction) {\n                    // ...except if the list explicitly contains the type name prefixed with a \"-\" character\n                    // Example:\n                    //    [ \"*\", \"-Action.Execute\", \"-Action.Submit\" ]\n                    //    Meaning: all actions are disallowed except Action.Execute and Action.Submit\n                    excludeAction = this.forbiddenActionTypes.indexOf(\"-\" + actionType) < 0;\n                }\n            }\n\n            if (!excludeAction) {\n                let choice = new Adaptive.Choice(actionType, actionType);\n\n                input.choices.push(choice);\n            }\n        }\n\n        return input;\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly label: string,\n        readonly forbiddenActionTypes: string[] = [],\n        readonly causesPropertySheetRefresh: boolean = false) {\n        super(targetVersion, propertyName, label, causesPropertySheetRefresh);\n    }\n}\n\nexport class CompoundPropertyEditor extends PropertySheetEntry {\n    render(context: PropertySheetContext): Adaptive.CardElement {\n        let container = new Adaptive.Container();\n\n        let target = context.target[this.propertyName];\n\n        if (target === undefined && this.initializeProperty) {\n            target = this.initializeProperty();\n\n            context.target[this.propertyName] = target;\n        }\n\n        if (target) {\n            for (let entry of this.entries) {\n                if (Adaptive.isVersionLessOrEqual(entry.targetVersion, context.designContext.targetVersion)) {\n                    container.addItem(\n                        entry.render(\n                            new PropertySheetContext(\n                                context.designContext,\n                                context.peer,\n                                target)));\n                }\n            }\n        }\n\n        return container;\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly entries: PropertySheetEntry[] = [],\n        readonly initializeProperty?: () => object) {\n        super(targetVersion);\n    }\n}\n\nexport class EnumPropertyEditor extends SingleInputPropertyEditor {\n    protected getPropertyValue(context: PropertySheetContext): any {\n        let value = context.target[this.propertyName];\n\n        return value !== undefined ? value : \"-1\";\n    }\n\n    protected setPropertyValue(context: PropertySheetContext, value: string) {\n        let valueAsInt = parseInt(value, 10);\n\n        if (valueAsInt >= 0) {\n            context.target[this.propertyName] = valueAsInt;\n        }\n        else {\n            context.target[this.propertyName] = undefined;\n        }\n    }\n\n    protected createInput(context: PropertySheetContext): Adaptive.Input {\n        let input = new Adaptive.ChoiceSetInput();\n        input.isCompact = true;\n\n        let defaultValue = this.getPropertyValue(context);\n        input.defaultValue = defaultValue !== undefined ? defaultValue : \"-1\";\n\n        if (this.isNullable) {\n            input.choices.push(new Adaptive.Choice(\"(not set)\", \"-1\"));\n        }\n        else {\n            input.placeholder = \"(not set)\";\n        }\n\n        for (let key in this.enumType) {\n            let v = parseInt(key, 10);\n\n            if (!isNaN(v)) {\n                input.choices.push(new Adaptive.Choice(this.enumType[key], key));\n            }\n        }\n\n        return input;\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly propertyName: string,\n        readonly label: string,\n        readonly enumType: { [s: number]: string },\n        readonly causesPropertySheetRefresh: boolean = false,\n        readonly isNullable: boolean = false) {\n        super(targetVersion, propertyName, label, causesPropertySheetRefresh);\n    }\n}\n\ninterface INameValuePair {\n    name: string;\n    value: string;\n}\n\nclass NameValuePairPropertyEditor extends PropertySheetEntry {\n    private collectionChanged(context: PropertySheetContext, nameValuePairs: INameValuePair[], refreshPropertySheet: boolean) {\n        context.target[this.collectionPropertyName] = [];\n\n        for (let nameValuePair of nameValuePairs) {\n            let item = this.createCollectionItem(nameValuePair.name, nameValuePair.value);\n\n            context.target[this.collectionPropertyName].push(item);\n        }\n\n        context.peer.changed(refreshPropertySheet);\n    }\n\n    render(context: PropertySheetContext): Adaptive.CardElement {\n        let result = new Adaptive.Container();\n\n        let collection = context.target[this.collectionPropertyName];\n\n        if (!Array.isArray(collection)) {\n            throw new Error(\"The \" + this.collectionPropertyName + \" property on \" + context.peer.getCardObject().getJsonTypeName() + \" either doesn't exist or isn't an array.\")\n        }\n\n        let nameValuePairs: INameValuePair[] = [];\n\n        for (let pair of collection) {\n            nameValuePairs.push(\n                {\n                    name: pair[this.namePropertyName],\n                    value: pair[this.valuePropertyName]\n                }\n            )\n        }\n\n        if (nameValuePairs.length == 0) {\n            let messageTextBlock = new Adaptive.TextBlock();\n            messageTextBlock.spacing = Adaptive.Spacing.Small;\n            messageTextBlock.text = this.messageIfEmpty;\n\n            result.addItem(messageTextBlock);\n        }\n        else {\n            for (let i = 0; i < nameValuePairs.length; i++) {\n                let textInput = new Adaptive.TextInput();\n                textInput.placeholder = this.namePropertyLabel;\n                textInput.defaultValue = nameValuePairs[i].name;\n                textInput.onValueChanged = (sender) => {\n                    nameValuePairs[i].name = sender.value;\n\n                    this.collectionChanged(context, nameValuePairs, false);\n                };\n\n                let nameColumn = new Adaptive.Column(\"stretch\");\n                nameColumn.addItem(textInput);\n\n                textInput = new Adaptive.TextInput();\n                textInput.placeholder = this.valuePropertyLabel;\n                textInput.defaultValue = nameValuePairs[i].value;\n                textInput.onValueChanged = (sender) => {\n                    nameValuePairs[i].value = sender.value;\n\n                    this.collectionChanged(context, nameValuePairs, false);\n                };\n\n                let valueColumn = new Adaptive.Column(\"stretch\");\n                valueColumn.spacing = Adaptive.Spacing.Small;\n                valueColumn.addItem(textInput);\n\n                let removeAction = new Adaptive.SubmitAction();\n                removeAction.title = \"X\";\n                removeAction.tooltip = \"Remove\";\n                removeAction.onExecute = (sender) => {\n                    nameValuePairs.splice(i, 1);\n\n                    this.collectionChanged(context, nameValuePairs, true);\n                }\n\n                let actionSet = new Adaptive.ActionSet();\n                actionSet.addAction(removeAction);\n\n                let removeColumn = new Adaptive.Column(\"auto\");\n                removeColumn.spacing = Adaptive.Spacing.Small;\n                removeColumn.addItem(actionSet);\n\n                let columnSet = new Adaptive.ColumnSet();\n                columnSet.spacing = Adaptive.Spacing.Small;\n                columnSet.addColumn(nameColumn);\n                columnSet.addColumn(valueColumn);\n                columnSet.addColumn(removeColumn);\n\n                result.addItem(columnSet);\n            }\n        }\n\n        let addAction = new Adaptive.SubmitAction();\n        addAction.title = this.addButtonTitle;\n        addAction.onExecute = (sender) => {\n            nameValuePairs.push({ name: \"\", value: \"\" });\n\n            this.collectionChanged(context, nameValuePairs, true);\n        }\n\n        let actionSet = new Adaptive.ActionSet();\n        actionSet.spacing = Adaptive.Spacing.Small;\n        actionSet.addAction(addAction);\n\n        result.addItem(actionSet);\n\n        return result;\n    }\n\n    constructor(\n        readonly targetVersion: Adaptive.TargetVersion,\n        readonly collectionPropertyName: string,\n        readonly namePropertyName: string,\n        readonly valuePropertyName: string,\n        readonly createCollectionItem: (name: string, value: string) => any,\n        readonly namePropertyLabel: string = \"Name\",\n        readonly valuePropertyLabel: string = \"Value\",\n        readonly addButtonTitle: string = \"Add\",\n        readonly messageIfEmpty: string = \"This collection is empty\") {\n        super(targetVersion);\n    }\n}\n\nexport abstract class DesignerPeer extends DraggableElement {\n    static readonly idProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"id\", \"Id\");\n\n    static onPopulatePropertySheet?: (sender: DesignerPeer, propertySheet: PropertySheet) => void;\n\n    private _parent: DesignerPeer;\n    private _cardObject: Adaptive.CardObject;\n    private _children: Array<DesignerPeer> = [];\n    private _isSelected: boolean = false;\n    private _inplaceEditorOverlay: HTMLElement;\n    private _inplaceEditor: DesignerPeerInplaceEditor = null;\n\n    private closeInplaceEditor(applyChanges: boolean) {\n        if (this._inplaceEditor) {\n            if (applyChanges) {\n                this._inplaceEditor.applyChanges();\n\n                this.changed(true);\n            }\n\n            this._inplaceEditor = null;\n\n            this._inplaceEditorOverlay.parentNode.removeChild(this._inplaceEditorOverlay);\n        }\n    }\n\n    private tryOpenInplaceEditor(): boolean {\n        this._inplaceEditor = this.createInplaceEditor();\n\n        if (this._inplaceEditor) {\n            this._inplaceEditor.onClose = (applyChanges: boolean) => {\n                this.closeInplaceEditor(applyChanges);\n            }\n\n            this._inplaceEditorOverlay = document.createElement(\"div\");\n            this._inplaceEditorOverlay.tabIndex = 0;\n            this._inplaceEditorOverlay.style.zIndex = \"600\";\n            this._inplaceEditorOverlay.style.backgroundColor = \"transparent\";\n            this._inplaceEditorOverlay.style.position = \"absolute\";\n            this._inplaceEditorOverlay.style.left = \"0\";\n            this._inplaceEditorOverlay.style.top = \"0\";\n            this._inplaceEditorOverlay.style.width = document.documentElement.scrollWidth + \"px\";\n            this._inplaceEditorOverlay.style.height = document.documentElement.scrollHeight + \"px\";\n            this._inplaceEditorOverlay.onfocus = (e) => { this.closeInplaceEditor(true); };\n\n            let cardObjectBoundingRect = this.getCardObjectBoundingRect();\n            let peerBoundingRect = this.getBoundingRect();\n            let topPadding = peerBoundingRect.height - cardObjectBoundingRect.height;\n\n            let inplaceEditorHost = document.createElement(\"div\");\n            inplaceEditorHost.className = \"acd-inplace-editor-host\";\n            inplaceEditorHost.style.left = Math.floor(cardObjectBoundingRect.left + pageXOffset) + \"px\";\n            inplaceEditorHost.style.top = Math.floor(cardObjectBoundingRect.top + pageYOffset - topPadding) + \"px\";\n            inplaceEditorHost.style.width = Math.ceil(peerBoundingRect.width) + \"px\";\n            inplaceEditorHost.style.height = Math.ceil(peerBoundingRect.height) + \"px\";\n            inplaceEditorHost.style.paddingTop = topPadding + \"px\";\n\n            let renderedInplaceEditor = this._inplaceEditor.render();\n            renderedInplaceEditor.classList.add(\"acd-inplace-editor\");\n            renderedInplaceEditor.tabIndex = 0;\n            renderedInplaceEditor.onblur = (e) => { this.closeInplaceEditor(true); };\n\n            inplaceEditorHost.appendChild(renderedInplaceEditor);\n\n            this._inplaceEditorOverlay.appendChild(inplaceEditorHost);\n\n            document.body.appendChild(this._inplaceEditorOverlay);\n\n            this._inplaceEditor.initialize();\n\n            return true;\n        }\n\n        return false;\n    }\n\n    protected click(e: MouseEvent) {\n        super.click(e);\n\n        this.isSelected = true;\n    }\n\n    protected doubleClick(e: MouseEvent) {\n        super.doubleClick(e);\n\n        this.tryOpenInplaceEditor();\n    }\n\n    protected isContainer(): boolean {\n        return false;\n    }\n\n    protected getToolTip(): string {\n        return null;\n    }\n\n    protected internalAddCommands(context: DesignContext, commands: Array<PeerCommand>) {\n        // Do nothing in base implementation\n    }\n\n    protected internalRender(): HTMLElement {\n        let element = document.createElement(\"div\");\n        element.classList.add(\"acd-peer\");\n\n        let toolTip = this.getToolTip();\n\n        if (toolTip) {\n            element.title = toolTip;\n        }\n\n        if (this.isContainer()) {\n            element.classList.add(\"container\");\n        }\n\n        element.style.position = \"absolute\";\n\n        return element;\n    }\n\n    protected internalUpdateCssStyles() {\n        if (this.isSelected) {\n            this.renderedElement.classList.add(\"selected\");\n        }\n        else {\n            this.renderedElement.classList.remove(\"selected\");\n        }\n\n        if (this.dragging) {\n            this.renderedElement.classList.add(\"dragging\");\n        }\n        else {\n            this.renderedElement.classList.remove(\"dragging\");\n        }\n    }\n\n    protected peerAdded(newPeer: DesignerPeer) {\n        this.changed(false);\n\n        if (this.onPeerAdded) {\n            this.onPeerAdded(this, newPeer);\n        }\n    }\n\n    protected peerRemoved(peer: DesignerPeer) {\n        if (this.onPeerRemoved) {\n            this.onPeerRemoved(peer);\n        }\n    }\n\n    protected internalUpdateLayout() {\n        if (this.renderedElement) {\n            let clientRect = this.getBoundingRect();\n\n            this.renderedElement.style.width = clientRect.width + \"px\";\n            this.renderedElement.style.height = clientRect.height + \"px\";\n            this.renderedElement.style.left = clientRect.left + \"px\";\n            this.renderedElement.style.top = clientRect.top + \"px\";\n        }\n    }\n\n    protected createInplaceEditor(): DesignerPeerInplaceEditor {\n        return null;\n    }\n\n    protected internalGetTreeItemText(): string {\n        return null;\n    }\n\n    protected abstract internalRemove(): boolean;\n\n    readonly registration: DesignerPeerRegistrationBase;\n    readonly designerSurface: CardDesignerSurface;\n    readonly treeItem: DesignerPeerTreeItem;\n\n    onParentChanged: (sender: DesignerPeer) => void;\n    onSelectedChanged: (sender: DesignerPeer) => void;\n    onChanged: (sender: DesignerPeer, updatePropertySheet: boolean) => void;\n    onPeerRemoved: (sender: DesignerPeer) => void;\n    onPeerAdded: (sender: DesignerPeer, newPeer: DesignerPeer) => void;\n\n    constructor(\n        parent: DesignerPeer,\n        designerSurface: CardDesignerSurface,\n        registration: DesignerPeerRegistrationBase,\n        cardObject: Adaptive.CardObject) {\n        super();\n\n        this._parent = parent;\n\n        this.registration = registration;\n        this.designerSurface = designerSurface;\n        this._cardObject = cardObject;\n        this.treeItem = new DesignerPeerTreeItem(this, this.isTreeItemExpandedByDefault);\n    }\n\n    abstract getBoundingRect(): Rect;\n    abstract getCardObjectBoundingRect(): Rect;\n\n    getCardObject(): Adaptive.CardObject {\n        return this._cardObject;\n    }\n\n    updateChildren() {\n        for (let i = 0; i < this.getChildCount(); i++) {\n            this.getChildAt(i).updateChildren();\n        }\n    }\n\n    changed(updatePropertySheet: boolean) {\n        if (this.onChanged) {\n            this.onChanged(this, updatePropertySheet);\n        }\n    }\n\n    getTreeItemText(): string {\n        return this.internalGetTreeItemText();\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        // Do nothing in base implementation\n    }\n\n    canDrop(peer: DesignerPeer): boolean {\n        return false;\n    }\n\n    canBeRemoved(): boolean {\n        return true;\n    }\n\n    tryDrop(peer: DesignerPeer, insertionPoint: IPoint): boolean {\n        return false;\n    }\n\n    tryAdd(peer: DesignerPeer): boolean {\n        return false;\n    }\n\n    insertChild(peer: DesignerPeer, index: number = -1) {\n        if (index == -1) {\n            this._children.push(peer);\n        }\n        else {\n            this._children.splice(index, 0, peer);\n        }\n\n        peer.parent = this;\n\n        this.peerAdded(peer);\n    }\n\n    removeChild(peer: DesignerPeer) {\n        var index = this._children.indexOf(peer);\n\n        if (index >= 0) {\n            peer.parent = null;\n            this._children.splice(index, 1);\n        }\n    }\n\n    getChildCount(): number {\n        return this._children.length;\n    }\n\n    getChildAt(index: number): DesignerPeer {\n        return this._children[index];\n    }\n\n    getCommands(context: DesignContext, promoteParentCommands: boolean = false): Array<PeerCommand> {\n        let result: Array<PeerCommand> = [];\n\n        this.internalAddCommands(context, result);\n\n        if (promoteParentCommands && this.parent) {\n            let parentCommands = this.parent.getCommands(context);\n\n            for (let command of parentCommands) {\n                if (command.isPromotable) {\n                    result.push(command);\n                }\n            }\n        }\n\n        return result;\n    }\n\n    remove(onlyFromCard: boolean, removeChildren: boolean): boolean {\n        if (removeChildren) {\n            while (this._children.length > 0) {\n                this._children[0].remove(onlyFromCard, removeChildren);\n            }\n        }\n\n        var result = this.internalRemove();\n\n        if (result && !onlyFromCard) {\n            if (this.parent) {\n                this.parent.removeChild(this);\n            }\n\n            this.removeElementsFromDesignerSurface();\n\n            this.peerRemoved(this);\n        }\n\n        return result;\n    }\n\n    addElementsToDesignerSurface(designerSurface: HTMLElement, processChildren: boolean = false) {\n        designerSurface.appendChild(this.renderedElement);\n\n        if (processChildren) {\n            for (let i = 0; i < this.getChildCount(); i++) {\n                this.getChildAt(i).addElementsToDesignerSurface(designerSurface, processChildren);\n            }\n        }\n    }\n\n    removeElementsFromDesignerSurface(processChildren: boolean = false) {\n        this.renderedElement.parentNode.removeChild(this.renderedElement);\n\n        if (processChildren) {\n            for (let i = 0; i < this.getChildCount(); i++) {\n                this.getChildAt(i).removeElementsFromDesignerSurface(processChildren);\n            }\n        }\n    }\n\n    buildPropertySheetCard(context: DesignContext): Adaptive.AdaptiveCard {\n        let card = new Adaptive.AdaptiveCard();\n        card.padding = new Adaptive.PaddingDefinition(\n            Adaptive.Spacing.Small,\n            Adaptive.Spacing.Small,\n            Adaptive.Spacing.Small,\n            Adaptive.Spacing.Small);\n\n        let propertySheet = new PropertySheet();\n\n        this.populatePropertySheet(propertySheet);\n\n        if (DesignerPeer.onPopulatePropertySheet) {\n            DesignerPeer.onPopulatePropertySheet(this, propertySheet);\n        }\n\n        propertySheet.render(\n            card,\n            new PropertySheetContext(context, this));\n\n        let actionSet = new Adaptive.ActionSet();\n        let commands = this.getCommands(context, true);\n\n        for (let command of commands) {\n            if (command.showInPropertySheet) {\n                let action = new Adaptive.SubmitAction();\n                action.title = command.name;\n                action.onExecute = (sender: Adaptive.Action) => {\n                    command.execute(command, action.renderedElement);\n                }\n\n                actionSet.addAction(action);\n            }\n        }\n\n        actionSet.separator = true;\n\n        card.addItem(actionSet);\n\n        return card;\n    }\n\n    scrollIntoView() {\n        if (this.renderedElement) {\n            this.renderedElement.scrollIntoView();\n        }\n\n        if (this.treeItem && this.treeItem.renderedElement) {\n            this.treeItem.renderedElement.scrollIntoView();\n        }\n    }\n\n    get isTreeItemExpandedByDefault(): boolean {\n        return true;\n    }\n\n    get parent(): DesignerPeer {\n        return this._parent;\n    }\n\n    set parent(value: DesignerPeer) {\n        this._parent = value;\n\n        if (this.onParentChanged) {\n            this.onParentChanged(this);\n        }\n    }\n\n    get isSelected(): boolean {\n        return this._isSelected;\n    }\n\n    set isSelected(value: boolean) {\n        if (value != this._isSelected) {\n            this._isSelected = value;\n\n            this.updateLayout();\n            this.treeItem.isSelected = this._isSelected;\n\n            if (this.onSelectedChanged) {\n                this.onSelectedChanged(this);\n            }\n        }\n    }\n}\n\nexport class ActionPeer extends DesignerPeer {\n    static readonly titleProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"title\", \"Title\", true);\n    static readonly modeProperty = new ChoicePropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"mode\",\n        \"Mode\",\n        [\n            { targetVersion: Adaptive.Versions.v1_5, name: \"Primary\", value: Adaptive.ActionMode?.Primary },\n            { targetVersion: Adaptive.Versions.v1_5, name: \"Secondary\", value: Adaptive.ActionMode?.Secondary }\n        ]);\n    static readonly styleProperty = new ChoicePropertyEditor(\n        Adaptive.Versions.v1_2,\n        \"style\",\n        \"Style\",\n        [\n            { targetVersion: Adaptive.Versions.v1_2, name: \"Default\", value: Adaptive.ActionStyle?.Default },\n            { targetVersion: Adaptive.Versions.v1_2, name: \"Positive\", value: Adaptive.ActionStyle?.Positive },\n            { targetVersion: Adaptive.Versions.v1_2, name: \"Destructive\", value: Adaptive.ActionStyle?.Destructive }\n        ]);\n    static readonly iconUrlProperty = new StringPropertyEditor(Adaptive.Versions.v1_1, \"iconUrl\", \"Icon URL\");\n    static readonly tooltipProperty = new StringPropertyEditor(Adaptive.Versions.v1_5, \"tooltip\", \"Tooltip\");\n    static readonly isEnabledProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_5, \"isEnabled\", \"Enabled\");\n\n    protected doubleClick(e: MouseEvent) {\n        super.doubleClick(e);\n\n        this.action.renderedElement.click();\n    }\n\n    protected internalRemove(): boolean {\n        return this.action.remove();\n    }\n\n    constructor(\n        parent: DesignerPeer,\n        designerSurface: CardDesignerSurface,\n        registration: DesignerPeerRegistrationBase,\n        action: Adaptive.Action) {\n        super(parent, designerSurface, registration, action);\n    }\n\n    protected internalGetTreeItemText(): string {\n        if (this.action.title && this.action.title != \"\") {\n            return this.action.title;\n        }\n        else {\n            return super.internalGetTreeItemText();\n        }\n    }\n\n    isDraggable(): boolean {\n        return false;\n    }\n\n    getBoundingRect(): Rect {\n        let designSurfaceOffset = this.designerSurface.getDesignerSurfaceOffset();\n        let actionBoundingRect = this.action.renderedElement.getBoundingClientRect();\n\n        return new Rect(\n            actionBoundingRect.top - designSurfaceOffset.y,\n            actionBoundingRect.right - designSurfaceOffset.x,\n            actionBoundingRect.bottom - designSurfaceOffset.y,\n            actionBoundingRect.left - designSurfaceOffset.x\n        );\n    }\n\n    getCardObjectBoundingRect(): Rect {\n        let actionBoundingRect = this.action.renderedElement.getBoundingClientRect();\n\n        return new Rect(\n            actionBoundingRect.top,\n            actionBoundingRect.right,\n            actionBoundingRect.bottom,\n            actionBoundingRect.left\n        );\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            ActionPeer.idProperty,\n            ActionPeer.isEnabledProperty,\n            ActionPeer.titleProperty,\n            ActionPeer.tooltipProperty,\n            ActionPeer.modeProperty,\n            ActionPeer.styleProperty,\n            ActionPeer.iconUrlProperty);\n    }\n\n    get action(): Adaptive.Action {\n        return <Adaptive.Action>this.getCardObject();\n    }\n}\n\nexport abstract class TypedActionPeer<TAction extends Adaptive.Action> extends ActionPeer {\n    constructor(\n        parent: DesignerPeer,\n        designerSurface: CardDesignerSurface,\n        registration: DesignerPeerRegistrationBase,\n        action: TAction) {\n        super(parent, designerSurface, registration, action);\n    }\n\n    get action(): TAction {\n        return <TAction>this.getCardObject();\n    }\n}\n\nexport class HttpActionPeer extends TypedActionPeer<Adaptive.HttpAction> {\n    static readonly ignoreInputValidationProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_3, \"ignoreInputValidation\", \"Ignore input validation\");\n    static readonly methodProperty = new ChoicePropertyEditor(\n        Adaptive.Versions.v1_0,\n        \"method\",\n        \"Method\",\n        [\n            { targetVersion: Adaptive.Versions.v1_0, name: \"GET\", value: \"GET\" },\n            { targetVersion: Adaptive.Versions.v1_0, name: \"POST\", value: \"POST\" }\n        ],\n        true);\n    static readonly urlProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"url\", \"Url\");\n    static readonly bodyProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"body\", \"Body\", false, true);\n    static readonly headersProperty = new NameValuePairPropertyEditor(\n        Adaptive.Versions.v1_0,\n        \"headers\",\n        \"name\",\n        \"value\",\n        (name: string, value: string) => { return new Adaptive.HttpHeader(name, value); },\n        \"Name\",\n        \"Value\",\n        \"Add a new header\",\n        \"This action has no header.\");\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            PropertySheetCategory.DefaultCategory,\n            HttpActionPeer.ignoreInputValidationProperty);\n\n        propertySheet.add(\n            defaultCategory,\n            HttpActionPeer.methodProperty,\n            HttpActionPeer.urlProperty);\n\n        if (this.action.method == \"POST\") {\n            propertySheet.add(\n                defaultCategory,\n                HttpActionPeer.bodyProperty);\n        }\n\n        propertySheet.add(\n            \"HTTP headers\",\n            HttpActionPeer.headersProperty);\n    }\n}\n\nexport abstract class BaseSubmitActionPeer<TAction extends Adaptive.SubmitAction> extends TypedActionPeer<TAction> {\n    static readonly dataProperty = new ObjectPropertyEditor(Adaptive.Versions.v1_0, \"data\", \"Data\");\n    static readonly associatedInputsProperty = new ChoicePropertyEditor(\n        Adaptive.Versions.v1_3,\n        \"associatedInputs\",\n        \"Associated inputs\",\n        [\n            { targetVersion: Adaptive.Versions.v1_3, name: \"Automatic\", value: \"auto\" },\n            { targetVersion: Adaptive.Versions.v1_3, name: \"None\", value: \"none\" }\n        ]);\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            BaseSubmitActionPeer.dataProperty,\n            BaseSubmitActionPeer.associatedInputsProperty);\n    }\n}\n\nexport class SubmitActionPeer extends BaseSubmitActionPeer<Adaptive.SubmitAction> { }\n\nexport class ExecuteActionPeer extends BaseSubmitActionPeer<Adaptive.ExecuteAction> {\n    static readonly verbProperty = new StringPropertyEditor(Adaptive.Versions.v1_4, \"verb\", \"Verb\");\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(defaultCategory, ExecuteActionPeer.verbProperty);\n    }\n}\n\nexport class OpenUrlActionPeer extends TypedActionPeer<Adaptive.OpenUrlAction> {\n    static readonly urlProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"url\", \"Url\");\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            OpenUrlActionPeer.urlProperty);\n    }\n}\n\nexport class ShowCardActionPeer extends TypedActionPeer<Adaptive.ShowCardAction> {\n    protected getToolTip(): string {\n        return \"Double click to open/close\";\n    }\n}\n\nexport class ToggleVisibilityActionPeer extends TypedActionPeer<Adaptive.ToggleVisibilityAction> {\n}\n\nexport class CardElementPeer extends DesignerPeer {\n    static readonly dataContextProperty = new CustomCardObjectPropertyEditor(\"*\", \"$data\", \"Data context\", true);\n    static readonly whenProperty = new CustomCardObjectPropertyEditor(\"*\", \"$when\", \"Only show when\", true);\n    static readonly idProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"id\", \"Id\");\n    static readonly isVisibleProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_2, \"isVisible\", \"Initially visible\");\n    static readonly spacingProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"spacing\", \"Spacing\", Adaptive.Spacing);\n    static readonly separatorProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_0, \"separator\", \"Separator\");\n    static readonly horizontalAlignmentProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"horizontalAlignment\", \"Horizontal alignment\", Adaptive.HorizontalAlignment);\n    static readonly heightProperty = new HeightPropertyEditor(\n        Adaptive.Versions.v1_1,\n        \"height\",\n        \"Height\",\n        [\n            { targetVersion: Adaptive.Versions.v1_1, name: \"Automatic\", value: \"auto\" },\n            { targetVersion: Adaptive.Versions.v1_1, name: \"Stretch\", value: \"stretch\" }\n        ]);\n\n    protected insertElementAfter(newElement: Adaptive.CardElement) {\n        if (this.cardElement.parent instanceof Adaptive.Container) {\n            this.cardElement.parent.insertItemAfter(newElement, this.cardElement);\n\n            var newPeer = CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(this.designerSurface, this, newElement);\n\n            this.peerAdded(newPeer);\n        }\n    }\n\n    protected internalRemove(): boolean {\n        return this.cardElement.remove();\n    }\n\n    protected internalUpdateCssStyles() {\n        super.internalUpdateCssStyles();\n\n        if (this.cardElement.isVisible) {\n            this.renderedElement.classList.remove(\"invisible\");\n        }\n        else {\n            this.renderedElement.classList.add(\"invisible\");\n        }\n    }\n\n    constructor(\n        parent: DesignerPeer,\n        designerSurface: CardDesignerSurface,\n        registration: DesignerPeerRegistrationBase,\n        cardElement: Adaptive.CardElement,\n        initializeCardElement?: boolean) {\n        super(parent, designerSurface, registration, cardElement);\n\n        if (initializeCardElement === true) {\n            this.initializeCardElement();\n        }\n\n        this.updateChildren();\n    }\n\n    findCardElementChild(element: Adaptive.CardElement) : CardElementPeer | undefined {\n        for (let i = 0; i < this.getChildCount(); i++) {\n            let peer = this.getChildAt(i);\n\n            if (peer instanceof CardElementPeer && peer.cardElement === element) {\n                return peer;\n            }\n        }\n\n        return undefined;\n    }\n\n    findActionChild(action: Adaptive.Action) : ActionPeer | undefined {\n        for (let i = 0; i < this.getChildCount(); i++) {\n            let peer = this.getChildAt(i);\n\n            if (peer instanceof ActionPeer && peer.action === action) {\n                return peer;\n            }\n        }\n\n        return undefined;\n    }\n\n    updateChildren(initializeCardElement?: boolean) {\n        for (let i = 0; i < this.getChildCount(); i++) {\n            let existingPeer = this.getChildAt(i);\n\n            if (existingPeer instanceof CardElementPeer && this.cardElement.indexOf(existingPeer.cardElement) < 0) {\n                this.removeChild(existingPeer);\n            }\n\n            if (existingPeer instanceof ActionPeer && this.cardElement.indexOfAction(existingPeer.action) < 0) {\n                this.removeChild(existingPeer);\n            }\n        }\n\n        let itemCount = 0;\n        if (this.cardElement instanceof Adaptive.CardElementContainer) {\n            itemCount = this.cardElement.getItemCount();\n            for (let i = 0; i < itemCount; i++) {\n                let existingPeer = this.findCardElementChild(this.cardElement.getItemAt(i));\n\n                if (!existingPeer) {\n                    this.insertChild(\n                        CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(\n                            this.designerSurface,\n                            this,\n                            this.cardElement.getItemAt(i),\n                            initializeCardElement),\n                        i);\n                }\n            }\n        }\n\n        for (let i = 0; i < this.cardElement.getActionCount(); i++) {\n            let existingPeer = this.findActionChild(this.cardElement.getActionAt(i));\n\n            if (!existingPeer) {\n                this.insertChild(\n                    CardDesignerSurface.actionPeerRegistry.createPeerInstance(\n                        this.designerSurface,\n                        this,\n                        this.cardElement.getActionAt(i)),\n                        itemCount + i);\n            }\n        }\n\n        super.updateChildren();\n    }\n\n    getTreeItemText(): string {\n        let text = super.getTreeItemText();\n\n        if (this.cardElement.isVisible) {\n            return text;\n        }\n        else {\n            let result = \"Hidden\";\n\n            if (text) {\n                result += \" - \" + text;\n            }\n\n            return result;\n        }\n    }\n\n    initializeCardElement() {\n        // Do nothing in base implementation\n    }\n\n    canDrop(peer: DesignerPeer) {\n        return this.cardElement instanceof Adaptive.Container && peer instanceof CardElementPeer;\n    }\n\n    tryDrop(peer: DesignerPeer, insertionPoint: IPoint): boolean {\n        if (this.cardElement instanceof Adaptive.Container && peer instanceof CardElementPeer) {\n            let targetChild: DesignerPeer = null;\n            let insertAfter: boolean;\n\n            for (let i = 0; i < this.getChildCount(); i++) {\n                let rect = this.getChildAt(i).getBoundingRect();\n\n                if (rect.isInside(insertionPoint)) {\n                    targetChild = this.getChildAt(i);\n\n                    insertAfter = (insertionPoint.y - rect.top) >= (rect.height / 2);\n\n                    break;\n                }\n            }\n\n            if (targetChild != peer) {\n                if (peer.cardElement.parent) {\n                    if (!peer.remove(true, false)) {\n                        return false;\n                    }\n\n                    peer.parent.removeChild(peer);\n                }\n\n                if (!targetChild) {\n                    let rect = this.getBoundingRect();\n\n                    insertAfter = (insertionPoint.y - rect.top) >= (rect.height / 2);\n\n                    if (this.cardElement.getItemCount() > 0 && insertAfter) {\n                        this.cardElement.insertItemAfter(peer.cardElement, this.cardElement.getItemAt(this.cardElement.getItemCount() - 1));\n                    }\n                    else {\n                        this.cardElement.insertItemAfter(peer.cardElement, null);\n                    }\n                }\n                else {\n                    if (insertAfter) {\n                        this.cardElement.insertItemAfter(peer.cardElement, (<CardElementPeer>targetChild).cardElement);\n                    }\n                    else {\n                        this.cardElement.insertItemBefore(peer.cardElement, (<CardElementPeer>targetChild).cardElement);\n                    }\n                }\n\n                this.insertChild(peer, peer.cardElement.index);\n                this.changed(false);\n\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    tryAdd(peer: DesignerPeer): boolean {\n        if (this.cardElement instanceof Adaptive.Container && peer instanceof CardElementPeer) {\n            if (peer.cardElement.parent) {\n                if (!peer.remove(true, false)) {\n                    return false;\n                }\n\n                peer.parent.removeChild(peer);\n            }\n\n            this.cardElement.addItem(peer.cardElement);\n            this.insertChild(peer, peer.cardElement.index);\n            this.changed(false);\n\n            return true;\n        }\n\n        return false;\n    }\n\n    getBoundingRect(): Rect {\n        let designSurfaceOffset = this.designerSurface.getDesignerSurfaceOffset();\n        let cardElementBoundingRect = this.cardElement.renderedElement.getBoundingClientRect();\n\n        if (this.cardElement.hasVisibleSeparator) {\n            let separatorBoundingRect = this.cardElement.separatorElement.getBoundingClientRect();\n\n            return new Rect(\n                Math.min(separatorBoundingRect.top, cardElementBoundingRect.top) - designSurfaceOffset.y,\n                Math.max(separatorBoundingRect.right, cardElementBoundingRect.right) - designSurfaceOffset.x,\n                Math.max(separatorBoundingRect.bottom, cardElementBoundingRect.bottom) - designSurfaceOffset.y,\n                Math.min(separatorBoundingRect.left, cardElementBoundingRect.left) - designSurfaceOffset.x,\n            )\n        }\n        else {\n            return new Rect(\n                cardElementBoundingRect.top - designSurfaceOffset.y,\n                cardElementBoundingRect.right - designSurfaceOffset.x,\n                cardElementBoundingRect.bottom - designSurfaceOffset.y,\n                cardElementBoundingRect.left - designSurfaceOffset.x\n            );\n        }\n    }\n\n    getCardObjectBoundingRect(): Rect {\n        let cardElementBoundingRect = this.cardElement.renderedElement.getBoundingClientRect();\n\n        return new Rect(\n            cardElementBoundingRect.top,\n            cardElementBoundingRect.right,\n            cardElementBoundingRect.bottom,\n            cardElementBoundingRect.left\n        );\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        if (GlobalSettings.enableDataBindingSupport) {\n            propertySheet.add(\n                defaultCategory,\n                CardElementPeer.dataContextProperty,\n                CardElementPeer.whenProperty);\n        }\n\n        propertySheet.add(\n            defaultCategory,\n            CardElementPeer.idProperty,\n            CardElementPeer.isVisibleProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            CardElementPeer.spacingProperty,\n            CardElementPeer.separatorProperty,\n            CardElementPeer.horizontalAlignmentProperty,\n            CardElementPeer.heightProperty);\n    }\n\n    get cardElement(): Adaptive.CardElement {\n        return <Adaptive.CardElement>this.getCardObject();\n    }\n}\n\nexport abstract class TypedCardElementPeer<TCardElement extends Adaptive.CardElement> extends CardElementPeer {\n    constructor(\n        parent: DesignerPeer,\n        designerSurface: CardDesignerSurface,\n        registration: DesignerPeerRegistrationBase,\n        cardElement: TCardElement,\n        initializeCardElement?: boolean) {\n        super(parent, designerSurface, registration, cardElement, initializeCardElement);\n    }\n\n    get cardElement(): TCardElement {\n        return <TCardElement>this.getCardObject();\n    }\n}\n\nexport class AdaptiveCardPeer extends TypedCardElementPeer<Adaptive.AdaptiveCard> {\n    static readonly langProperty = new StringPropertyEditor(Adaptive.Versions.v1_1, \"lang\", \"Language\");\n    static readonly fallbackTextProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"fallbackText\", \"Fallback text\", false, true);\n    static readonly speakProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"speak\", \"Speak\");\n    static readonly refreshProperty = new CompoundPropertyEditor(\n        Adaptive.Versions.v1_4,\n        \"refresh\",\n        [\n            new StringArrayPropertyEditor(Adaptive.Versions.v1_4, \"userIds\", \"User IDs\", false, true),\n            new ActionPropertyEditor(Adaptive.Versions.v1_4, \"action\", \"Action\", [ \"*\", \"-Action.Execute\" ], true)\n        ],\n        () => { return new Adaptive.RefreshDefinition() });\n\n    protected addAction(action: Adaptive.Action) {\n        this.cardElement.addAction(action);\n\n        this.insertChild(CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, this, action));\n    }\n\n    protected internalRemove(): boolean {\n        return true;\n    }\n\n    protected internalAddCommands(context: DesignContext, commands: Array<PeerCommand>) {\n        super.internalAddCommands(context, commands);\n\n        let availableActions: Adaptive.ITypeRegistration<Adaptive.Action>[] = [];\n\n        for (let i = 0; i < context.hostContainer.actionsRegistry.getItemCount(); i++) {\n            let typeRegistration = context.hostContainer.actionsRegistry.getItemAt(i);\n\n            if (typeRegistration.schemaVersion.compareTo(context.targetVersion) <= 0) {\n                availableActions.push(typeRegistration);\n            }\n        }\n\n        if (availableActions.length > 0) {\n            commands.push(\n                new PeerCommand(\n                    {\n                        name: \"Add an action\",\n                        alwaysShowName: true,\n                        iconClass: \"acd-icon-bolt\",\n                        showInPropertySheet: true,\n                        execute: (command: PeerCommand, clickedElement: HTMLElement) => {\n                            let popupMenu = new Controls.PopupMenu();\n\n                            for (let i = 0; i < availableActions.length; i++) {\n                                let menuItem = new Controls.DropDownItem(i.toString(), availableActions[i].typeName);\n                                menuItem.onClick = (clickedItem: Controls.DropDownItem) => {\n                                    let registration = availableActions[i];\n                                    let action = new registration.objectType();\n                                    action.title = registration.typeName;\n\n                                    this.addAction(action);\n\n                                    popupMenu.closePopup(false);\n                                };\n\n                                popupMenu.items.add(menuItem);\n                            }\n\n                            popupMenu.popup(clickedElement);\n                        }\n                    })\n            );\n        }\n    }\n\n    isDraggable(): boolean {\n        return false;\n    }\n\n    canBeRemoved(): boolean {\n        return false;\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.remove(\n            DesignerPeer.idProperty,\n            CardElementPeer.isVisibleProperty,\n            CardElementPeer.horizontalAlignmentProperty,\n            CardElementPeer.separatorProperty,\n            CardElementPeer.heightProperty,\n            CardElementPeer.spacingProperty);\n\n        propertySheet.add(\n            defaultCategory,\n            AdaptiveCardPeer.langProperty,\n            AdaptiveCardPeer.fallbackTextProperty,\n            AdaptiveCardPeer.speakProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.Refresh,\n            AdaptiveCardPeer.refreshProperty);\n\n        if (this.cardElement.refresh && this.cardElement.refresh.action) {\n            propertySheet.addActionProperties(\n                Adaptive.Versions.v1_4,\n                this,\n                this.cardElement.refresh.action,\n                PropertySheetCategory.Refresh,\n                [ BaseSubmitActionPeer.associatedInputsProperty, ActionPeer.iconUrlProperty, ActionPeer.styleProperty, ActionPeer.modeProperty ]);\n        }\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            ContainerPeer.minHeightProperty,\n            ContainerPeer.verticalContentAlignmentProperty);\n\n        propertySheet.add(\n            \"Background image\",\n            ContainerPeer.backgroundImageProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.SelectionAction,\n            ContainerPeer.selectActionProperty);\n\n        if (this.cardElement.selectAction) {\n            propertySheet.addActionProperties(\n                Adaptive.Versions.v1_0,\n                this,\n                this.cardElement.selectAction,\n                PropertySheetCategory.SelectionAction);\n        }\n    }\n}\n\nexport class ColumnPeer extends TypedCardElementPeer<Adaptive.Column> {\n    private static readonly pixelWidthProperty = new SizeAndUnitPropertyEditor(Adaptive.Versions.v1_1, \"width\", \"Width in pixels\", Adaptive.SizeUnit.Pixel);\n    private static readonly weightProperty = new SizeAndUnitPropertyEditor(Adaptive.Versions.v1_0, \"width\", \"Weight\", Adaptive.SizeUnit.Weight);\n\n    static readonly widthProperty = new ColumnWidthPropertyEditor(\n        Adaptive.Versions.v1_0,\n        \"width\",\n        \"Width\",\n        [\n            { targetVersion: Adaptive.Versions.v1_0, name: \"Automatic\", value: \"auto\" },\n            { targetVersion: Adaptive.Versions.v1_0, name: \"Stretch\", value: \"stretch\" },\n            { targetVersion: Adaptive.Versions.v1_0, name: \"Weighted\", value: \"weighted\" },\n            { targetVersion: Adaptive.Versions.v1_1, name: \"Pixels\", value: \"pixels\" }\n        ],\n        true);\n\n    protected isContainer(): boolean {\n        return true;\n    }\n\n    protected internalGetTreeItemText(): string {\n        if (this.cardElement.width instanceof Adaptive.SizeAndUnit) {\n            switch (this.cardElement.width.unit) {\n                case Adaptive.SizeUnit.Weight:\n                    return \"Weight: \" + this.cardElement.width.physicalSize;\n                default:\n                    return this.cardElement.width.physicalSize + \" pixels\";\n            }\n        }\n        else {\n            switch (this.cardElement.width) {\n                case \"stretch\":\n                    return \"Stretch\";\n                case \"auto\":\n                    return \"Automatic\";\n                default:\n                    return \"\";\n            }\n        }\n    }\n\n    isDraggable(): boolean {\n        return false;\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            ColumnPeer.widthProperty);\n\n        if (this.cardElement.width instanceof Adaptive.SizeAndUnit) {\n            if (this.cardElement.width.unit == Adaptive.SizeUnit.Pixel) {\n                propertySheet.add(\n                    PropertySheetCategory.LayoutCategory,\n                    ColumnPeer.pixelWidthProperty);\n            }\n            else {\n                propertySheet.add(\n                    PropertySheetCategory.LayoutCategory,\n                    ColumnPeer.weightProperty);\n            }\n        }\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            ContainerPeer.minHeightProperty,\n            ContainerPeer.verticalContentAlignmentProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.StyleCategory,\n            ContainerPeer.styleProperty,\n            ContainerPeer.bleedProperty);\n\n        propertySheet.add(\n            \"Background image\",\n            ContainerPeer.backgroundImageProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.SelectionAction,\n            ContainerPeer.selectActionProperty);\n\n        if (this.cardElement.selectAction) {\n            propertySheet.addActionProperties(\n                Adaptive.Versions.v1_0,\n                this,\n                this.cardElement.selectAction,\n                PropertySheetCategory.SelectionAction);\n        }\n    }\n}\n\nexport class ColumnSetPeer extends TypedCardElementPeer<Adaptive.ColumnSet> {\n    protected isContainer(): boolean {\n        return true;\n    }\n\n    protected internalAddCommands(context: DesignContext, commands: Array<PeerCommand>) {\n        super.internalAddCommands(context, commands);\n\n        commands.push(\n            new PeerCommand(\n                {\n                    name: \"Add a column\",\n                    iconClass: \"acd-icon-addColumn\",\n                    isPromotable: true,\n                    execute: (command: PeerCommand, clickedElement: HTMLElement) => {\n                        var column = new Adaptive.Column();\n                        column.width = \"stretch\";\n\n                        this.cardElement.addColumn(column);\n\n                        this.insertChild(CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(this.designerSurface, this, column));\n                    }\n                })\n        );\n    }\n\n    protected internalGetTreeItemText(): string {\n        let columnCount = this.cardElement.getItemCount();\n\n        switch (columnCount) {\n            case 0:\n                return \"No column\";\n            case 1:\n                return \"1 column\";\n            default:\n                return columnCount + \" columns\";\n        }\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            ContainerPeer.minHeightProperty,\n            ContainerPeer.styleProperty,\n            ContainerPeer.bleedProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.SelectionAction,\n            ContainerPeer.selectActionProperty);\n\n        if (this.cardElement.selectAction) {\n            propertySheet.addActionProperties(\n                Adaptive.Versions.v1_0,\n                this,\n                this.cardElement.selectAction,\n                PropertySheetCategory.SelectionAction);\n        }\n    }\n\n    canDrop(peer: DesignerPeer) {\n        return true;\n    }\n}\n\nexport class ContainerPeer extends TypedCardElementPeer<Adaptive.Container> {\n    static readonly selectActionProperty = new ActionPropertyEditor(Adaptive.Versions.v1_1, \"selectAction\", \"Action type\", [ Adaptive.ShowCardAction.JsonTypeName ], true);\n    static readonly minHeightProperty = new NumberPropertyEditor(Adaptive.Versions.v1_2, \"minPixelHeight\", \"Minimum height in pixels\");\n    static readonly verticalContentAlignmentProperty = new EnumPropertyEditor(Adaptive.Versions.v1_1, \"verticalContentAlignment\", \"Vertical content alignment\", Adaptive.VerticalAlignment);\n    static readonly styleProperty = new ContainerStylePropertyEditor(Adaptive.Versions.v1_0, \"style\", \"Style\");\n    static readonly bleedProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_2, \"bleed\", \"Bleed\");\n    static readonly backgroundImageProperty = new CompoundPropertyEditor(\n        Adaptive.Versions.v1_0,\n        \"backgroundImage\",\n        [\n            new StringPropertyEditor(Adaptive.Versions.v1_0, \"url\", \"URL\", true),\n            new EnumPropertyEditor(Adaptive.Versions.v1_2, \"fillMode\", \"Fill mode\", Adaptive.FillMode),\n            new EnumPropertyEditor(Adaptive.Versions.v1_2, \"horizontalAlignment\", \"Horizontal alignment\", Adaptive.HorizontalAlignment),\n            new EnumPropertyEditor(Adaptive.Versions.v1_2, \"verticalAlignment\", \"Vertical alignment\", Adaptive.VerticalAlignment)\n        ]\n    );\n\n    protected isContainer(): boolean {\n        return true;\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            ContainerPeer.minHeightProperty,\n            ContainerPeer.verticalContentAlignmentProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.StyleCategory,\n            ContainerPeer.styleProperty,\n            ContainerPeer.bleedProperty);\n\n        propertySheet.add(\n            \"Background image\",\n            ContainerPeer.backgroundImageProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.SelectionAction,\n            ContainerPeer.selectActionProperty);\n\n        if (this.cardElement.selectAction) {\n            propertySheet.addActionProperties(\n                Adaptive.Versions.v1_0,\n                this,\n                this.cardElement.selectAction,\n                PropertySheetCategory.SelectionAction);\n\n        }\n    }\n}\n\nexport class ActionSetPeer extends TypedCardElementPeer<Adaptive.AdaptiveCard> {\n    protected addAction(action: Adaptive.Action) {\n        this.cardElement.addAction(action);\n\n        this.insertChild(CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, this, action));\n    }\n\n    protected internalAddCommands(context: DesignContext, commands: Array<PeerCommand>) {\n        super.internalAddCommands(context, commands);\n\n        let availableActions: Adaptive.ITypeRegistration<Adaptive.Action>[] = [];\n\n        for (let i = 0; i < context.hostContainer.actionsRegistry.getItemCount(); i++) {\n            let typeRegistration = context.hostContainer.actionsRegistry.getItemAt(i);\n\n            if (typeRegistration.schemaVersion.compareTo(context.targetVersion) <= 0) {\n                availableActions.push(typeRegistration);\n            }\n        }\n\n        if (availableActions.length > 0) {\n            commands.push(\n                new PeerCommand(\n                    {\n                        name: \"Add an action\",\n                        alwaysShowName: true,\n                        iconClass: \"acd-icon-bolt\",\n                        showInPropertySheet: true,\n                        execute: (command: PeerCommand, clickedElement: HTMLElement) => {\n                            let popupMenu = new Controls.PopupMenu();\n\n                            for (let i = 0; i < availableActions.length; i++) {\n                                let menuItem = new Controls.DropDownItem(i.toString(), availableActions[i].typeName);\n                                menuItem.onClick = (clickedItem: Controls.DropDownItem) => {\n                                    let registration = availableActions[i];\n                                    let action = new registration.objectType();\n                                    action.title = registration.typeName;\n\n                                    this.addAction(action);\n\n                                    popupMenu.closePopup(false);\n                                };\n\n                                popupMenu.items.add(menuItem);\n                            }\n\n                            popupMenu.popup(clickedElement);\n                        }\n                    })\n            );\n        }\n    }\n}\n\nexport class ImageSetPeer extends TypedCardElementPeer<Adaptive.ImageSet> {\n    static readonly ImageSizeProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"imageSize\", \"Image size\", Adaptive.ImageSize);\n\n    protected internalAddCommands(context: DesignContext, commands: Array<PeerCommand>) {\n        super.internalAddCommands(context, commands);\n\n        commands.push(\n            new PeerCommand(\n                {\n                    name: \"Add an image\",\n                    iconClass: \"acd-icon-image\",\n                    isPromotable: true,\n                    execute: (command: PeerCommand, clickedElement: HTMLElement) => {\n                        let newImage = new Adaptive.Image();\n\n                        this.cardElement.addImage(newImage);\n\n                        this.insertChild(CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(this.designerSurface, this, newImage));\n                    }\n                })\n        );\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            ImageSetPeer.ImageSizeProperty);\n    }\n}\n\nexport class ImagePeer extends TypedCardElementPeer<Adaptive.Image> {\n    static readonly urlProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"url\", \"Url\", true);\n    static readonly altTextProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"altText\", \"Alternate text\", true);\n    static readonly sizeProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"size\", \"Size\", Adaptive.Size);\n    static readonly pixelWidthProperty = new NumberPropertyEditor(Adaptive.Versions.v1_1, \"pixelWidth\", \"Width in pixels\");\n    static readonly pixelHeightProperty = new NumberPropertyEditor(Adaptive.Versions.v1_1, \"pixelHeight\", \"Height in pixels\");\n    static readonly styleProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"style\", \"Style\", Adaptive.ImageStyle);\n    static readonly backgroundColorProperty = new StringPropertyEditor(Adaptive.Versions.v1_1, \"backgroundColor\", \"Background color\");\n\n    private get isParentImageSet(): boolean {\n        return this.parent && this.parent instanceof ImageSetPeer;\n    }\n\n    protected internalAddCommands(context: DesignContext, commands: Array<PeerCommand>) {\n        super.internalAddCommands(context, commands);\n\n        if (GlobalSettings.enableDataBindingSupport && context.dataStructure) {\n            commands.push(\n                new PeerCommand(\n                    {\n                        name: \"Bind...\",\n                        alwaysShowName: true,\n                        toolTip: \"Select a data field to bind this Image to.\",\n                        execute: (command: PeerCommand, clickedElement: HTMLElement) => {\n                            let fieldPicker = new FieldPicker(context.dataStructure);\n                            fieldPicker.onClose = (sender, wasCancelled) => {\n                                if (!wasCancelled) {\n                                    this.cardElement.url = fieldPicker.selectedField.asExpression();\n\n                                    this.changed(true);\n                                }\n                            }\n                            fieldPicker.popup(clickedElement);\n                        }\n                    })\n            );\n        }\n    }\n\n    isDraggable(): boolean {\n        return !this.isParentImageSet;\n    }\n\n    getBoundingRect(): Rect {\n        if (this.isParentImageSet) {\n            let designSurfaceOffset = this.designerSurface.getDesignerSurfaceOffset();\n            let actionBoundingRect = this.cardElement.renderedElement.getBoundingClientRect();\n\n            return new Rect(\n                actionBoundingRect.top - designSurfaceOffset.y,\n                actionBoundingRect.right - designSurfaceOffset.x,\n                actionBoundingRect.bottom - designSurfaceOffset.y,\n                actionBoundingRect.left - designSurfaceOffset.x\n            );\n        }\n        else {\n            return super.getBoundingRect();\n        }\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            ImagePeer.urlProperty,\n            ImagePeer.altTextProperty);\n\n        if (!this.isParentImageSet) {\n            propertySheet.add(\n                PropertySheetCategory.LayoutCategory,\n                ImagePeer.sizeProperty,\n                ImagePeer.pixelWidthProperty,\n                ImagePeer.pixelHeightProperty);\n\n            propertySheet.add(\n                PropertySheetCategory.StyleCategory,\n                ImagePeer.styleProperty,\n                ImagePeer.backgroundColorProperty);\n\n            propertySheet.add(\n                PropertySheetCategory.SelectionAction,\n                ContainerPeer.selectActionProperty);\n\n            if (this.cardElement.selectAction) {\n                propertySheet.addActionProperties(\n                    Adaptive.Versions.v1_0,\n                    this,\n                    this.cardElement.selectAction,\n                    PropertySheetCategory.SelectionAction);\n            }\n        }\n    }\n}\n\nexport class MediaPeer extends TypedCardElementPeer<Adaptive.Media> {\n    static readonly altTextProperty = new StringPropertyEditor(Adaptive.Versions.v1_1, \"altText\", \"Alternate text\", true);\n    static readonly posterUrlProperty = new StringPropertyEditor(Adaptive.Versions.v1_1, \"posterUrl\", \"Poster URL\", true);\n    static readonly sourcesProperty = new NameValuePairPropertyEditor(\n        Adaptive.Versions.v1_1,\n        \"sources\",\n        \"url\",\n        \"mimeType\",\n        (name: string, value: string) => { return new Adaptive.MediaSource(name, value); },\n        \"URL\",\n        \"MIME type\",\n        \"Add a new source\",\n        \"No source has been defined.\");\n\n    protected internalGetTreeItemText(): string {\n        if (this.cardElement.selectedMediaType == \"audio\") {\n            return \"audio\";\n        }\n        else if (this.cardElement.selectedMediaType == \"video\") {\n            return \"video\";\n        }\n        else {\n            return super.internalGetTreeItemText();\n        }\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            MediaPeer.altTextProperty,\n            MediaPeer.posterUrlProperty);\n\n        propertySheet.add(\n            \"Sources\",\n            MediaPeer.sourcesProperty);\n    }\n}\n\nexport class FactSetPeer extends TypedCardElementPeer<Adaptive.FactSet> {\n    static readonly factsProperty = new NameValuePairPropertyEditor(\n        Adaptive.Versions.v1_0,\n        \"facts\",\n        \"name\",\n        \"value\",\n        (name: string, value: string) => { return new Adaptive.Fact(name, value); },\n        \"Name\",\n        \"Value\",\n        \"Add a new fact\",\n        \"This FactSet is empty.\");\n\n    protected internalGetTreeItemText(): string {\n        if (this.cardElement.facts.length == 0) {\n            return \"No fact\";\n        }\n\n        let allNames = this.cardElement.facts.map(\n            (value, index, array) => {\n                return value.name;\n            }\n        )\n\n        return allNames.join(\", \");\n    }\n\n    initializeCardElement() {\n        super.initializeCardElement();\n\n        this.cardElement.facts.push(\n            new Adaptive.Fact(\"Fact 1\", \"Value 1\"),\n            new Adaptive.Fact(\"Fact 2\", \"Value 2\")\n        );\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            \"Facts\",\n            FactSetPeer.factsProperty);\n\n        propertySheet.remove(CardElementPeer.horizontalAlignmentProperty);\n    }\n}\n\nexport abstract class InputPeer<TInput extends Adaptive.Input> extends TypedCardElementPeer<TInput> {\n    static readonly labelProperty = new StringPropertyEditor(\n        Adaptive.Versions.v1_3,\n        \"label\",\n        \"Label\");\n\n    static readonly isRequiredProperty = new BooleanPropertyEditor(\n        Adaptive.Versions.v1_3,\n        \"isRequired\",\n        \"Required\");\n\n    static readonly errorMessageProperty = new StringPropertyEditor(\n        Adaptive.Versions.v1_3,\n        \"errorMessage\",\n        \"Error message\");\n\n    protected internalGetTreeItemText(): string {\n        return this.cardElement.id ? this.cardElement.id : super.internalGetTreeItemText();\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(defaultCategory, InputPeer.labelProperty);\n        propertySheet.add(\n            PropertySheetCategory.Validation,\n            InputPeer.isRequiredProperty,\n            InputPeer.errorMessageProperty);\n\n        propertySheet.remove(\n            CardElementPeer.horizontalAlignmentProperty,\n            CardElementPeer.heightProperty);\n    }\n}\n\nexport class TextInputPeer extends InputPeer<Adaptive.TextInput> {\n    static readonly defaultValueProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"defaultValue\", \"Default value\");\n    static readonly placeholderProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"placeholder\", \"Placeholder\");\n    static readonly isMultilineProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_0, \"isMultiline\", \"Multi-line\", true);\n    static readonly styleProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"style\", \"Style\", Adaptive.InputTextStyle);\n    static readonly maxLengthProperty = new NumberPropertyEditor(Adaptive.Versions.v1_0, \"maxLength\", \"Maximum length\");\n    static readonly inlineActionProperty = new ActionPropertyEditor(Adaptive.Versions.v1_2, \"inlineAction\", \"Action type\", [ Adaptive.ShowCardAction.JsonTypeName ], true);\n    static readonly regexProperty = new StringPropertyEditor(Adaptive.Versions.v1_3, \"regex\", \"Pattern\");\n\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            TextInputPeer.placeholderProperty,\n            TextInputPeer.isMultilineProperty);\n\n        if (!this.cardElement.isMultiline) {\n            propertySheet.add(\n                PropertySheetCategory.DefaultCategory,\n                TextInputPeer.styleProperty);\n        }\n        else {\n            propertySheet.add(\n                PropertySheetCategory.LayoutCategory,\n                CardElementPeer.heightProperty);\n        }\n\n        propertySheet.add(\n            PropertySheetCategory.InlineAction,\n            TextInputPeer.inlineActionProperty);\n\n        if (this.cardElement.inlineAction) {\n            propertySheet.addActionProperties(\n                Adaptive.Versions.v1_2,\n                this,\n                this.cardElement.inlineAction,\n                PropertySheetCategory.InlineAction,\n                [ ActionPeer.styleProperty, ActionPeer.modeProperty ]);\n        }\n\n        propertySheet.add(\n            defaultCategory,\n            TextInputPeer.maxLengthProperty,\n            TextInputPeer.defaultValueProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.Validation,\n            TextInputPeer.regexProperty);\n    }\n\n    initializeCardElement() {\n        super.initializeCardElement();\n\n        this.cardElement.placeholder = \"Placeholder text\";\n    }\n}\n\nexport class NumberInputPeer extends InputPeer<Adaptive.NumberInput> {\n    static readonly defaultValueProperty = new NumberPropertyEditor(Adaptive.Versions.v1_0, \"defaultValue\", \"Default value\");\n    static readonly placeholderProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"placeholder\", \"Placeholder\");\n    static readonly minProperty = new NumberPropertyEditor(Adaptive.Versions.v1_0, \"min\", \"Minimum value\");\n    static readonly maxProperty = new NumberPropertyEditor(Adaptive.Versions.v1_0, \"max\", \"Maximum value\");\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            NumberInputPeer.placeholderProperty,\n            NumberInputPeer.defaultValueProperty,\n            NumberInputPeer.minProperty,\n            NumberInputPeer.maxProperty);\n    }\n\n    initializeCardElement() {\n        super.initializeCardElement();\n\n        this.cardElement.placeholder = \"Placeholder text\";\n    }\n}\n\nexport class DateInputPeer extends InputPeer<Adaptive.DateInput> {\n    static readonly defaultValueProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"defaultValue\", \"Default value\");\n    static readonly minProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"min\", \"Minimum value\");\n    static readonly maxProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"max\", \"Maximum value\");\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            DateInputPeer.defaultValueProperty,\n            DateInputPeer.minProperty,\n            DateInputPeer.maxProperty);\n    }\n}\n\nexport class TimeInputPeer extends InputPeer<Adaptive.TimeInput> {\n    static readonly defaultValueProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"defaultValue\", \"Default value\");\n    static readonly minProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"min\", \"Minimum value\");\n    static readonly maxProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"max\", \"Maximum value\");\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            TimeInputPeer.defaultValueProperty,\n            TimeInputPeer.minProperty,\n            TimeInputPeer.maxProperty);\n    }\n}\n\nexport class ToggleInputPeer extends InputPeer<Adaptive.ToggleInput> {\n    static readonly defaultValueProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"defaultValue\", \"Default value\");\n    static readonly titleProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"title\", \"Title\", true);\n    static readonly valueOnProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"valueOn\", \"Value when on\");\n    static readonly valueOffProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"valueOff\", \"Value when off\");\n    static readonly wrapProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_2, \"wrap\", \"Wrap\");\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            ToggleInputPeer.titleProperty,\n            ToggleInputPeer.valueOnProperty,\n            ToggleInputPeer.valueOffProperty,\n            ToggleInputPeer.defaultValueProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            ToggleInputPeer.wrapProperty);\n    }\n\n    initializeCardElement() {\n        this.cardElement.title = \"New Input.Toggle\";\n    }\n}\n\nexport class ChoiceSetInputPeer extends InputPeer<Adaptive.ChoiceSetInput> {\n    static readonly defaultValueProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"defaultValue\", \"Default value\");\n    static readonly placeholderProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"placeholder\", \"Placeholder\");\n    static readonly isMultiselectProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_0, \"isMultiSelect\", \"Allow multi selection\");\n    static readonly styleProperty = new ChoicePropertyEditor(\n        Adaptive.Versions.v1_0,\n        \"style\",\n        \"Style\",\n        [\n            { targetVersion: Adaptive.Versions.v1_0, name: \"Compact\", value: \"compact\" },\n            { targetVersion: Adaptive.Versions.v1_0, name: \"Expanded\", value: \"expanded\" },\n            { targetVersion: Adaptive.Versions.v1_5, name: \"Filtered\", value: \"filtered\" }\n        ],\n        true);\n    static readonly wrapProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_2, \"wrap\", \"Wrap\");\n    static readonly choicesProperty = new NameValuePairPropertyEditor(\n        Adaptive.Versions.v1_0,\n        \"choices\",\n        \"title\",\n        \"value\",\n        (name: string, value: string) => { return new Adaptive.Choice(name, value); },\n        \"Title\",\n        \"Value\",\n        \"Add a new choice\",\n        \"This ChoiceSet is empty\");\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            ChoiceSetInputPeer.placeholderProperty,\n            ChoiceSetInputPeer.isMultiselectProperty,\n            ChoiceSetInputPeer.styleProperty,\n            ChoiceSetInputPeer.defaultValueProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            ToggleInputPeer.wrapProperty);\n\n        propertySheet.add(\n            \"Choices\",\n            ChoiceSetInputPeer.choicesProperty);\n    }\n\n    initializeCardElement() {\n        this.cardElement.placeholder = \"Placeholder text\";\n\n        this.cardElement.choices.push(\n            new Adaptive.Choice(\"Choice 1\", \"Choice 1\"),\n            new Adaptive.Choice(\"Choice 2\", \"Choice 2\")\n        );\n    }\n}\n\nclass TextBlockPeerInplaceEditor extends CardElementPeerInplaceEditor<Adaptive.TextBlock> {\n    private _renderedElement: HTMLTextAreaElement;\n\n    private close(applyChanges: boolean) {\n        if (this.onClose) {\n            this.onClose(applyChanges);\n        }\n    }\n\n    initialize() {\n        this._renderedElement.select();\n    }\n\n    applyChanges() {\n        this.cardElement.text = this._renderedElement.value;\n    }\n\n    render() {\n        this._renderedElement = document.createElement(\"textarea\");\n        this._renderedElement.className = \"acd-textBlock-inplace-editor\";\n        this._renderedElement.value = this.cardElement.text;\n        this._renderedElement.onkeydown = (e) => {\n            switch (e.key) {\n                case Controls.Constants.keys.escape:\n                   this.close(false);\n\n                   e.preventDefault();\n                   e.cancelBubble = true;\n\n                   break;\n                case Controls.Constants.keys.enter:\n                    this.close(true);\n\n                    e.preventDefault();\n                    e.cancelBubble = true;\n\n                    break;\n            }\n\n            return !e.cancelBubble;\n        };\n\n        this.cardElement.applyStylesTo(this._renderedElement);\n\n        return this._renderedElement;\n    }\n}\n\nexport class TextBlockPeer extends TypedCardElementPeer<Adaptive.TextBlock> {\n    static readonly textProperty = new StringPropertyEditor(Adaptive.Versions.v1_0, \"text\", \"Text\", true, true);\n    static readonly wrapProperty = new BooleanPropertyEditor(Adaptive.Versions.v1_0, \"wrap\", \"Wrap\");\n    static readonly maxLinesProperty = new NumberPropertyEditor(Adaptive.Versions.v1_0, \"maxLines\", \"Maximum lines\", 0);\n    static readonly fontTypeProperty = new EnumPropertyEditor(Adaptive.Versions.v1_2, \"fontType\", \"Font type\", Adaptive.FontType, false, true);\n    static readonly sizeProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"size\", \"Size\", Adaptive.TextSize, false, true);\n    static readonly weightProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"weight\", \"Weight\", Adaptive.TextWeight, false, true);\n    static readonly colorProperty = new EnumPropertyEditor(Adaptive.Versions.v1_0, \"color\", \"Color\", Adaptive.TextColor, false, true);\n    static readonly subtleProperty = new NullableBooleanPropertyEditor(Adaptive.Versions.v1_0, \"isSubtle\", \"Subtle\");\n    static readonly styleProperty = new ChoicePropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"style\",\n        \"Base style\",\n        [\n            { targetVersion: Adaptive.Versions.v1_5, name: \"Default\", value: \"default\" },\n            { targetVersion: Adaptive.Versions.v1_5, name: \"Heading\", value: \"heading\" },\n            { targetVersion: Adaptive.Versions.v1_5, name: \"Column header\", value: \"columnHeader\" }\n        ],\n        false,\n        true);\n\n    protected createInplaceEditor(): DesignerPeerInplaceEditor {\n        return new TextBlockPeerInplaceEditor(this.cardElement);\n    }\n\n    protected internalGetTreeItemText(): string {\n        return this.cardElement.text;\n    }\n\n    protected internalAddCommands(context: DesignContext, commands: Array<PeerCommand>) {\n        super.internalAddCommands(context, commands);\n\n        if (context.dataStructure) {\n            commands.push(\n                new PeerCommand(\n                    {\n                        name: \"Bind...\",\n                        alwaysShowName: true,\n                        toolTip: \"Select a data field to bind this TextBlock to.\",\n                        execute: (command: PeerCommand, clickedElement: HTMLElement) => {\n                            let fieldPicker = new FieldPicker(context.dataStructure);\n                            fieldPicker.onClose = (sender, wasCancelled) => {\n                                if (!wasCancelled) {\n                                    this.cardElement.text = fieldPicker.selectedField.asExpression();\n\n                                    this.changed(true);\n                                }\n                            }\n                            fieldPicker.popup(clickedElement);\n                        }\n                    })\n            );\n        }\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            TextBlockPeer.textProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            TextBlockPeer.wrapProperty,\n            TextBlockPeer.maxLinesProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.StyleCategory,\n            TextBlockPeer.styleProperty,\n            TextBlockPeer.fontTypeProperty,\n            TextBlockPeer.sizeProperty,\n            TextBlockPeer.weightProperty,\n            TextBlockPeer.colorProperty,\n            TextBlockPeer.subtleProperty);\n    }\n\n    getToolTip(): string {\n        return \"Double click to edit\";\n    }\n\n    initializeCardElement() {\n        if (!this.cardElement.text || this.cardElement.text == \"\") {\n            this.cardElement.text = \"New TextBlock\";\n        }\n\n        this.cardElement.wrap = true;\n    }\n}\n\nexport class RichTextBlockPeer extends TypedCardElementPeer<Adaptive.RichTextBlock> {\n    protected internalGetTreeItemText(): string {\n        return this.cardElement.asString();\n    }\n\n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            new CustomPropertySheetEntry(\n                \"*\",\n                (context: PropertySheetContext) => {\n                    let infoTextBlock = new Adaptive.TextBlock();\n                    infoTextBlock.text = \"Use the **Card Payload Editor** to edit the text of this RichTextBlock element.\";\n                    infoTextBlock.wrap = true;\n                    infoTextBlock.spacing = Adaptive.Spacing.Large;\n                    infoTextBlock.separator = true;\n                    infoTextBlock.horizontalAlignment = Adaptive.HorizontalAlignment.Center;\n\n                    return infoTextBlock;\n                }\n            )\n        );\n    }\n\n    initializeCardElement() {\n        let textRun = new Adaptive.TextRun();\n        textRun.text = \"New RichTextBlock\";\n\n        this.cardElement.addInline(textRun);\n    }\n}\n\nexport class TableCellPeer extends ContainerPeer {\n    canBeRemoved(): boolean {\n        return false;\n    }\n\n    isDraggable(): boolean {\n        return false;\n    }\n}\n\nexport class TableRowPeer extends TypedCardElementPeer<Adaptive.TableRow> {\n    static readonly horizontalCellContentAlignmentProperty = new EnumPropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"horizontalCellContentAlignment\",\n        \"Horizontal cell content alignment\",\n        Adaptive.HorizontalAlignment,\n        false,\n        true);\n\n    static readonly verticalCellContentAlignmentProperty = new EnumPropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"verticalCellContentAlignment\",\n        \"Vertical cell content alignment\",\n        Adaptive.VerticalAlignment,\n        false,\n        true);\n\n    protected isContainer(): boolean {\n        return true;\n    }\n\n    isDraggable(): boolean {\n        return false;\n    }\n    \n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            PropertySheetCategory.StyleCategory,\n            ContainerPeer.styleProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            TableRowPeer.horizontalCellContentAlignmentProperty,\n            TableRowPeer.verticalCellContentAlignmentProperty);\n    }\n\n    get isTreeItemExpandedByDefault(): boolean {\n        return false;\n    }\n}\n\nclass TableColumnsPropertyEditor extends PropertySheetEntry {\n    private columnsChanged(context: PropertySheetContext, refreshPropertySheet: boolean) {\n        context.peer.updateChildren();\n        context.peer.changed(refreshPropertySheet);\n    }\n\n    render(context: PropertySheetContext): Adaptive.CardElement {\n        let result = new Adaptive.Container();\n        let peer = context.peer as TablePeer;\n\n        if (peer.cardElement.getColumnCount() === 0) {\n            let messageTextBlock = new Adaptive.TextBlock();\n            messageTextBlock.spacing = Adaptive.Spacing.Small;\n            messageTextBlock.text = \"No column has been defined\";\n\n            result.addItem(messageTextBlock);\n        }\n        else {\n            for (let i = 0; i < peer.cardElement.getColumnCount(); i++) {\n                let columnDefinition = peer.cardElement.getColumnAt(i);\n\n                let widthInput = new Adaptive.NumberInput();\n                widthInput.placeholder = \"Width\";\n                widthInput.min = 0;\n                widthInput.defaultValue = columnDefinition.width.physicalSize;\n                widthInput.onValueChanged = (sender) => {\n                    columnDefinition.width.physicalSize = sender.value;\n\n                    this.columnsChanged(context, false);\n                };\n\n                let widthColumn = new Adaptive.Column(\"stretch\");\n                widthColumn.addItem(widthInput);\n\n                let unitInput = new Adaptive.ChoiceSetInput();\n                unitInput.placeholder = \"Unit\";\n                unitInput.choices.push(\n                    new Adaptive.Choice(\"Pixels\", Adaptive.SizeUnit.Pixel.toString()),\n                    new Adaptive.Choice(\"Weight\", Adaptive.SizeUnit.Weight.toString())\n                );\n                unitInput.defaultValue = columnDefinition.width.unit.toString();\n                unitInput.onValueChanged = (sender) => {\n                    columnDefinition.width.unit = parseInt(sender.value);\n\n                    this.columnsChanged(context, false);\n                };\n\n                let unitColumn = new Adaptive.Column(\"stretch\");\n                unitColumn.spacing = Adaptive.Spacing.Small;\n                unitColumn.addItem(unitInput);\n\n                let removeAction = new Adaptive.SubmitAction();\n                removeAction.title = \"X\";\n                removeAction.tooltip = \"Remove\";\n                removeAction.onExecute = (sender) => {\n                    peer.cardElement.removeColumn(columnDefinition);\n\n                    this.columnsChanged(context, true);\n                }\n\n                let actionSet = new Adaptive.ActionSet();\n                actionSet.addAction(removeAction);\n\n                let removeActionColumn = new Adaptive.Column(\"auto\");\n                removeActionColumn.spacing = Adaptive.Spacing.Small;\n                removeActionColumn.addItem(actionSet);\n\n                let columnSet = new Adaptive.ColumnSet();\n                columnSet.spacing = Adaptive.Spacing.Small;\n                columnSet.addColumn(widthColumn);\n                columnSet.addColumn(unitColumn);\n                columnSet.addColumn(removeActionColumn);\n\n                result.addItem(columnSet);\n            }\n        }\n\n        let addAction = new Adaptive.SubmitAction();\n        addAction.title = \"Add a column\";\n        addAction.onExecute = (sender) => {\n            peer.cardElement.addColumn(new Adaptive.TableColumnDefinition());\n\n            this.columnsChanged(context, true);\n        }\n\n        let actionSet = new Adaptive.ActionSet();\n        actionSet.spacing = Adaptive.Spacing.Small;\n        actionSet.addAction(addAction);\n\n        result.addItem(actionSet);\n\n        return result;\n    }\n}\n\nexport class TablePeer extends TypedCardElementPeer<Adaptive.Table> {\n    static readonly firstRowAsHeadersProperty = new BooleanPropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"firstRowAsHeaders\",\n        \"First row as headers\");\n\n    static readonly cellSpacingProperty = new NumberPropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"cellSpacing\",\n        \"Cell spacing (in pixels)\");\n\n    static readonly showGridLinesProperty = new BooleanPropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"showGridLines\",\n        \"Grid lines\");\n\n    static readonly gridStyleProperty = new ContainerStylePropertyEditor(Adaptive.Versions.v1_5, \"gridStyle\", \"Grid style\");\n\n    static readonly horizontalCellContentAlignmentProperty = new EnumPropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"horizontalCellContentAlignment\",\n        \"Horizontal cell content alignment\",\n        Adaptive.HorizontalAlignment,\n        false,\n        true);\n\n    static readonly verticalCellContentAlignmentProperty = new EnumPropertyEditor(\n        Adaptive.Versions.v1_5,\n        \"verticalCellContentAlignment\",\n        \"Vertical cell content alignment\",\n        Adaptive.VerticalAlignment,\n        false,\n        true);\n\n    static readonly columnsProperty = new TableColumnsPropertyEditor(Adaptive.Versions.v1_5);\n\n    protected isContainer(): boolean {\n        return true;\n    }\n\n    protected internalAddCommands(context: DesignContext, commands: Array<PeerCommand>) {\n        super.internalAddCommands(context, commands);\n\n        commands.push(\n            new PeerCommand(\n                {\n                    name: \"Add a row\",\n                    isPromotable: false,\n                    execute: (command: PeerCommand, clickedElement: HTMLElement) => {\n                        let row = new Adaptive.TableRow();\n\n                        this.cardElement.addRow(row);\n\n                        this.insertChild(CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(this.designerSurface, this, row));\n                        this.updateChildren();\n                    }\n                })\n        );\n    }\n    \n    initializeCardElement() {\n        super.initializeCardElement();\n\n        this.cardElement.addColumn(new Adaptive.TableColumnDefinition());\n        this.cardElement.addColumn(new Adaptive.TableColumnDefinition());\n        this.cardElement.addColumn(new Adaptive.TableColumnDefinition());\n\n        this.cardElement.addRow(new Adaptive.TableRow());\n        this.cardElement.addRow(new Adaptive.TableRow());\n        this.cardElement.addRow(new Adaptive.TableRow());\n    }\n    \n    populatePropertySheet(propertySheet: PropertySheet, defaultCategory: string = PropertySheetCategory.DefaultCategory) {\n        super.populatePropertySheet(propertySheet, defaultCategory);\n\n        propertySheet.add(\n            defaultCategory,\n            TablePeer.firstRowAsHeadersProperty);\n\n        propertySheet.add(\n            \"Columns\",\n            TablePeer.columnsProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.StyleCategory,\n            TablePeer.showGridLinesProperty,\n            TablePeer.gridStyleProperty);\n\n        propertySheet.add(\n            PropertySheetCategory.LayoutCategory,\n            TablePeer.cellSpacingProperty,\n            TablePeer.horizontalCellContentAlignmentProperty,\n            TablePeer.verticalCellContentAlignmentProperty);\n    }\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport { Constants } from \"adaptivecards-controls\";\n\nexport class DialogButton {\n    onClick: (sender: DialogButton) => void;\n\n    constructor(public caption: string) {}\n\n    render(): HTMLElement {\n        let element = document.createElement(\"button\");\n        element.className = \"acd-dialog-button\";\n        element.innerText = this.caption;\n        element.onclick = (e) => {\n            this.clicked();\n        }\n\n        return element;\n    }\n\n    clicked() {\n        if (this.onClick) {\n            this.onClick(this);\n        }\n    }\n}\n\nexport abstract class Dialog {\n    private _overlayElement: HTMLElement;\n    private _isOpen: boolean = false;\n    private _originalFocusedElement: HTMLElement;\n    private _firstFocusableElement: HTMLElement;\n    private _lastFocusableElement: HTMLElement;\n\n    protected abstract renderContent(): HTMLElement;\n\n    onClose: (sender: Dialog) => void = null;\n\n    readonly closeButton: DialogButton;\n    buttons?: DialogButton[];\n\n    title: string;\n    width: string;\n    height: string;\n    // flag to prevent dialog close on overlay element click, default it's set to false, for Pi2Card it will be set to true\n    preventLightDismissal: boolean = false;\n\n    constructor() {\n        this.closeButton = new DialogButton(\"Close\");\n        this.closeButton.onClick = (sender) => {\n            this.close();\n        }\n    }\n\n    open() {\n        if (!this._isOpen) {\n            this._originalFocusedElement = document.activeElement as HTMLElement;\n\n            this._overlayElement = document.createElement(\"div\");\n            this._overlayElement.className = \"acd-dialog-overlay\";\n            this._overlayElement.onclick = (e) => {\n                // clicks on the overlay window should dismiss the dialog\n                if (!this.preventLightDismissal) { this.close(); }\n            };\n\n            let dialogFrameElement = document.createElement(\"div\");\n            dialogFrameElement.className = \"acd-dialog-frame\";\n            dialogFrameElement.style.width = this.width;\n            dialogFrameElement.style.height = this.height;\n            dialogFrameElement.setAttribute(\"aria-modal\", \"true\");\n            dialogFrameElement.setAttribute(\"role\", \"dialog\");\n            dialogFrameElement.setAttribute(\"aria-labelledby\", \"acd-dialog-title-element\");\n            dialogFrameElement.tabIndex = -1;\n\n            dialogFrameElement.onclick = (e) => {\n                // disable click bubbling from the frame element -- otherwise it'll get to the overlay, closing the\n                // dialog unexpectedly\n                if (!this.preventLightDismissal) {\n                    e.cancelBubble = true;\n                    return false;\n                }\n            }\n\n            // keyboard navigation support\n            dialogFrameElement.onkeydown = (e) => {\n                switch (e.key) {\n                    case Constants.keys.tab:\n                        if (e.shiftKey && document.activeElement === this._firstFocusableElement) {\n                            // backwards tab on first element. set focus on last\n                            e.preventDefault();\n                            this._lastFocusableElement.focus();\n                        }\n                        else if (!e.shiftKey && document.activeElement === this._lastFocusableElement) {\n                            // forward tab on last element\n                            e.preventDefault();\n                            this._firstFocusableElement.focus();\n                        }\n                        break;\n\n                    case Constants.keys.escape:\n                        this.close();\n                        e.preventDefault();\n                        e.cancelBubble = true;\n                        break;\n                }\n\n                return !e.cancelBubble;\n            };\n\n            let titleBarElement = document.createElement(\"div\");\n            titleBarElement.className=\"acd-dialog-title-host\";\n\n            let titleElement = document.createElement(\"div\");\n            titleElement.className = \"acd-dialog-title\";\n            titleElement.id = \"acd-dialog-title-element\";\n            titleElement.innerText = this.title;\n            titleElement.setAttribute(\"role\", \"heading\");\n            titleElement.setAttribute(\"aria-level\",\"1\");\n            titleElement.tabIndex = -1;\n\n            let xButton = document.createElement(\"button\");\n            xButton.className = \"acd-icon acd-dialog-titleBar-button acd-icon-remove\";\n            xButton.title = \"Close\";\n            xButton.onclick = (e) => { this.close(); }\n\n            titleBarElement.appendChild(titleElement);\n            titleBarElement.appendChild(xButton);\n\n            let contentElement = this.renderContent();\n            contentElement.style.flex = \"1 1 auto\";\n\n            let buttonBarElement = document.createElement(\"div\");\n            buttonBarElement.className = \"acd-dialog-buttonBar\";\n\n            if (this.buttons?.length > 0) {\n                for (const button of this.buttons) {\n                    buttonBarElement.appendChild(button.render());\n                }\n            }\n\n            buttonBarElement.appendChild(this.closeButton.render());\n\n            dialogFrameElement.appendChild(titleBarElement);\n            dialogFrameElement.appendChild(contentElement);\n            dialogFrameElement.appendChild(buttonBarElement);\n\n            this._overlayElement.appendChild(dialogFrameElement);\n\n            document.body.appendChild(this._overlayElement);\n\n            let focusableElements = dialogFrameElement.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]');\n            this._firstFocusableElement = focusableElements[0] as HTMLElement;\n            this._lastFocusableElement = focusableElements[focusableElements.length-1] as HTMLElement;\n\n            this._firstFocusableElement.focus();\n\n            this._isOpen = true;\n        }\n    }\n\n    close() {\n        if (this._isOpen) {\n            document.body.removeChild(this._overlayElement);\n\n            this._isOpen = false;\n\n            if (this.onClose) {\n                this.onClose(this);\n            }\n            // Removing the focus action on close, it has been handled via onClose method of Dialog consume place.\n            // this._originalFocusedElement.focus();\n            this._originalFocusedElement = null;\n        }\n    }\n}\n","export class Downloader {\n    private _data: string;\n\n    private error() {\n        if (this.onError) {\n            this.onError(this);\n        }\n    }\n\n    private success() {\n        if (this.onSuccess) {\n            this.onSuccess(this);\n        }\n    }\n\n    onError: (sender: Downloader) => void = null;\n    onSuccess: (sender: Downloader) => void = null;\n\n    constructor(readonly url: string) {}\n\n    download() {\n        let request = new XMLHttpRequest();\n        request.onerror = () => {\n            this.error();\n        }\n        request.onload = () => {\n            this._data = request.responseText;\n\n            this.success();\n        };\n\n        try {\n            request.open(\"GET\", this.url, true);\n            request.send();\n        }\n        catch (e) {\n            this.error();\n        }\n    }\n\n    get data(): string {\n        return this._data;\n    }\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport { Constants } from \"adaptivecards-controls\";\nimport { IPoint } from \"./miscellaneous\";\n\nexport const DRAG_THRESHOLD = 10;\n\nexport abstract class DraggableElement {\n    private _renderedElement: HTMLElement;\n    private _isPointerOver: boolean;\n    private _isPointerDown: boolean;\n    private _lastClickedPoint: IPoint;\n    private _dragging: boolean;\n\n    private releasePointerCapture(pointerId: number) {\n        this.getDragSourceElement().releasePointerCapture(pointerId);\n\n        this._isPointerDown = false;\n    }\n\n    protected get isPointerOver(): boolean {\n        return this._isPointerOver;\n    }\n\n    protected set isPointerOver(value: boolean) {\n        if (value != this._isPointerOver) {\n            this._isPointerOver = value;\n\n            this.updateLayout();\n        }\n    }\n\n    protected startDrag() {\n        if (this.isDraggable() && !this.dragging) {\n            this.dragging = true;\n\n            if (this.onStartDrag) {\n                this.onStartDrag(this);\n            }\n        }\n    }\n\n    protected pointerDown(e: PointerEvent) {\n        if (!this._isPointerDown) {\n            this._isPointerDown = true;\n            this._lastClickedPoint = { x: e.offsetX, y: e.offsetY };\n\n            this.getDragSourceElement().setPointerCapture(e.pointerId);\n        }\n    }\n\n    protected pointerUp(e: PointerEvent) {\n        if (this._isPointerDown) {\n            this.releasePointerCapture(e.pointerId);\n\n            this.endDrag();\n        }\n    }\n\n    protected pointerMove(e: PointerEvent) {\n        if (this._isPointerDown) {\n            if (Math.abs(e.offsetX - this._lastClickedPoint.x) >= DRAG_THRESHOLD || Math.abs(e.offsetY - this._lastClickedPoint.y) >= DRAG_THRESHOLD) {\n                this.releasePointerCapture(e.pointerId);\n\n                this.startDrag();\n            }\n        }\n    }\n\n    protected click(e: MouseEvent) {\n        if (this.onClick) {\n            this.onClick(this);\n        }\n    }\n\n    protected doubleClick(e: MouseEvent) {\n        if (this.onDoubleClick) {\n            this.onDoubleClick(this);\n        }\n    }\n\n    protected internalUpdateCssStyles() {\n        // Do nothing in base implementation\n    }\n\n    protected internalUpdateLayout() {\n        // Do nothing in base implementation\n    }\n\n    protected getDragSourceElement(): HTMLElement {\n        return this._renderedElement;\n    }\n\n    protected abstract internalRender(): HTMLElement;\n\n    onStartDrag: (sender: DraggableElement) => void;\n    onEndDrag: (sender: DraggableElement) => void;\n    onClick: (sender: DraggableElement) => void;\n    onDoubleClick: (sender: DraggableElement) => void;\n\n    isDraggable(): boolean {\n        return true;\n    }\n\n    endDrag() {\n        if (this.dragging) {\n            this.dragging = false;\n\n            if (this.onEndDrag) {\n                this.onEndDrag(this);\n            }\n        }\n    }\n\n    updateLayout() {\n        this.internalUpdateCssStyles();\n        this.internalUpdateLayout();\n    }\n\n    render(): HTMLElement {\n        this._renderedElement = this.internalRender();\n\n        let dragSourceElement = this.getDragSourceElement();\n        dragSourceElement.onclick = (e: MouseEvent) => { this.click(e); };\n        dragSourceElement.onkeydown = (e: KeyboardEvent) => {\n            if (e.key === Constants.keys.enter || e.key === Constants.keys.space) {\n                e.preventDefault();\n\n                if (this.onClick) {\n                    this.click(null);\n                }\n                else if (this.onDoubleClick) {\n                    this.doubleClick(null);\n                }\n            }\n        };\n        dragSourceElement.ondblclick = (e: MouseEvent) => { this.doubleClick(e); };\n\n        if (this.isDraggable()) {\n            dragSourceElement.onmousedown = (e: MouseEvent) => { e.preventDefault(); };\n            dragSourceElement.onpointerenter = () => { this.isPointerOver = true; };\n            dragSourceElement.onpointerleave = () => { this.isPointerOver = false; };\n            dragSourceElement.onpointerdown = (e: PointerEvent) => { this.pointerDown(e); };\n            dragSourceElement.onpointerup = (e: PointerEvent) => { this.pointerUp(e); };\n            dragSourceElement.onpointermove = (e: PointerEvent) => { this.pointerMove(e); };\n        }\n\n        return this._renderedElement;\n    }\n\n    focus() {\n        if (this._renderedElement) {\n            this._renderedElement.focus();\n        }\n    }\n\n    get renderedElement(): HTMLElement {\n        return this._renderedElement;\n    }\n\n    get dragging(): boolean {\n        return this._dragging;\n    }\n\n    set dragging(value: boolean) {\n        this._dragging = value;\n\n        this.internalUpdateCssStyles();\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as Controls from \"adaptivecards-controls\";\nimport { FieldDefinition } from \"./data\";\nimport { TreeView } from \"./tree-view\";\nimport { DataTreeItem } from \"./data-treeitem\";\n\nexport class FieldPicker extends Controls.PopupControl {\n    private _selectedField: FieldDefinition;\n    private _treeView: TreeView;\n\n    protected renderContent(): HTMLElement {\n        let element = document.createElement(\"div\");\n        element.className = \"acd-fieldPicker-host\";\n\n        let treeItem = new DataTreeItem(this.dataStructure);\n\n        this._treeView = new TreeView(treeItem);\n\n        this._treeView.onSelectedItemChanged = (sender) => {\n            this._selectedField = (this._treeView.selectedItem as DataTreeItem).field;\n\n            if (this._selectedField) {\n                this.closePopup(false);\n            }\n        };\n\n        element.appendChild(this._treeView.render());\n\n        return element;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    render(rootElementBounds: ClientRect): HTMLElement {\n        const rootElement = super.render(rootElementBounds);\n        rootElement.tabIndex = -1;\n\n        return rootElement;\n    }\n\n    constructor(readonly dataStructure: FieldDefinition) {\n        super();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    focus() {\n        if (this._treeView) {\n            this._treeView.focus();\n        }\n    }\n\n    keyDown(e: KeyboardEvent) {\n        super.keyDown(e);\n\n        // TODO\n    }\n\n    get selectedField(): FieldDefinition {\n        return this._selectedField;\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nexport class FullScreenHandler {\n    private fullScrerenChanged() {\n        if (this.onFullScreenChanged) {\n            this.onFullScreenChanged(this.isFullScreen);\n        }\n    }\n\n    onFullScreenChanged: (isFullScreen: boolean) => void;\n\n    constructor() {\n        let untypedBody = <any>document.body;\n\n        if (typeof untypedBody.onfullscreenchange !== \"undefined\") {\n            untypedBody.onfullscreenchange = () => this.fullScrerenChanged();\n        }\n        else if (typeof untypedBody.onwebkitfullscreenchange !== \"undefined\") {\n            untypedBody.onwebkitfullscreenchange = () => this.fullScrerenChanged();\n        }\n        else if (typeof untypedBody.onwebkitfullscreenchange !== \"undefined\") {\n            untypedBody.onmozfullscreenchange = () => this.fullScrerenChanged();\n        }\n        else if (typeof untypedBody.onwebkitfullscreenchange !== \"undefined\") {\n            untypedBody.MSFullscreenChange = () => this.fullScrerenChanged();\n        }\n    }\n\n    enterFullScreen() {\n        if (!this.isFullScreen) {\n            let untypedBody = <any>document.body;\n\n            if (untypedBody.requestFullscreen) {\n                untypedBody.requestFullscreen();\n            }\n            else if (untypedBody.webkitRequestFullscreen) {\n                untypedBody.webkitRequestFullscreen();\n            }\n            else if (untypedBody.mozRequestFullScreen) {\n                untypedBody.mozRequestFullScreen();\n            }\n            else if (untypedBody.msRequestFullscreen) {\n                untypedBody.msRequestFullscreen();\n            }\n            else {\n                alert(\"Your browser doesn't support fullscreen.\");\n            }\n        }\n    }\n\n    exitFullScreen() {\n        if (this.isFullScreen) {\n            let untypedDocument = <any>document;\n\n            if (untypedDocument.exitFullscreen) {\n                untypedDocument.exitFullscreen();\n            }\n            else if (untypedDocument.webkitExitFullscreen) {\n                untypedDocument.webkitExitFullscreen();\n            }\n            else if (untypedDocument.mozCancelFullScreen) {\n                untypedDocument.mozCancelFullScreen();\n            }\n            else if (untypedDocument.msExitFullscreen) {\n                untypedDocument.msExitFullscreen();\n            }\n        }\n    }\n\n    toggleFullScreen() {\n        if (this.isFullScreen) {\n            this.exitFullScreen();\n        }\n        else {\n            this.enterFullScreen();\n        }\n    }\n\n    get isFullScreen(): boolean {\n        let untypedDocument = <any>document;\n\n        return untypedDocument.fullscreen || untypedDocument.webkitIsFullScreen || untypedDocument.mozFullScreen;\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as Adaptive from \"adaptivecards\";\nimport { Dialog } from \"./dialog\";\n\nexport class HelpDialog extends Dialog {\n    private _renderedElement: HTMLElement;\n\n    private _getShortcutRow(shortcut: string, description: string, isHeader: boolean=false) : HTMLElement {\n        let shortcutText = document.createElement(\"b\");\n        shortcutText.innerText = shortcut;\n        let shortcutCell = document.createElement(isHeader ? \"th\" : \"td\");\n        shortcutCell.style.textAlign = \"left\";\n        shortcutCell.appendChild(shortcutText);\n\n        let descriptionCell = document.createElement(isHeader ? \"th\" : \"td\");\n        descriptionCell.style.textAlign = \"left\";\n        descriptionCell.innerText = description;\n\n        let row = document.createElement(\"tr\");\n        row.appendChild(shortcutCell);\n        row.appendChild(descriptionCell);\n        return row;\n    }\n\n    protected renderContent(): HTMLElement {\n        this._renderedElement = document.createElement(\"div\");\n\n        let cardHeading = document.createElement(\"h1\");\n        cardHeading.innerText = \"Card Payload and Sample Data Editors\";\n        this._renderedElement.appendChild(cardHeading);\n\n        let keyboardHeading = document.createElement(\"h2\");\n        keyboardHeading.innerText = \"Keyboard Shortcuts\";\n        this._renderedElement.appendChild(keyboardHeading);\n\n        let keyboardText = document.createElement(\"div\");\n        keyboardText.innerText = \"These keyboard shortcuts only work when the keyboard focus is within either the card payload or sample data editors\";\n        this._renderedElement.appendChild(keyboardText);\n        this._renderedElement.appendChild(document.createElement(\"br\"));\n\n        let shortcutTable = document.createElement(\"table\");\n        shortcutTable.appendChild(this._getShortcutRow(\"Shortcut\", \"Description\", true));\n        shortcutTable.appendChild(this._getShortcutRow(\"Alt-F1\", \"Show help dialog for editor\"));\n        shortcutTable.appendChild(this._getShortcutRow(\"Ctrl-M\", \"Toggle behavior of TAB key. By default, pressing TAB will insert a TAB character. When toggled, pressing TAB will navigate to the next focusable item.\"));\n\n        this._renderedElement.appendChild(shortcutTable);\n        return this._renderedElement;\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as Adaptive from \"adaptivecards\";\n\nexport interface IPoint {\n\tx: number;\n\ty: number;\n}\n\nexport class Rect {\n\ttop: number;\n\tright: number;\n\tbottom: number;\n\tleft: number;\n\n\tconstructor(top: number = 0, right: number = 0, bottom: number = 0, left: number = 0) {\n\t\tthis.top = top;\n\t\tthis.right = right;\n\t\tthis.bottom = bottom;\n\t\tthis.left = left;\n\t}\n\n\tunion(otherRect: Rect) {\n\t\tthis.top = Math.min(this.top, otherRect.top);\n\t\tthis.left = Math.min(this.left, otherRect.left);\n\t\tthis.bottom = Math.max(this.bottom, otherRect.bottom);\n\t\tthis.right = Math.max(this.right, otherRect.right);\n\t}\n\n\tisInside(point: IPoint): boolean {\n\t\treturn point.x >= this.left && point.x <= this.right && point.y >= this.top && point.y <= this.bottom;\n\t}\n\n\tget width(): number {\n\t\treturn this.right - this.left;\n\t}\n\n\tget height(): number {\n\t\treturn this.bottom - this.top;\n\t}\n}\n\nexport class Utils {\n\tpublic static isAbsoluteUrl(urlString: string): boolean {\n\t\treturn urlString.indexOf('http://') === 0\n\t\t|| urlString.indexOf('https://') === 0;\n\t}\n\n\tpublic static joinPaths(...args: string[]) {\n\t\treturn args.map(\n\t\t\t(part, i) => {\n\t\t\t\tif (!part) {\n\t\t\t\t\tpart = \"\";\n\t\t\t\t}\n\n\t\t\t\tif (i === 0) {\n\t\t\t\t\treturn part.trim().replace(/[\\/]*$/g, '')\n\t\t\t\t} else {\n\t\t\t\t\treturn part.trim().replace(/(^[\\/]*|[\\/]*$)/g, '')\n\t\t\t\t}\n\t\t\t}).filter(x => x.length).join('/')\n\t}\n\n    public static adjustPointForScroll(position: IPoint): IPoint {\n        const firstChild = document.firstElementChild;\n        return {\n            x: position.x + firstChild.scrollLeft,\n            y: position.y + firstChild.scrollTop\n        };\n    }\n}\n\nexport var defaultHostConfig = new Adaptive.HostConfig(\n    {\n        preExpandSingleShowCardAction: true,\n        supportsInteractivity: true,\n        spacing: {\n            small: 10,\n            default: 20,\n            medium: 30,\n            large: 40,\n            extraLarge: 50,\n            padding: 20\n        },\n        separator: {\n            lineThickness: 1,\n            lineColor: \"#EEEEEE\"\n        },\n        textAlign: {\n            right: \"right\"\n        },\n        imageSizes: {\n            small: 40,\n            medium: 80,\n            large: 160\n        },\n        fontStyles: {\n            default: {\n                fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n                fontSizes: {\n                    small: 12,\n                    default: 14,\n                    medium: 17,\n                    large: 21,\n                    extraLarge: 26\n                },\n                fontWeights: {\n                    lighter: 200,\n                    default: 400,\n                    bolder: 600\n                }\n            },\n            monospace: {\n                fontFamily: \"'Courier New', Courier, monospace\",\n                fontSizes: {\n                    small: 12,\n                    default: 14,\n                    medium: 17,\n                    large: 21,\n                    extraLarge: 26\n                },\n                fontWeights: {\n                    lighter: 200,\n                    default: 400,\n                    bolder: 600\n                }\n            }\n        },\n        containerStyles: {\n            default: {\n                backgroundColor: \"#f9f9f9\",\n                foregroundColors: {\n                    default: {\n                        default: \"#333333\",\n                        subtle: \"#EE333333\"\n                    },\n                    accent: {\n                        default: \"#2E89FC\",\n                        subtle: \"#882E89FC\"\n                    },\n                    attention: {\n                        default: \"#cc3300\",\n                        subtle: \"#DDcc3300\"\n                    },\n                    good: {\n                        default: \"#028A02\",\n                        subtle: \"#DD027502\"\n                    },\n                    warning: {\n                        default: \"#e69500\",\n                        subtle: \"#DDe69500\"\n                    }\n                }\n            },\n            emphasis: {\n                backgroundColor: \"#08000000\",\n                foregroundColors: {\n                    default: {\n                        default: \"#333333\",\n                        subtle: \"#EE333333\"\n                    },\n                    accent: {\n                        default: \"#2E89FC\",\n                        subtle: \"#882E89FC\"\n                    },\n                    attention: {\n                        default: \"#cc3300\",\n                        subtle: \"#DDcc3300\"\n                    },\n                    good: {\n                        default: \"#028A02\",\n                        subtle: \"#DD027502\"\n                    },\n                    warning: {\n                        default: \"#e69500\",\n                        subtle: \"#DDe69500\"\n                    }\n                }\n            },\n            accent: {\n                backgroundColor: \"#C7DEF9\",\n                foregroundColors: {\n                    default: {\n                        default: \"#333333\",\n                        subtle: \"#EE333333\"\n                    },\n                    dark: {\n                        default: \"#000000\",\n                        subtle: \"#66000000\"\n                    },\n                    light: {\n                        default: \"#FFFFFF\",\n                        subtle: \"#33000000\"\n                    },\n                    accent: {\n                        default: \"#2E89FC\",\n                        subtle: \"#882E89FC\"\n                    },\n                    attention: {\n                        default: \"#cc3300\",\n                        subtle: \"#DDcc3300\"\n                    },\n                    good: {\n                        default: \"#028A02\",\n                        subtle: \"#DD027502\"\n                    },\n                    warning: {\n                        default: \"#e69500\",\n                        subtle: \"#DDe69500\"\n                    }\n                }\n            },\n            good: {\n                backgroundColor: \"#CCFFCC\",\n                foregroundColors: {\n                    default: {\n                        default: \"#333333\",\n                        subtle: \"#EE333333\"\n                    },\n                    dark: {\n                        default: \"#000000\",\n                        subtle: \"#66000000\"\n                    },\n                    light: {\n                        default: \"#FFFFFF\",\n                        subtle: \"#33000000\"\n                    },\n                    accent: {\n                        default: \"#2E89FC\",\n                        subtle: \"#882E89FC\"\n                    },\n                    attention: {\n                        default: \"#cc3300\",\n                        subtle: \"#DDcc3300\"\n                    },\n                    good: {\n                        default: \"#028A02\",\n                        subtle: \"#DD027502\"\n                    },\n                    warning: {\n                        default: \"#e69500\",\n                        subtle: \"#DDe69500\"\n                    }\n                }\n            },\n            attention: {\n                backgroundColor: \"#FFC5B2\",\n                foregroundColors: {\n                    default: {\n                        default: \"#333333\",\n                        subtle: \"#EE333333\"\n                    },\n                    dark: {\n                        default: \"#000000\",\n                        subtle: \"#66000000\"\n                    },\n                    light: {\n                        default: \"#FFFFFF\",\n                        subtle: \"#33000000\"\n                    },\n                    accent: {\n                        default: \"#2E89FC\",\n                        subtle: \"#882E89FC\"\n                    },\n                    attention: {\n                        default: \"#cc3300\",\n                        subtle: \"#DDcc3300\"\n                    },\n                    good: {\n                        default: \"#028A02\",\n                        subtle: \"#DD027502\"\n                    },\n                    warning: {\n                        default: \"#e69500\",\n                        subtle: \"#DDe69500\"\n                    }\n                }\n            },\n            warning: {\n                backgroundColor: \"#FFE2B2\",\n                foregroundColors: {\n                    default: {\n                        default: \"#333333\",\n                        subtle: \"#EE333333\"\n                    },\n                    dark: {\n                        default: \"#000000\",\n                        subtle: \"#66000000\"\n                    },\n                    light: {\n                        default: \"#FFFFFF\",\n                        subtle: \"#33000000\"\n                    },\n                    accent: {\n                        default: \"#2E89FC\",\n                        subtle: \"#882E89FC\"\n                    },\n                    attention: {\n                        default: \"#cc3300\",\n                        subtle: \"#DDcc3300\"\n                    },\n                    good: {\n                        default: \"#028A02\",\n                        subtle: \"#DD027502\"\n                    },\n                    warning: {\n                        default: \"#e69500\",\n                        subtle: \"#DDe69500\"\n                    }\n                }\n            }\n        },\n        actions: {\n            maxActions: 5,\n            spacing: Adaptive.Spacing.Default,\n            buttonSpacing: 10,\n            showCard: {\n                actionMode: Adaptive.ShowCardActionMode.Inline,\n                inlineTopMargin: 16\n            },\n            actionsOrientation: Adaptive.Orientation.Horizontal,\n            actionAlignment: Adaptive.ActionAlignment.Left\n        },\n        adaptiveCard: {\n            allowCustomStyle: true\n        },\n        imageSet: {\n            imageSize: Adaptive.Size.Medium,\n            maxImageHeight: 100\n        },\n        factSet: {\n            title: {\n                color: Adaptive.TextColor.Default,\n                size: Adaptive.TextSize.Default,\n                isSubtle: false,\n                weight: Adaptive.TextWeight.Bolder,\n                wrap: true,\n                maxWidth: 150,\n            },\n            value: {\n                color: Adaptive.TextColor.Default,\n                size: Adaptive.TextSize.Default,\n                isSubtle: false,\n                weight: Adaptive.TextWeight.Default,\n                wrap: true,\n            },\n            spacing: 10\n        }\n    }\n);\n\ndefaultHostConfig.cssClassNamePrefix = \"default\";\n","import { Dialog } from \"./dialog\";\nimport { Pic2Card\t } from \"./pic2card\";\nexport class FetchManager {\n    private pic2cardService = Pic2Card.pic2cardService !== '' ? Pic2Card.pic2cardService : process.env.PIC_TO_CARD_PREDICTION_API;\n    private headers = {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n    };\n\n    async getSampleImages() {\n        const option = {\n            method: \"GET\",\n            headers: this.headers,\n        };\n        try {\n            const sampleImages = await fetch(\n                this.pic2cardService + \"/get_card_templates\",\n                option\n            );\n            return await sampleImages.json();\n        } catch (err) {\n            console.log(err.message);\n        }\n    }\n\n    async getPredictedData(imageContent, isTemplateBindingEnabled) {\n        const options = {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify({\n                image: imageContent.split(\",\")[1],\n            }),\n        };\n        try {\n            const endPoint = isTemplateBindingEnabled\n                ? \"/predict_json?format=template\"\n                : \"/predict_json\";\n            const picResponse = await fetch(\n                this.pic2cardService + endPoint,\n                options\n            );\n            return await picResponse.json();\n        } catch (err) {\n            console.log(err.message);\n        }\n    }\n}\n\nexport class OpenImageDialog extends Dialog {\n    private _renderedElement: HTMLElement;\n    private _imageElement: HTMLElement;\n    private _buttonContainer: HTMLElement;\n    private _inputTemplate: HTMLElement;\n    private _uploadedImage: string =\n        \"data:image/png;base64,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\";\n    private _predictedCardJSON: predictedCardJSON;\n    private fetchManager: FetchManager;\n    private isTemplateOptionChecked: boolean = false;\n    private allowedImageSize = 2; // In MB\n\n    constructor() {\n        super();\n        this.fetchManager = new FetchManager();\n    }\n\n    private setContent(element: HTMLElement) {\n        this._renderedElement.appendChild(element);\n    }\n\n    private removeContent(element: HTMLElement) {\n        this._renderedElement.removeChild(element);\n    }\n\n    private renderTitle(): HTMLElement {\n        const title = document.createElement(\"div\");\n        title.className = \"acd-image-title\";\n        title.innerText = \"Upload your own card design\";\n        return title;\n    }\n\n    private renderTitleContent(): HTMLElement {\n        const content = document.createElement(\"div\");\n        content.className = \"acd-image-title-content\";\n        content.innerText =\n            \"Design your card and upload it as a png or jpeg, and watch it magically convert to a functioning Adaptive Card\";\n        return content;\n    }\n\n    private renderUploadedImage(): HTMLElement {\n        this._imageElement = document.createElement(\"img\");\n        this._imageElement.className = \"acd-image-placeholder\";\n        this._imageElement.setAttribute(\"src\", this._uploadedImage);\n        return this._imageElement;\n    }\n\n    private renderUploadButton(type: string): HTMLElement {\n        const privacyLink = Pic2Card.privacyLink;\n        this._buttonContainer = document.createElement(\"div\");\n        this._buttonContainer.className = \"acd-upload-button-container\";\n        const fileNote = document.createElement(\"div\");\n        fileNote.className = \"acd-image-file-note\";\n        fileNote.innerHTML =\n            `By using the upload feature you agree to our <a href=${privacyLink} target='_blank'><span class='link'> image usage policy</span></a>`;\n        type !== \"file\" &&\n            this._buttonContainer.appendChild(this.renderCheckbox());\n        this._buttonContainer.appendChild(\n            type === \"file\"\n                ? this.createFileButton()\n                : this.createActionButton()\n        );\n        this._buttonContainer.appendChild(fileNote);\n        return this._buttonContainer;\n    }\n\n    private renderCheckbox() {\n        const checkboxContainer = document.createElement(\"div\");\n        checkboxContainer.className = \"acd-checkbox-container\";\n        const inputElement = <HTMLInputElement>document.createElement(\"INPUT\");\n        inputElement.className = \"acd-checkbox-element\";\n        inputElement.setAttribute(\"id\", \"template-option\");\n        inputElement.setAttribute(\"type\", \"checkbox\");\n        inputElement.onclick = () => {\n            const checkbox = document.getElementById(\n                \"template-option\"\n            ) as HTMLInputElement;\n            this.isTemplateOptionChecked = checkbox.checked ? true : false;\n        };\n        inputElement.onfocus = () => {\n            const customCheckbox = document.getElementById(\n                \"acd-custom-checkbox-item\"\n            ) as HTMLInputElement;\n            customCheckbox.className = \"acd-custom-checkbox acd-custom-checkbox-foucs\"\n        };\n        inputElement.addEventListener(\"focusout\", () => {\n            const customCheckbox = document.getElementById(\n                \"acd-custom-checkbox-item\"\n            ) as HTMLInputElement;\n            customCheckbox.className = \"acd-custom-checkbox\"\n        });\n        const customCheckboxElement = <HTMLInputElement>(\n            document.createElement(\"SPAN\")\n        );\n        customCheckboxElement.id = \"acd-custom-checkbox-item\";\n        customCheckboxElement.className = \"acd-custom-checkbox\";\n        checkboxContainer.appendChild(inputElement);\n        checkboxContainer.appendChild(customCheckboxElement);\n        checkboxContainer.appendChild(this.renderLabelText());\n        return checkboxContainer;\n    }\n\n    private renderLabelText() {\n        const labelElement = <HTMLInputElement>document.createElement(\"LABEL\");\n        labelElement.className = \"acd-label-element\";\n        labelElement.setAttribute(\"for\", \"template-option\");\n        labelElement.innerHTML =\n            \"Create Adaptive Card with <a href='https://aka.ms/ACTemplating' target='_blank'><span class='link'>template bindings</span></a> and sample data\";\n        return labelElement;\n    }\n\n    private checkFileSize(file: File) {\n        const filesize = parseInt((file.size / 1024 / 1024).toFixed(4)); // MB\n        return filesize < this.allowedImageSize;\n    }\n\n    private createFileButton() {\n        const inputElement = <HTMLInputElement>document.createElement(\"INPUT\");\n        inputElement.className = \"acd-file-type\";\n        inputElement.setAttribute(\"type\", \"file\");\n        inputElement.setAttribute(\"button-name\", \"Browse File\");\n        inputElement.setAttribute(\"accept\", \"image/*\");\n        inputElement.setAttribute(\"aria-label\", \"Browse File\");\n        inputElement.onchange = () => {\n            if (this.checkFileSize(inputElement.files[0])) {\n                const reader = new FileReader();\n                reader.readAsDataURL(inputElement.files[0]);\n                reader.onload = () => this.renderImage(reader.result as string, inputElement.files[0].name);\n                reader.onerror = (error) => console.log(error);\n            } else {\n                this._inputTemplate.removeChild(this._buttonContainer);\n                this._inputTemplate.appendChild(\n                    this.renderUploadButton(\"file\")\n                );\n                this.generateErrorText(\n                    \"Invalid file size. Try image under 2 MB\"\n                );\n                this._uploadedImage =\n                    \"data:image/png;base64,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\";\n                this._imageElement.setAttribute(\"src\", this._uploadedImage);\n            }\n        };\n\n        return inputElement;\n    }\n\n    private generateErrorText(text: string) {\n        const errorContent = document.createElement(\"div\");\n        errorContent.setAttribute(\"role\", \"status\");\n        errorContent.className = \"acd-error-text\";\n        errorContent.innerText = text;\n        this._buttonContainer.appendChild(errorContent);\n    }\n\n    private onCardFailure(spinnerElement: HTMLElement) {\n        this.removeContent(spinnerElement);\n        this._inputTemplate.removeChild(this._buttonContainer);\n        let uploadButton = this.renderUploadButton(\"file\");\n        this._inputTemplate.appendChild(uploadButton);\n        this.generateErrorText(\"Failed to generate card for selected Image\");\n        uploadButton.focus();\n    }\n\n    createActionButton() {\n        const uploadButton = document.createElement(\"INPUT\");\n        uploadButton.className = \"acd-card-button\";\n        uploadButton.setAttribute(\"type\", \"BUTTON\");\n        uploadButton.setAttribute(\"button-name\", \"Convert to Adaptive Card\");\n        uploadButton.setAttribute(\"value\", \"Convert to Adaptive Card\");\n        uploadButton.onclick = () => {\n            uploadButton.setAttribute(\"aria-label\", \"Conversion to Adaptive card button pressed. Adaptive Card conversion in Progress\");\n            let spinnerElement = this.loadSpinner();\n            this.setContent(spinnerElement);\n            spinnerElement.focus();\n            this.fetchManager\n                .getPredictedData(\n                    this._uploadedImage,\n                    this.isTemplateOptionChecked\n                )\n                .then((res) => {\n                    if (!res || res.error) {\n                        this.onCardFailure(spinnerElement);\n                    } else {\n                        this._predictedCardJSON = res.card_json;\n                        this.close();\n                    }\n                });\n        };\n\n        return uploadButton;\n    }\n\n    private loadSpinner() {\n        let spinnerHostElement = document.createElement(\"div\");\n        spinnerHostElement.className = \"acd-spinner-host\";\n        let spinnerElement = document.createElement(\"div\");\n        spinnerElement.className = \"acd-spinner acd-image-spinner\";\n        let spinnerText = document.createElement(\"div\");\n        spinnerText.setAttribute(\"role\", \"status\");\n        spinnerText.className = \"acd-conversion-text\";\n        spinnerText.innerText = \"Adaptive Card conversion in progress\";\n        spinnerHostElement.appendChild(spinnerElement);\n        spinnerHostElement.appendChild(spinnerText);\n        return spinnerHostElement;\n    }\n\n    private renderImage(imageContent: string, imageName: string) {\n        this._imageElement.setAttribute(\"src\", imageContent);\n        this._imageElement.setAttribute(\"alt\", imageName);\n        this._uploadedImage = imageContent;\n        this._inputTemplate.removeChild(this._buttonContainer);\n        this._inputTemplate.appendChild(this.renderUploadButton(\"action\"));\n    }\n\n    private renderUploadControl(): HTMLElement {\n        this._inputTemplate = document.createElement(\"div\");\n        this._inputTemplate.className = \"acd-upload-control\";\n        this._inputTemplate.appendChild(this.renderUploadedImage());\n        this._inputTemplate.appendChild(this.renderUploadButton(\"file\"));\n        return this._inputTemplate;\n    }\n\n    private renderUploadContainer(): HTMLElement {\n        const uploadTemplate = document.createElement(\"div\");\n        uploadTemplate.className = \"acd-image-file-container\";\n        uploadTemplate.appendChild(this.renderUploadControl());\n        return uploadTemplate;\n    }\n\n    private renderImageContainer(): HTMLElement {\n        let template = document.createElement(\"div\");\n        template.className = \"acd-image-upload-container\";\n        template.appendChild(this.renderTitle());\n        template.appendChild(this.renderTitleContent());\n        template.appendChild(this.renderUploadContainer());\n        return template;\n    }\n\n    private renderSampleTemplate() {\n        let sampleImageTemplate = document.createElement(\"div\");\n        sampleImageTemplate.id = \"acd-sample-images\";\n        sampleImageTemplate.tabIndex = 0;\n        sampleImageTemplate.className = \"acd-sample-image-container\";\n        sampleImageTemplate.style.flexDirection = \"column\";\n        let spinnerElement = document.createElement(\"div\");\n        spinnerElement.className = \"acd-spinner\";\n        spinnerElement.style.width = \"28px\";\n        spinnerElement.style.height = \"28px\";\n        const message = document.createElement(\"div\");\n        message.className = \"acd-dialog-message\";\n        message.innerText = \"Loading Sample Images...\";\n        message.style.marginTop = \"10px\";\n        sampleImageTemplate.appendChild(spinnerElement);\n        sampleImageTemplate.appendChild(message);\n\n        this.fetchManager.getSampleImages().then((res) => {\n            if (res) {\n                const imageTitle = document.createElement(\"div\");\n                imageTitle.innerText = \"Choose from our Sample Images\";\n                imageTitle.className = \"acd-image-title sample-info-text\";\n                sampleImageTemplate.style.flexDirection = \"row\";\n                sampleImageTemplate.removeChild(spinnerElement);\n                sampleImageTemplate.removeChild(message);\n                sampleImageTemplate.appendChild(imageTitle);\n                const imageContainer = document.createElement(\"div\");\n                imageContainer.className = \"acd-sample-list\";\n                imageContainer.setAttribute(\"role\", \"list\");\n                res.templates.map((template, index) => {\n                    let sampleImage = new ImageItem(template, index+1);\n                    sampleImage.onClick = (selectedImage: string, imageName: string) => {\n                        this.renderImage(selectedImage, imageName);\n                    };\n                    imageContainer.appendChild(sampleImage.render());\n                });\n                sampleImageTemplate.appendChild(imageContainer);\n                let firstChild = imageContainer.firstElementChild as HTMLElement;\n                firstChild.focus();\n            } else {\n                const errorElement = document.createElement(\"div\");\n                errorElement.innerText = \"Failed to reach pic2card service\";\n                errorElement.className = \"acd-image-title error-info\";\n                errorElement.setAttribute(\"role\", \"status\");\n                sampleImageTemplate.removeChild(message);\n                sampleImageTemplate.removeChild(spinnerElement);\n                sampleImageTemplate.appendChild(errorElement);\n            }\n        });\n        return sampleImageTemplate;\n    }\n\n    protected renderContent(): HTMLElement {\n        this._renderedElement = document.createElement(\"div\");\n        this._renderedElement.className = \"acd-pic2card-container\";\n        const poweredByContainer = document.createElement(\"div\");\n        poweredByContainer.className = \"acd-poweredby-title\";\n        poweredByContainer.innerHTML =\n            \"Powered By <a class='poweredby-link' href='https://www.bigthinkcode.com/' target='_blank'><span class='link'>BigThinkCode</span></a>\";\n        const container = document.createElement(\"div\");\n        container.className = \"acd-sample-container\";\n\n        container.appendChild(this.renderImageContainer());\n        container.appendChild(this.renderSampleTemplate());\n        this.setContent(poweredByContainer);\n        this.setContent(container);\n\n        return this._renderedElement;\n    }\n\n    get predictedCardJSON(): predictedCardJSON {\n        return this._predictedCardJSON;\n    }\n}\n\nexport class ImageItem {\n    constructor(readonly template: string, readonly itemIndex: number) {}\n    onClick: (template: string, sampleImageName: string) => void;\n\n    render(): HTMLElement {\n        const sampleImageName = `Sample Image ${this.itemIndex}`;\n        const imagePlaceholder = <HTMLImageElement>(\n            document.createElement(\"img\")\n        );\n        imagePlaceholder.className = \"acd-sample-image\";\n        imagePlaceholder.tabIndex = 0;\n        imagePlaceholder.setAttribute(\"role\", \"listitem\");\n        imagePlaceholder.setAttribute(\"alt\", sampleImageName);\n        imagePlaceholder.setAttribute(\n            \"src\",\n            \"data:image/png;base64,\" + this.template\n        );\n        imagePlaceholder.onclick = (event) => {\n            this.onClick((event.target as HTMLImageElement).src, sampleImageName);\n            imagePlaceholder.setAttribute(\"alt\", `${sampleImageName} selected`);\n        };\n        imagePlaceholder.onfocus = () => {\n            imagePlaceholder.setAttribute(\"alt\", sampleImageName);\n        }\n        imagePlaceholder.onkeydown = (event) => {\n            if (event.code === \"Enter\") {\n                this.onClick((event.target as HTMLImageElement).src, sampleImageName);\n                imagePlaceholder.setAttribute(\"alt\", `${sampleImageName} selected`);\n            }\n        }\n        return imagePlaceholder;\n    }\n}\nexport interface predictedCardJSON {\n    card: {};\n    data: {};\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport * as Adaptive from \"adaptivecards\";\nimport * as monaco from \"monaco-editor\";\nimport { Dialog, DialogButton } from \"./dialog\";\nimport { CardData } from \"./open-sample-dialog\";\nimport { JSONSchemaCard } from \"adaptivecards-templating\";\n\nexport class OpenJsonSchemaDialog extends Dialog {\n    private _output: CardData;\n    private _previewContainer: HTMLElement;\n    private _previewElement: HTMLElement;\n    private _editor: monaco.editor.IStandaloneCodeEditor;\n\n    readonly submitButton: DialogButton;\n\n    constructor() {\n        super();\n\n        this.submitButton = new DialogButton(\"Create\");\n        this.submitButton.onClick = (sender) => {\n            this.close();\n        }\n        this.buttons = [this.submitButton];\n    }\n\n    open() {\n        super.open();\n        this._editor.layout();\n    }\n\n    private renderPreview(): HTMLElement {\n        const renderedElement = document.createElement(\"div\");\n        renderedElement.className = \"acd-open-code-dialog-preview\";\n\n        const card = new Adaptive.AdaptiveCard();\n\n        if (this.output?.cardPayload) {\n            try {\n                const cardData = JSON.parse(this.output.cardPayload);\n                card.parse(cardData);\n            } catch (e) {\n                console.error(e);\n            }\n        } else {\n            card.parse({\n                \"type\": \"AdaptiveCard\",\n                \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n                \"version\": \"1.0\",\n                \"body\": [\n                    {\n                        \"type\": \"TextBlock\",\n                        \"text\": \"Input JSON Schema to create a card!\",\n                        \"wrap\": true,\n                        \"size\": \"Large\"\n                    }\n                ]\n            })\n        }\n\n        card.render();\n        card.renderedElement.style.width = \"100%\";\n\n        renderedElement.appendChild(card.renderedElement);\n\n        return renderedElement\n    }\n\n    private refreshPreview() {\n        this._previewContainer.removeChild(this._previewElement);\n        this._previewElement = this.renderPreview();\n        this._previewContainer.appendChild(this._previewElement);\n    }\n\n    private renderEditor(): HTMLElement {\n        const renderedElement = document.createElement(\"div\");\n        renderedElement.className = \"acd-open-code-dialog-editor\";\n\n        const monaco = window[\"monaco\"];\n        this._editor = monaco.editor.create(\n            renderedElement,\n            {\n                folding: true,\n                fontSize: 13.5,\n                language: 'json',\n            }\n        );\n        this._editor.layout();\n\n        this._editor.onDidChangeModelContent(() => {\n            try {\n                const model = this._editor.getValue();\n                const json = JSON.parse(model);\n\n                const card = JSONSchemaCard(json);\n                this._output = {\n                    cardPayload: JSON.stringify(card),\n                };\n\n                this.refreshPreview();\n            } catch (e) {\n                console.error(e)\n            }\n        });\n\n        return renderedElement\n    }\n\n    protected renderContent(): HTMLElement {\n        const renderedElement = document.createElement(\"div\");\n        renderedElement.className = \"acd-open-code-dialog-container\";\n\n        const editorContainer = document.createElement(\"div\");\n        editorContainer.className = \"acd-open-code-dialog-editor-container\";\n        renderedElement.appendChild(editorContainer);\n\n        const editorLabel = document.createElement(\"h3\");\n        editorLabel.innerText = \"JSON Schema\"\n        editorContainer.appendChild(editorLabel);\n\n        const editorElement = this.renderEditor();\n        editorContainer.appendChild(editorElement);\n\n        this._previewContainer = document.createElement(\"div\");\n        this._previewContainer.className = \"acd-open-code-dialog-preview-container\";\n        renderedElement.appendChild(this._previewContainer);\n\n        this._previewElement = this.renderPreview()\n        this._previewContainer.appendChild(this._previewElement)\n\n\n        return renderedElement;\n    }\n\n    get output(): CardData {\n        return this._output;\n    }\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nimport * as ACData from \"adaptivecards-templating\";\nimport * as Adaptive from \"adaptivecards\";\nimport { CatalogueEntry, SampleCatalogue } from \"./catalogue\";\nimport { Dialog } from \"./dialog\";\n\nexport interface CardData {\n    cardPayload?: string\n    sampleData?: string\n    thumbnail?: HTMLElement | (() => HTMLElement)\n}\n\ntype CardDataCallback = (output: CardData) => any;\ntype CardDataProvider = (callback?: CardDataCallback) => CardData | void;\n\ninterface OpenSampleItemProps {\n    label: string,\n    onClick?: (ev: MouseEvent) => any\n    cardData?: CardData | CardDataProvider,\n}\n\nclass OpenSampleItem {\n    onComplete: CardDataCallback\n\n    constructor(readonly props: OpenSampleItemProps) { }\n\n    private static _id = 0;\n    private static getNewItemId(prefix: string): string {\n        const newId = prefix + \"-\" + OpenSampleItem._id;\n\n        OpenSampleItem._id++;\n\n        return newId;\n    }\n\n    render(): HTMLElement {\n        const newItemId = OpenSampleItem.getNewItemId(\"acd-open-sample-item-title\");\n\n        const element = document.createElement(\"div\");\n        element.className = \"acd-open-sample-item\";\n        element.tabIndex = 0;\n        element.setAttribute(\"aria-labelledBy\", newItemId);\n        element.setAttribute(\"role\", \"listitem\");\n        element.onclick = this.props.onClick ?? (\n            (e) => {\n                if (this.onComplete) {\n                    if (this.props.cardData instanceof Function) {\n                        const cardData = this.props.cardData(this.onComplete);\n                        if (cardData) {\n                            this.onComplete(cardData);\n                        }\n                    } else if (this.props.cardData) {\n                        this.onComplete(this.props.cardData);\n                    }\n                }\n            })\n\n        const thumbnailHost = document.createElement(\"div\");\n        thumbnailHost.className = \"acd-open-sample-item-thumbnail\";\n\n        if (this.props.cardData instanceof Function) {\n            const spinner = document.createElement(\"div\");\n            spinner.className = \"acd-spinner\";\n            spinner.style.width = \"28px\";\n            spinner.style.height = \"28px\";\n\n            thumbnailHost.appendChild(spinner);\n\n            const cardData = this.props.cardData((cardData: CardData) => {\n                thumbnailHost.removeChild(spinner);\n                if (cardData.thumbnail instanceof Function) {\n                    thumbnailHost.appendChild(cardData.thumbnail())\n                } else if (cardData.thumbnail) {\n                    thumbnailHost.appendChild(cardData.thumbnail)\n                }\n            })\n\n            if (cardData) {\n                thumbnailHost.removeChild(spinner);\n                if (cardData.thumbnail instanceof Function) {\n                    thumbnailHost.appendChild(cardData.thumbnail())\n                } else if (cardData.thumbnail) {\n                    thumbnailHost.appendChild(cardData.thumbnail)\n                }\n            }\n        } else if (this.props.cardData) {\n            if (this.props.cardData.thumbnail instanceof Function) {\n                thumbnailHost.appendChild(this.props.cardData.thumbnail())\n            } else if (this.props.cardData.thumbnail) {\n                thumbnailHost.appendChild(this.props.cardData.thumbnail)\n            }\n        }\n\n        const displayNameElement = document.createElement(\"div\");\n        displayNameElement.className = \"acd-open-sample-item-title\";\n        displayNameElement.id = newItemId;\n        displayNameElement.innerText = this.props.label;\n\n        element.appendChild(thumbnailHost);\n        element.appendChild(displayNameElement);\n\n        return element;\n    }\n}\n\n\nexport interface OpenSampleDialogProps {\n    handlers?: (OpenSampleItemProps | null)[],\n    catalogue?: SampleCatalogue,\n}\n\nexport class OpenSampleDialog extends Dialog {\n    private _output: CardData;\n    private static _builtinItems: OpenSampleItemProps[] = [\n        {\n            label: \"Blank Card\",\n            cardData: {\n                cardPayload: JSON.stringify(\n                    {\n                        type: \"AdaptiveCard\",\n                        $schema: \"http://adaptivecards.io/schemas/adaptive-card.json\",\n                        version: \"1.0\",\n                        body: [\n                        ]\n                    }\n                ),\n            },\n        },\n    ];\n\n    constructor(readonly props: OpenSampleDialogProps) {\n        super();\n    }\n\n    private renderSection(title: string | null, items: (OpenSampleItemProps | null)[]): HTMLElement {\n        const renderedElement = document.createElement(\"div\");\n\n        if (title) {\n            const titleElement = document.createElement(\"div\");\n            titleElement.className = \"acd-dialog-title\";\n            titleElement.innerText = title;\n            titleElement.style.marginTop = \"10px\";\n\n            renderedElement.appendChild(titleElement);\n        }\n\n        const listElement = document.createElement(\"div\");\n        listElement.className = \"acd-open-sample-item-container\";\n        listElement.setAttribute(\"role\", \"list\");\n\n        for (const item of items) {\n            if (!item) continue;\n            const itemElement = new OpenSampleItem(item);\n            itemElement.onComplete = (output: CardData) => {\n                this._output = output;\n                this.close();\n            }\n\n            listElement.appendChild(itemElement.render());\n        }\n\n        renderedElement.appendChild(listElement);\n\n        return renderedElement;\n    }\n\n    protected renderContent(): HTMLElement {\n        const renderedElement = document.createElement(\"div\");\n        renderedElement.style.overflow = \"auto\";\n\n        const featuredSection = this.renderSection(null, OpenSampleDialog._builtinItems.concat(this.props.handlers))\n        renderedElement.appendChild(featuredSection);\n\n        if (this.props.catalogue) {\n            const divider = document.createElement(\"hr\");\n            renderedElement.appendChild(divider);\n\n            this.props.catalogue.onDownloaded = (sender: SampleCatalogue) => {\n                if (sender.isDownloaded) {\n                    const catalogueSection = this.renderSection(\"Explore\",\n                        this.props.catalogue.entries.map((entry: CatalogueEntry) => {\n                            return {\n                                label: entry.displayName,\n                                cardData: (callback) => {\n                                    entry.onDownloaded = (sender: CatalogueEntry) => {\n                                        let success: boolean = sender.cardPayloadDownloaded;\n\n                                        if (success) {\n                                            try {\n                                                const cardPayload = JSON.parse(sender.cardPayload);\n                                                const card = new Adaptive.AdaptiveCard();\n                                                const cardData = sender.sampleData ?\n                                                    new ACData.Template(cardPayload).expand(\n                                                        {\n                                                            $root: JSON.parse(sender.sampleData)\n                                                        }\n                                                    )\n                                                    : cardPayload\n                                                    ;\n\n                                                card.parse(cardData);\n                                                card.render();\n                                                card.renderedElement.style.width = \"100%\";\n\n                                                return callback({\n                                                    cardPayload: entry.cardPayload,\n                                                    sampleData: entry.sampleData,\n                                                    thumbnail: card.renderedElement,\n                                                });\n                                            }\n                                            catch (e) {\n                                                // Swallow the exception\n                                                console.error(\"Unable to load card sample. Error: \" + e);\n\n                                                success = false;\n                                            }\n                                        }\n                                    };\n                                    entry.download();\n                                },\n                            }\n                        })\n                    );\n                    renderedElement.appendChild(catalogueSection);\n                }\n                else {\n                    console.error(\"Sender is not downloaded\");\n                }\n            };\n\n\n            this.props.catalogue.download();\n        }\n\n        const firstChild = featuredSection.firstElementChild as HTMLElement;\n        firstChild.focus();\n\n        return renderedElement;\n    }\n\n    get output(): CardData {\n        return this._output;\n    }\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nexport class PeerCommand {\n    private _renderedElement: HTMLElement;\n\n    protected internalRender(): HTMLElement {\n        let buttonElement = document.createElement(\"button\");\n        buttonElement.classList.add(\"acd-peerButton\");\n        buttonElement.type = \"button\";\n        buttonElement.title = this.toolTip ? this.toolTip : this.name;\n\n        if (this.iconClass) {\n            let iconElement = document.createElement(\"div\");\n            iconElement.classList.add(\"acd-peerButton-icon\", this.iconClass);\n\n            buttonElement.appendChild(iconElement);\n        }\n\n        if (this.name && (!this.iconClass || this.alwaysShowName)) {\n            let nameElement = document.createElement(\"div\");\n            nameElement.classList.add(\"acd-peerButton-text\");\n            nameElement.innerText = this.name;\n\n            buttonElement.classList.add(\"variableWidth\");\n            buttonElement.appendChild(nameElement);\n        }\n        else {\n            buttonElement.classList.add(\"fixedWidth\");\n        }\n\n        buttonElement.onclick = (e: MouseEvent) => {\n            if (this.execute) {\n                this.execute(this, buttonElement);\n            }\n        }\n        buttonElement.onpointerdown = (e: PointerEvent) => { e.cancelBubble = true; };\n\n        return buttonElement;\n    }\n\n    name: string;\n    alwaysShowName: boolean = false;\n    toolTip: string = undefined;\n    iconClass: string;\n    isPromotable: boolean = false;\n    showInPropertySheet: boolean = false;\n    execute: (command: PeerCommand, clickedElement: HTMLElement) => void;\n\n    constructor(init?: Partial<PeerCommand>) {\n        Object.assign(this, init);\n    }\n\n    render(): HTMLElement {\n        this._renderedElement = this.internalRender();\n\n        return this._renderedElement;\n    }\n\n    get renderedElement(): HTMLElement {\n        return this._renderedElement;\n    }\n}\n","export class Pic2Card {\n\tstatic pic2cardService = \"\";\n\tstatic privacyLink = \"../privacy\";\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nexport interface ILoadSettingResult<T> {\n    succeeded: boolean;\n    value?: T;\n}\n\nexport class SettingsManager {\n    private static _isLocalStorageAvailable: boolean = undefined;\n\n    private static determineIfStorageIsAvailable(type: string): boolean {\n        try {\n            var storage = window[type];\n            let x = '__storage_test__';\n\n            storage.setItem(x, x);\n            storage.removeItem(x);\n\n            return true;\n        }\n        catch(e) {\n            return e instanceof DOMException && (\n                // everything except Firefox\n                e.code === 22 ||\n                // Firefox\n                e.code === 1014 ||\n                // test name field too, because code might not be present\n                // everything except Firefox\n                e.name === 'QuotaExceededError' ||\n                // Firefox\n                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n                // acknowledge QuotaExceededError only if there's something already stored\n                storage.length !== 0;\n        }\n    }\n\n    static trySaveSetting(name: string, value: string) {\n        if (SettingsManager.isLocalStorageAvailable) {\n            localStorage.setItem(name, value);\n        }\n    }\n\n    static tryLoadStringSetting(name: string): ILoadSettingResult<string> {\n        if (SettingsManager.isLocalStorageAvailable) {\n            let returnValue = localStorage.getItem(name);\n    \n            return {\n                succeeded: true,\n                value: returnValue\n            };\n        }\n        else {\n            return { succeeded: false };\n        }\n    }\n    \n    static tryLoadNumberSetting(name: string): ILoadSettingResult<number> {\n        if (SettingsManager.isLocalStorageAvailable) {\n            let returnValue = localStorage.getItem(name);\n\n            return {\n                succeeded: true,\n                value: returnValue ? parseFloat(returnValue) : undefined\n            };\n        }\n        else {\n            return { succeeded: false };\n        }\n    }\n\n    static tryLoadBooleanSetting(name: string, defaultValue: boolean): ILoadSettingResult<boolean> {\n        if (SettingsManager.isLocalStorageAvailable) {\n            let returnValue = localStorage.getItem(name);\n\n            return {\n                succeeded: true,\n                value: returnValue ? returnValue == \"true\" : defaultValue\n            };\n        }\n        else {\n            return { succeeded: false };\n        }\n    }\n\n    static get isLocalStorageAvailable(): boolean {\n        if (!SettingsManager._isLocalStorageAvailable) {\n            SettingsManager._isLocalStorageAvailable = SettingsManager.determineIfStorageIsAvailable(\"localStorage\");\n        }\n\n        return SettingsManager._isLocalStorageAvailable;\n    }\n}\n","import * as Adaptive from \"adaptivecards\";\n\nexport class GlobalSettings {\n    static enableDataBindingSupport: boolean = false;\n    static showDataStructureToolbox: boolean = false;\n    static showSampleDataEditorToolbox: boolean = false;\n    static showVersionPicker: boolean = false;\n    static selectedHostContainerControlsTargetVersion: boolean = true;\n    static showTargetVersionMismatchWarning: boolean = true;\n    static supportedTargetVersions: Adaptive.Version[] = [\n        Adaptive.Versions.v1_0,\n        Adaptive.Versions.v1_1,\n        Adaptive.Versions.v1_2,\n        Adaptive.Versions.v1_3,\n        Adaptive.Versions.v1_4,\n        Adaptive.Versions.v1_5\n    ];\n}\n\n","import { Splitter } from \"./splitter\";\nimport { Toolbox, ToolboxOrientation } from \"./tool-box\";\nimport { SettingsManager } from \"./settings-manager\";\n\nexport enum SidePanelAlignment {\n    Top,\n    Right,\n    Bottom,\n    Left\n}\n\nclass ToolboxInfo {\n    private _splitter: Splitter;\n\n    private resizeEnded() {\n        if (this.onResizeEnded) {\n            this.onResizeEnded(this);\n        }\n    }\n\n    private resized() {\n        if (this.onResized) {\n            this.onResized(this);\n        }\n    }\n\n    onToggled: (sender: ToolboxInfo) => void;\n    onResizeEnded: (sender: ToolboxInfo) => void;\n    onResized: (sender: ToolboxInfo) => void;\n\n    showSplitter() {\n        if (this.splitter) {\n            this.splitter.attachedTo.classList.remove(\"acd-hidden\");\n        }\n    }\n\n    hideSplitter() {\n        if (this.splitter) {\n            this.splitter.attachedTo.classList.add(\"acd-hidden\");\n        }\n    }\n\n    constructor(readonly toolbox: Toolbox) {\n        toolbox.onToggled = (sender: Toolbox) => {\n            if (sender.isExpanded) {\n                this.showSplitter();\n\n                this.toolbox.renderedElement.classList.remove(\"acd-hidden\");\n            }\n            else {\n                this.hideSplitter();\n\n                this.toolbox.renderedElement.classList.add(\"acd-hidden\");\n            }\n\n            if (this.onToggled) {\n                this.onToggled(this);\n            }\n        }\n    }\n\n    get splitter(): Splitter {\n        return this._splitter;\n    }\n\n    set splitter(value: Splitter) {\n        this._splitter = value;\n\n        this._splitter.onResizeEnded = (sender: Splitter) => {\n            this.resizeEnded();\n        }\n\n        this._splitter.onResized = (sender: Splitter) => {\n            this.resized();\n        }\n    }\n}\n\nexport class SidePanel {\n    private _attachedTo: HTMLElement;\n    private _alignment: SidePanelAlignment;\n    private _collapsedTabContainer: HTMLElement;\n    private _contentHost: HTMLElement;\n    private _toolboxes: ToolboxInfo[] = [];\n    private _isRestoring: boolean = false;\n\n    private updateLayout() {\n        let expandedToolboxCount = 0;\n\n        for (let toolboxInfo of this._toolboxes) {\n            if (toolboxInfo.toolbox.isExpanded) {\n                expandedToolboxCount++;\n\n                if (expandedToolboxCount == 1) {\n                    toolboxInfo.hideSplitter();\n                    toolboxInfo.toolbox.stretch = true;\n                }\n                else {\n                    toolboxInfo.showSplitter();\n                    toolboxInfo.toolbox.stretch = false;\n                }\n            }\n        }\n\n        if (expandedToolboxCount > 0) {\n            this._attachedTo.classList.remove(\"acd-hidden\");\n        }\n        else {\n            this._attachedTo.classList.add(\"acd-hidden\");\n        }\n    }\n\n    private computeToolboxSize(toolbox: Toolbox) {\n        let boundingRect = this._attachedTo.getBoundingClientRect();\n        let toolboxBoundingRect = toolbox.renderedElement.getBoundingClientRect();\n\n        if (this.isVertical) {\n            toolbox.renderedElement.style.height = (100 / boundingRect.height * toolboxBoundingRect.height) + \"%\";\n        }\n        else {\n            toolbox.renderedElement.style.width = (100 / boundingRect.width * toolboxBoundingRect.width) + \"%\";\n        }\n    }\n\n    private resized() {\n        if (this.onResized) {\n            this.onResized(this);\n        }\n\n        this.saveState();\n    }\n\n    private toolboxResized(toolbox: Toolbox) {\n        if (this.onToolboxResized) {\n            this.onToolboxResized(this, toolbox);\n        }\n\n        this.saveState();\n    }\n\n    private toolboxExpandedOrCollapsed(toolbox: Toolbox) {\n        if (this.onToolboxExpandedOrCollapsed) {\n            this.onToolboxExpandedOrCollapsed(this, toolbox);\n        }\n\n        this.saveState();\n    }\n\n    private getDimensionSettingName(): string {\n        return this.id + (this.isVertical ? \"Height\" : \"Width\");\n    }\n\n    private get isVertical(): boolean {\n        return this._alignment == SidePanelAlignment.Right || this._alignment == SidePanelAlignment.Left;\n    }\n\n    onResized: (sender: SidePanel) => void;\n    onToolboxResized: (sender: SidePanel, toolbox: Toolbox) => void;\n    onToolboxExpandedOrCollapsed: (sender: SidePanel, toolbox: Toolbox) => void;\n\n    readonly id;\n\n    size?: number;\n    isResizable: boolean = true;\n\n    addToolbox(toolbox: Toolbox) {\n        let toolboxInfo = new ToolboxInfo(toolbox);\n        toolboxInfo.onToggled = (sender: ToolboxInfo) => {\n            this.updateLayout();\n            this.toolboxExpandedOrCollapsed(toolboxInfo.toolbox);\n        }\n        toolboxInfo.onResizeEnded = (sender: ToolboxInfo) => {\n            this.computeToolboxSize(sender.toolbox);\n            this.toolboxResized(sender.toolbox);\n        }\n        toolboxInfo.onResized = (sender: ToolboxInfo) => {\n            this.toolboxResized(sender.toolbox);\n        }\n\n        this._toolboxes.push(toolboxInfo);\n    }\n\n    attachTo(attachTo: HTMLElement) {\n        this._attachedTo = attachTo;\n        this._attachedTo.classList.add(\"acd-sidepanel-parent\");\n\n        this._contentHost = document.createElement(\"div\");\n        this._contentHost.className = \"acd-sidepanel-host\";\n\n        if (this.isVertical) {\n            this._contentHost.classList.add(\"acd-sidepanel-host-vertical\");\n        }\n        else {\n            this._contentHost.classList.add(\"acd-sidepanel-host-horizontal\");\n        }\n\n        for (let i = 0; i < this._toolboxes.length; i++) {\n            let toolboxInfo = this._toolboxes[i];\n            toolboxInfo.toolbox.render(\n                this.isVertical ? ToolboxOrientation.Vertical : ToolboxOrientation.Horizontal,\n                this._collapsedTabContainer);\n\n            if (i > 0) {\n                let splitterElement = document.createElement(\"div\");\n\n                if (this.isVertical) {\n                    splitterElement.className = \"acd-horizontal-splitter\";\n\n                    toolboxInfo.toolbox.renderedElement.style.height = (100 / this._toolboxes.length) + \"%\";\n                }\n                else {\n                    splitterElement.className = \"acd-vertical-splitter\";\n\n                    toolboxInfo.toolbox.renderedElement.style.width = (100 / this._toolboxes.length) + \"%\";\n                }\n\n                toolboxInfo.toolbox.renderedElement.appendChild(splitterElement);\n\n                toolboxInfo.splitter = new Splitter(\n                    splitterElement,\n                    toolboxInfo.toolbox.renderedElement,\n                    !this.isVertical);\n            }\n\n            this._contentHost.appendChild(toolboxInfo.toolbox.renderedElement);\n        }\n\n        let splitterElement: HTMLElement = null;\n\n        if (this.isResizable) {\n            splitterElement = document.createElement(\"div\");\n            splitterElement.className = this.isVertical ? \"acd-vertical-splitter\" : \"acd-horizontal-splitter\";\n\n            let splitter = new Splitter(\n                splitterElement,\n                this._attachedTo,\n                this.isVertical,\n                this._alignment == SidePanelAlignment.Left || this._alignment == SidePanelAlignment.Top);\n            splitter.onResized = (splitter: Splitter) => {\n                this.resized();\n            }\n        }\n\n        this._attachedTo.innerHTML = \"\";\n\n        if (this.isVertical) {\n            if (this.size) {\n                this._attachedTo.style.width = this.size + \"px\";\n            }\n\n            this._attachedTo.classList.add(\"acd-sidepanel-parent-vertical\");\n        }\n        else {\n            if (this.size) {\n                this._attachedTo.style.height = this.size + \"px\";\n            }\n\n            this._attachedTo.classList.add(\"acd-sidepanel-parent-horizontal\");\n        }\n\n        if (this._alignment == SidePanelAlignment.Right || this._alignment == SidePanelAlignment.Bottom) {\n            if (splitterElement) {\n                this._attachedTo.appendChild(splitterElement);\n            }\n\n            this._attachedTo.appendChild(this._contentHost);\n        }\n        else {\n            this._attachedTo.appendChild(this._contentHost);\n\n            if (splitterElement) {\n                this._attachedTo.appendChild(splitterElement);\n            }\n        }\n\n        this.restoreState();\n        this.updateLayout();\n    }\n\n    constructor(id: string, alignment: SidePanelAlignment, collapsedTabContainer: HTMLElement) {\n        this.id = id;\n        this._alignment = alignment;\n        this._collapsedTabContainer = collapsedTabContainer;\n    }\n\n    saveState() {\n        if (!this._isRestoring) {\n            SettingsManager.trySaveSetting(\n                this.getDimensionSettingName(),\n                this.isVertical ? this._attachedTo.style.width : this._attachedTo.style.height);\n\n            for (let toolboxInfo of this._toolboxes) {\n                toolboxInfo.toolbox.saveState();\n            }\n        }\n    }\n\n    restoreState() {\n        if (this._attachedTo && !this._isRestoring) {\n            this._isRestoring = true;\n\n            try {\n                let dimensionSetting = SettingsManager.tryLoadStringSetting(this.getDimensionSettingName());\n\n                if (dimensionSetting.succeeded && dimensionSetting.value != undefined && dimensionSetting.value != \"\") {\n                    if (this.isVertical) {\n                        this._attachedTo.style.width = dimensionSetting.value;\n                    }\n                    else {\n                        this._attachedTo.style.height = dimensionSetting.value;\n                    }\n                }\n\n                for (let toolboxInfo of this._toolboxes) {\n                    toolboxInfo.toolbox.restoreState();\n                }\n\n                this.updateLayout();\n                this.resized();\n            }\n            finally {\n                this._isRestoring = false;\n            }\n        }\n    }\n\n    get contentHost(): HTMLElement {\n        return this._contentHost;\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport { IPoint } from \"./miscellaneous\";\n\nexport class Splitter {\n    private _isVertical: boolean = false;\n    private _isAttachedAfter: boolean = false;\n    private _sizedELement: HTMLElement;\n    private _isPointerDown: boolean;\n    private _lastClickedOffset: IPoint;\n\n    private resizeEnded() {\n        if (this.onResizeEnded) {\n            this.onResizeEnded(this);\n        }\n    }\n\n    private pointerDown(e: PointerEvent) {\n        e.preventDefault();\n\n        this.attachedTo.setPointerCapture(e.pointerId);\n\n        this._lastClickedOffset = { x: e.x, y: e.y };\n\n        this._isPointerDown = true;\n    }\n\n    private pointerMove(e: PointerEvent) {\n        if (this._isPointerDown) {\n            e.preventDefault();\n\n            let sizeApplied = false;\n            let newSize: number;\n\n            if (this._isVertical) {\n                if (this._isAttachedAfter) {\n                    newSize = this._sizedELement.getBoundingClientRect().width - (this._lastClickedOffset.x - e.x);\n                }\n                else {\n                    newSize = this._sizedELement.getBoundingClientRect().width - (e.x - this._lastClickedOffset.x);\n                }\n\n                if (newSize >= this.minimum) {\n                    this._sizedELement.style.width = newSize + \"px\";\n\n                    sizeApplied = true;\n                }\n            }\n            else {\n                if (this._isAttachedAfter) {\n                    newSize = this._sizedELement.getBoundingClientRect().height - (this._lastClickedOffset.y - e.y);\n                }\n                else {\n                    newSize = this._sizedELement.getBoundingClientRect().height - (e.y - this._lastClickedOffset.y);\n                }\n\n                if (newSize >= this.minimum) {\n                    this._sizedELement.style.height = newSize + \"px\";\n\n                    sizeApplied = true;\n                }\n            }\n\n            if (sizeApplied) {\n                if (this.onResized) {\n                    this.onResized(this);\n                }\n\n                this._lastClickedOffset = { x: e.x, y: e.y };\n            }\n        }\n    }\n\n    private pointerUp(e: PointerEvent) {\n        e.preventDefault();\n\n        this.attachedTo.releasePointerCapture(e.pointerId);\n\n        this.resizeEnded();\n\n        this._isPointerDown = false;\n    }\n\n    onResizeEnded: (sender: Splitter) => void;\n    onResized: (sender: Splitter) => void;\n\n    readonly attachedTo: HTMLElement;\n\n    minimum: number = 50;\n\n    constructor(\n        attachedTo: HTMLElement,\n        sizedElement: HTMLElement,\n        isVertical: boolean = false,\n        isAttachedAfter: boolean = false,\n        minimumSize: number = 140) {\n        this.attachedTo = attachedTo;\n        this._sizedELement = sizedElement;\n        this._isVertical = isVertical;\n        this._isAttachedAfter = isAttachedAfter;\n        this.minimum = minimumSize;\n\n        this.attachedTo.onmousedown = (e: MouseEvent) => {e.preventDefault(); };\n        this.attachedTo.onpointerdown = (e: PointerEvent) => { this.pointerDown(e); };\n        this.attachedTo.onpointermove = (e: PointerEvent) => { this.pointerMove(e); };\n        this.attachedTo.onpointerup = (e: PointerEvent) => { this.pointerUp(e); };\n    }\n}\n","export class Strings {\n    static readonly toolboxes = {\n        toolPalette: {\n            title: \"CARD ELEMENTS\"\n        },\n        cardEditor: {\n            title: \"CARD PAYLOAD EDITOR\"\n        },\n        sampleDataEditor: {\n            title: \"SAMPLE DATA EDITOR\"\n        },\n        propertySheet: {\n            title: \"ELEMENT PROPERTIES\",\n            commands: {\n                bindData: {\n                    displayText: () => \"...\",\n                    accessibleText: (propertyLabel: string) => \"Data Binding\"\n                }\n            }\n        },\n        cardStructure: {\n            title: \"CARD STRUCTURE\"\n        },\n        dataStructure: {\n            title: \"DATA STRUCTURE\"\n        }\n    };\n    static loadingEditor = \"Loading editor...\";\n}\n","import { SettingsManager } from \"./settings-manager\";\nimport { Constants } from \"adaptivecards-controls\";\n\nexport interface IToolboxCommand {\n    title: string;\n    iconClass: string;\n    execute: (sender: IToolboxCommand) => void;\n}\n\nexport enum ToolboxOrientation {\n    Horizontal,\n    Vertical\n}\n\nexport class Toolbox {\n    private _renderedElement: HTMLElement;\n    private _headerRootElement: HTMLElement;\n    private _headerIconElement: HTMLElement;\n    private _expandCollapseButtonElement: HTMLElement;\n    private _customCommandsHost: HTMLElement;\n    private _contentHost: HTMLElement;\n    private _isExpanded: boolean = true;\n    private _content: HTMLElement;\n    private _stretch: boolean = false;\n    private _orientation: ToolboxOrientation;\n    private _isRestoring: boolean = false;\n    private _collapsedTabContainer: HTMLElement;\n\n    private getDimensionSettingName(): string {\n        return \"Toolbox\" + this.id + (this._orientation == ToolboxOrientation.Vertical ? \"Height\" : \"Width\");\n    }\n\n    private updateContent() {\n        if (this._contentHost) {\n            this._contentHost.innerHTML = \"\";\n\n            if (this._content) {\n                this._contentHost.appendChild(this._content);\n            }\n        }\n    }\n\n    private toggled() {\n        if (this.onToggled) {\n            this.onToggled(this);\n        }\n    }\n\n    onToggled: (sender: Toolbox) => void;\n\n    readonly id: string;\n    readonly title: string;\n\n    commands: Array<IToolboxCommand> = null;\n\n    constructor(id: string, title: string) {\n        this.id = id;\n        this.title = title;\n    }\n\n    render(orientation: ToolboxOrientation, collapsedTabContainer: HTMLElement) {\n        this._orientation = orientation;\n        this._collapsedTabContainer = collapsedTabContainer;\n\n        this._renderedElement = document.createElement(\"div\");\n        this._renderedElement.classList.add(\"acd-toolbox\");\n        this.stretch = this.stretch; // trigger CSS class painting based on defaults\n\n        this._headerRootElement = document.createElement(\"div\");\n        this._headerRootElement.innerHTML = \"\";\n        this._headerRootElement.className = \"acd-toolbox-header\";\n\n        let headerContentElement = document.createElement(\"div\");\n        headerContentElement.className = \"acd-toolbox-header-content\";\n\n        let headerTitleElement = document.createElement(\"span\");\n        headerTitleElement.className = \"acd-toolbox-header-title\";\n        headerTitleElement.innerText = this.title;\n\n        headerContentElement.appendChild(headerTitleElement);\n\n        let headerCommandsHostElement = document.createElement(\"span\");\n        headerCommandsHostElement.className = \"acd-toolbox-header-commandsHost\";\n\n        this._customCommandsHost = document.createElement(\"div\");\n        this._customCommandsHost.style.display = \"flex\";\n\n        if (this.commands) {\n            for (let command of this.commands) {\n                let commandButtonElement = document.createElement(\"div\");\n                commandButtonElement.className = \"acd-toolbox-header-commandButton\";\n                commandButtonElement.title = command.title;\n                commandButtonElement.onclick = (e) => {\n                    command.execute(command);\n                }\n\n                let commandIconElement = document.createElement(\"div\");\n                commandIconElement.classList.add(\"acd-icon\", command.iconClass);\n\n                commandButtonElement.appendChild(commandIconElement);\n\n                this._customCommandsHost.appendChild(commandButtonElement);\n            }\n        }\n\n        headerCommandsHostElement.appendChild(this._customCommandsHost);\n\n        this._expandCollapseButtonElement = document.createElement(\"span\");\n        this._expandCollapseButtonElement.className = \"acd-toolbox-header-commandButton\";\n        this._expandCollapseButtonElement.title = \"Hide \" + this.title;\n        this._expandCollapseButtonElement.tabIndex = 0;\n        this._expandCollapseButtonElement.setAttribute(\"role\", \"button\");\n        this._expandCollapseButtonElement.setAttribute(\"aria-expanded\", \"true\");\n\n        this._headerIconElement = document.createElement(\"span\")\n        this._headerIconElement.classList.add(\"acd-icon\", \"acd-icon-header-expanded\");\n\n        this._expandCollapseButtonElement.appendChild(this._headerIconElement);\n\n        this._expandCollapseButtonElement.onkeydown = (e) => {\n            if (e.key === Constants.keys.enter || e.key === Constants.keys.space) {\n                this.toggle();\n\n                e.preventDefault();\n                this._expandCollapseButtonElement.focus();\n            }\n\n            if (e.key === Constants.keys.escape) {\n                this.collapse();\n\n                e.preventDefault();\n                this._expandCollapseButtonElement.focus();\n            }\n        }\n\n        this._expandCollapseButtonElement.onclick = (e) => {\n            this.toggle();\n\n            e.preventDefault();\n\n            return true;\n        }\n\n        headerCommandsHostElement.appendChild(this._expandCollapseButtonElement);\n\n        headerContentElement.appendChild(headerCommandsHostElement);\n\n        this._headerRootElement.appendChild(headerContentElement);\n\n        this._contentHost = document.createElement(\"div\");\n        this._contentHost.style.overflow = \"auto\";\n\n        this._renderedElement.appendChild(this._headerRootElement);\n        this._renderedElement.appendChild(this._contentHost);\n\n        this.updateContent();\n    }\n\n    collapse() {\n        if (this._isExpanded) {\n            this._headerIconElement.classList.add(\"acd-icon-header-collapsed\");\n            this._headerIconElement.classList.remove(\"acd-icon-header-expanded\");\n            this._customCommandsHost.classList.add(\"acd-hidden\");\n\n            if (this._collapsedTabContainer) {\n                this._renderedElement.removeChild(this._headerRootElement);\n                this._collapsedTabContainer.appendChild(this._headerRootElement);\n            }\n\n            this._expandCollapseButtonElement.title = \"Show \" + this.title;\n            this._expandCollapseButtonElement.setAttribute(\"aria-expanded\", \"false\");\n\n            this._isExpanded = false;\n\n            this.toggled();\n        }\n    }\n\n    expand() {\n        if (!this._isExpanded) {\n            this._headerIconElement.classList.add(\"acd-icon-header-expanded\");\n            this._headerIconElement.classList.remove(\"acd-icon-header-collapsed\");\n            this._customCommandsHost.classList.remove(\"acd-hidden\");\n\n            if (this._collapsedTabContainer) {\n                this._collapsedTabContainer.removeChild(this._headerRootElement);\n                this._renderedElement.insertBefore(this._headerRootElement, this._renderedElement.firstChild);\n            }\n\n            this._expandCollapseButtonElement.title = \"Hide \" + this.title;\n            this._expandCollapseButtonElement.setAttribute(\"aria-expanded\", \"true\");\n\n            this._isExpanded = true;\n\n            this.toggled();\n        }\n    }\n\n    toggle() {\n        if (this.isExpanded) {\n            this.collapse();\n        }\n        else {\n            this.expand();\n        }\n    }\n\n    getHeaderBoundingRect(): ClientRect {\n        return this._headerRootElement.getBoundingClientRect();\n    }\n\n    saveState() {\n        if (!this._isRestoring) {\n            SettingsManager.trySaveSetting(\"Toolbox\" + this.id + \"IsExpanded\", this.isExpanded.toString());\n\n            SettingsManager.trySaveSetting(\n                this.getDimensionSettingName(),\n                this.orientation == ToolboxOrientation.Vertical ? this.renderedElement.style.height : this.renderedElement.style.width);\n        }\n    }\n\n    restoreState() {\n        if (this.renderedElement && !this._isRestoring) {\n            this._isRestoring = true;\n\n            try {\n                let dimensionSetting = SettingsManager.tryLoadStringSetting(this.getDimensionSettingName());\n\n                if (dimensionSetting.succeeded && dimensionSetting.value != undefined && dimensionSetting.value != \"\") {\n                    if (this.orientation == ToolboxOrientation.Vertical) {\n                        this.renderedElement.style.height = dimensionSetting.value;\n                    }\n                    else {\n                        this.renderedElement.style.width = dimensionSetting.value;\n                    }\n                }\n\n                let isExpandedSetting = SettingsManager.tryLoadBooleanSetting(\"Toolbox\" + this.id + \"IsExpanded\", true);\n\n                if (isExpandedSetting.succeeded) {\n                    if (isExpandedSetting.value) {\n                        this.expand();\n                    }\n                    else {\n                        this.collapse();\n                    }\n                }\n            }\n            finally {\n                this._isRestoring = false;\n            }\n        }\n    }\n\n    get orientation(): ToolboxOrientation {\n        return this._orientation;\n    }\n\n    get renderedElement(): HTMLElement {\n        return this._renderedElement;\n    }\n\n    get content(): HTMLElement {\n        return this._content;\n    }\n\n    set content(value: HTMLElement) {\n        this._content = value;\n\n        this.updateContent();\n    }\n\n    get isExpanded(): boolean {\n        return this._isExpanded;\n    }\n\n    get stretch(): boolean {\n        return this._stretch;\n    }\n\n    set stretch(value: boolean) {\n        this._stretch = value;\n\n        if (this._stretch) {\n            this.renderedElement.classList.add(\"acd-toolbox-stretch\");\n            this.renderedElement.classList.remove(\"acd-toolbox-no-stretch\");\n        }\n        else {\n            this.renderedElement.classList.add(\"acd-toolbox-no-stretch\");\n            this.renderedElement.classList.remove(\"acd-toolbox-stretch\");\n        }\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as Adaptive from \"adaptivecards\";\nimport { DraggableElement } from \"./draggable-element\";\nimport { FieldDefinition } from \"./data\";\nimport { DesignContext, CardDesignerSurface } from \"./card-designer-surface\";\nimport { CardElementPeer, DesignerPeerRegistrationBase } from \"./designer-peers\";\n\nexport abstract class BasePaletteItem extends DraggableElement {\n    protected abstract getText(): string;\n    protected abstract getIconClass(): string;\n\n    protected internalRender(): HTMLElement {\n        let element = document.createElement(\"div\");\n        element.className = \"acd-palette-item\";\n        element.style.display = \"flex\";\n        element.setAttribute(\"role\", \"button\");\n        element.tabIndex = 0;\n\n        let iconElement = document.createElement(\"div\");\n        iconElement.classList.add(\"acd-icon\", \"acd-toolPalette-icon\", this.getIconClass());\n        iconElement.style.flex = \"0 0 auto\";\n\n        let labelElement = document.createElement(\"div\");\n        labelElement.className = \"acd-palette-item-label\";\n        labelElement.style.flex = \"1 1 100%\";\n        labelElement.innerText = this.getText();\n\n        element.appendChild(iconElement);\n        element.appendChild(labelElement);\n\n        return element;\n    }\n\n    renderDragVisual(): HTMLElement {\n        return this.internalRender();\n    }\n\n    abstract createPeer(context: DesignContext, designer: CardDesignerSurface): CardElementPeer;\n}\n\nexport class ElementPaletteItem extends BasePaletteItem {\n    protected getText(): string {\n        return this.typeRegistration.typeName;\n    }\n\n    protected getIconClass(): string {\n        return this.peerRegistration.iconClass;\n    }\n\n    readonly typeRegistration: Adaptive.ITypeRegistration<Adaptive.CardElement>;\n    readonly peerRegistration: DesignerPeerRegistrationBase;\n\n    constructor(typeRegistration: Adaptive.ITypeRegistration<Adaptive.CardElement>, peerRegistration: DesignerPeerRegistrationBase) {\n        super();\n\n        this.typeRegistration = typeRegistration;\n        this.peerRegistration = peerRegistration;\n    }\n\n    createPeer(context: DesignContext, designer: CardDesignerSurface): CardElementPeer {\n        return CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(designer, null, new this.typeRegistration.objectType(), true);\n    }\n}\n\nexport class DataPaletteItem extends BasePaletteItem {\n    protected getText(): string {\n        return this.field.name;\n    }\n\n    protected getIconClass(): string {\n        return null;\n    }\n\n    constructor(readonly field: FieldDefinition) {\n        super();\n    }\n\n    createPeer(context: DesignContext, designer: CardDesignerSurface): CardElementPeer {\n        let element: Adaptive.CardElement;\n\n        if (this.field.isCollection) {\n            element = new Adaptive.Container();\n            element.setCustomProperty(\"$data\", \"{\" + this.field.getPath() + \"}\");\n        }\n        else {\n            let textBlock = new Adaptive.TextBlock();\n            textBlock.text = \"{\" + this.field.getPath() + \"}\";\n\n            element = textBlock;\n        }\n\n        return CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(designer, null, element, true);\n    }\n}\n\nexport abstract class CustomPaletteItem extends BasePaletteItem {\n    readonly category: string;\n\n    protected getIconClass(): string {\n        return \"acd-icon-customPaletteItem\";\n    }\n\n    constructor(category: string) {\n        super();\n\n        this.category = category;\n    }\n}\n\nexport class SnippetPaletteItem extends CustomPaletteItem {\n    protected getText(): string {\n        return this.name;\n    }\n\n    readonly name: string;\n    snippet: object;\n\n    constructor(category: string, name: string) {\n        super(category);\n\n        this.name = name;\n    }\n\n    createPeer(context: DesignContext, designer: CardDesignerSurface): CardElementPeer {\n        if (this.snippet) {\n            let rootElementTypeName = this.snippet[\"type\"];\n\n            if (rootElementTypeName) {\n                let adaptiveElement = context.hostContainer.elementsRegistry.createInstance(rootElementTypeName, context.targetVersion);\n\n                if (adaptiveElement) {\n                    adaptiveElement.parse(this.snippet);\n\n                    return CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(designer, null, adaptiveElement, true);\n                }\n            }\n        }\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport { DropDown, DropDownItem } from \"adaptivecards-controls\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport enum ToolbarElementAlignment {\n    Left,\n    Right\n}\n\nexport abstract class ToolbarElement {\n    private _renderedElement: HTMLElement = undefined;\n\n    protected abstract internalRender(): HTMLElement;\n\n    protected internalUpdateLayout() {\n        // Do nothing in base implementation\n    }\n\n    readonly id: string;\n\n    isVisible: boolean = true;\n    separator: boolean = false;\n    label: string = null;\n    alignment: ToolbarElementAlignment = ToolbarElementAlignment.Left;\n\n    constructor(id: string) {\n        if (!id || id === \"\") {\n            throw new Error(\"Toolbar elements must have an Id.\");\n        }\n\n        this.id = id;\n    }\n\n    updateLayout() {\n        if (this._renderedElement) {\n            this.internalUpdateLayout();\n        }\n    }\n\n    render(): HTMLElement {\n        this._renderedElement = this.internalRender();\n\n        this.updateLayout();\n\n        return this._renderedElement;\n    }\n\n    get renderedElement(): HTMLElement {\n        return this._renderedElement;\n    }\n}\n\nexport class ToolbarButton extends ToolbarElement {\n    private _caption: string;\n    private _displayCaption: boolean = true;\n    private _iconClass: string = undefined;\n    private _toolTip: string = undefined;\n    private _isEnabled: boolean = true;\n    private _allowToggle: boolean = false;\n    private _isToggled: boolean = false;\n\n    protected clicked() {\n        if (this.isEnabled && this.onClick) {\n            this.onClick(this);\n        }\n    }\n\n    protected internalUpdateLayout() {\n        this.renderedElement.className = \"acd-toolbar-button\";\n\n        if(!this.isEnabled) {\n            this.renderedElement.classList.add(\"acd-toolbar-button-disabled\");\n            this.renderedElement.setAttribute(\"aria-disabled\", \"true\");\n        }\n        else {\n            this.renderedElement.classList.remove(\"acd-toolbar-button-disabled\");\n            this.renderedElement.removeAttribute(\"aria-disabled\");\n        }\n\n        if (this.isToggled) {\n            this.renderedElement.classList.add(\"acd-toolbar-button-toggled\");\n        }\n        else {\n            this.renderedElement.classList.remove(\"acd-toolbar-button-toggled\");\n        }\n\n        if (this.allowToggle) {\n            this.renderedElement.setAttribute(\"aria-pressed\", this.isToggled.toString());\n        }\n\n        if (this.iconClass) {\n            this.renderedElement.classList.add(this.iconClass);\n        }\n\n        if (!this.displayCaption) {\n            this.renderedElement.classList.add(\"acd-toolbar-button-iconOnly\");\n            this.renderedElement.innerText = \"\";\n        }\n        else {\n            this.renderedElement.innerText = this.caption;\n        }\n\n        this.renderedElement.title = this.toolTip ? this.toolTip : \"\";\n    }\n\n    protected internalRender(): HTMLElement {\n        let element = document.createElement(\"button\");\n        element.type = \"button\";\n\n        element.onclick = (e) => {\n            if (this.allowToggle) {\n                this.isToggled = !this.isToggled;\n            }\n\n            this.clicked();\n        }\n\n        return element;\n    }\n\n    onClick: (sender: ToolbarButton) => void;\n\n    constructor(\n        id: string,\n        caption: string,\n        iconClass: string,\n        onClick: (sender: ToolbarButton) => void = null) {\n        super(id);\n\n        this.caption = caption;\n        this.iconClass = iconClass;\n        this.onClick = onClick;\n    }\n\n    get allowToggle(): boolean {\n        return this._allowToggle;\n    }\n\n    set allowToggle(value: boolean) {\n        this._allowToggle = value;\n\n        if (!this._allowToggle) {\n            this.isToggled = false;\n        }\n    }\n\n    get isToggled(): boolean {\n        return this._isToggled;\n    }\n\n    set isToggled(value: boolean) {\n        this._isToggled = value;\n\n        this.updateLayout();\n    }\n\n    get caption(): string {\n        return this._caption;\n    }\n\n    set caption(value: string) {\n        this._caption = value;\n\n        this.updateLayout();\n    }\n\n    get displayCaption(): boolean {\n        return this._displayCaption;\n    }\n\n    set displayCaption(value: boolean) {\n        this._displayCaption = value;\n\n        this.updateLayout();\n    }\n\n    get iconClass(): string {\n        return this._iconClass;\n    }\n\n    set iconClass(value: string) {\n        this._iconClass = value;\n\n        this.updateLayout();\n    }\n\n    get toolTip(): string {\n        return this._toolTip;\n    }\n\n    set toolTip(value: string) {\n        this._toolTip = value;\n\n        this.updateLayout();\n    }\n\n    get isEnabled(): boolean {\n        return this._isEnabled;\n    }\n\n    set isEnabled(value: boolean) {\n        this._isEnabled = value;\n\n        this.updateLayout();\n    }\n}\n\nexport interface IChoicePickerItem {\n    name: string;\n    value: string;\n}\n\nexport class ToolbarChoicePicker extends ToolbarElement {\n    private _dropDown: DropDown;\n    private _labelledById: string; // id to use for our label element\n\n    protected internalRender(): HTMLElement {\n        this._dropDown = new DropDown();\n\n        for (let choice of this.choices) {\n            let dropDownItem = new DropDownItem(choice.value, choice.name);\n\n            this._dropDown.items.add(dropDownItem);\n        }\n\n        this._dropDown.selectedIndex = 0;\n        this._dropDown.onValueChanged = (sender) => {\n            if (this.onChanged) {\n                this.onChanged(this);\n            }\n        }\n\n        let pickerElement = document.createElement(\"div\");\n\n        if (this.width && this.width > 0) {\n            pickerElement.style.width = this.width + \"px\";\n        }\n\n        // update label ids so we can generate correct aria\n        if (this.label && !this._labelledById) {\n            this._labelledById = uuidv4();\n            this._dropDown.parentLabelId = this._labelledById;\n        }\n\n        this._dropDown.attach(pickerElement);\n\n        let pickerContainerElement = document.createElement(\"div\");\n        pickerContainerElement.className = \"acd-toolbar-choicePicker\";\n\n        if (this.label) {\n            let labelElement = document.createElement(\"div\");\n            labelElement.className = \"acd-toolbar-label\";\n            labelElement.innerText = this.label;\n            labelElement.id = this._labelledById;\n\n            pickerContainerElement.appendChild(labelElement);\n        }\n\n        pickerContainerElement.appendChild(pickerElement);\n\n        return pickerContainerElement;\n    }\n\n    onChanged: (sender: ToolbarChoicePicker) => void;\n\n    label: string = null;\n    choices: Array<IChoicePickerItem> = [];\n    width?: number = null;\n\n    get value(): string {\n        return this._dropDown.value.key;\n    }\n\n    get selectedIndex(): number {\n        return this._dropDown.selectedIndex;\n    }\n\n    set selectedIndex(value: number) {\n        this._dropDown.selectedIndex = value;\n    }\n}\n\nexport class Toolbar {\n    private _elements: Array<ToolbarElement> = [];\n    private _attachedTo: HTMLElement;\n\n    private createSeparatorElement(): HTMLElement {\n        let separatorElement = document.createElement(\"div\");\n        separatorElement.className = \"acd-toolbar-separator\";\n\n        return separatorElement;\n    }\n\n    private renderElementsInto(\n        container: HTMLElement,\n        elements: Array<ToolbarElement>,\n        separatorPosition: ToolbarElementAlignment) {\n        for (let i = 0; i < elements.length; i++) {\n            if (elements[i].separator && separatorPosition == ToolbarElementAlignment.Left && i > 0) {\n                container.appendChild(this.createSeparatorElement());\n            }\n\n            container.appendChild(elements[i].render());\n\n            if (elements[i].separator && separatorPosition == ToolbarElementAlignment.Right && i < elements.length - 1) {\n                container.appendChild(this.createSeparatorElement());\n            }\n        }\n    }\n\n    attachTo(element: HTMLElement) {\n        this._attachedTo = element;\n        this._attachedTo.className = \"acd-toolbar\";\n        this._attachedTo.innerHTML = \"\";\n\n        let leftElements: Array<ToolbarElement> = [];\n        let rightElements: Array<ToolbarElement> = [];\n\n        for (let element of this._elements) {\n            if (element.isVisible) {\n                if (element.alignment == ToolbarElementAlignment.Left) {\n                    leftElements.push(element);\n                }\n                else {\n                    rightElements.push(element);\n                }\n            }\n        }\n\n        let leftContainer = document.createElement(\"div\");\n        leftContainer.className = \"acd-toolbar-content\";\n\n        let rightContainer = document.createElement(\"div\");\n        rightContainer.className = \"acd-toolbar-content\";\n\n        this.renderElementsInto(\n            leftContainer,\n            leftElements,\n            ToolbarElementAlignment.Left);\n        this.renderElementsInto(\n            rightContainer,\n            rightElements,\n            ToolbarElementAlignment.Right);\n\n        this._attachedTo.appendChild(leftContainer);\n        this._attachedTo.appendChild(rightContainer);\n    }\n\n    addElement(element: ToolbarElement) {\n        this._elements.push(element);\n    }\n\n    getElementById(elementId: string): ToolbarElement {\n        for (let element of this._elements) {\n            if (element.id == elementId) {\n                return element;\n            }\n        }\n\n        return null;\n    }\n\n    insertElementAfter(element: ToolbarElement, afterElementId: string) {\n        for (let i = 0; i < this._elements.length; i++) {\n            if (this._elements[i].id == afterElementId) {\n                this._elements.splice(i + 1, 0, element);\n\n                return;\n            }\n        }\n\n        // Add as the last element if no element was found with the\n        // specified id\n        this._elements.push(element);\n    }\n\n    insertElementBefore(element: ToolbarElement, beforeElementId: string) {\n        for (let i = this._elements.length - 1; i >= 0; i--) {\n            if (this._elements[i].id == beforeElementId) {\n                this._elements.splice(i, 0, element);\n\n                return;\n            }\n        }\n\n        // Insert as first element if no element was found with the\n        // specified id\n        this._elements.splice(0, 0, element);\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport { BaseTreeItem } from \"./base-tree-item\";\n\nexport class TreeView {\n    private _selectedItem: BaseTreeItem = undefined;\n\n    private setupTreeItemEvents(treeItem: BaseTreeItem) {\n        treeItem.onSelectedChange = (sender: BaseTreeItem) => {\n            this.selectedItem = sender;\n        };\n\n        for (let i = 0; i < treeItem.getChildCount(); i++) {\n            this.setupTreeItemEvents(treeItem.getChildAt(i));\n        }\n    }\n\n    protected selectedItemChanged() {\n        if (this.onSelectedItemChanged) {\n            this.onSelectedItemChanged(this);\n        }\n    }\n\n    focus() {\n        if (this.rootItem) {\n            this.rootItem.focus();\n        }\n    }\n\n    render(): HTMLElement {\n        let treeRoot = document.createElement(\"ul\");\n        treeRoot.style.paddingLeft = \"0\";\n        treeRoot.style.listStyleType = \"none\";\n        treeRoot.className = \"acd-treeView\";\n        treeRoot.setAttribute(\"role\", \"tree\");\n        treeRoot.appendChild(this.rootItem.render());\n\n        this.setupTreeItemEvents(this.rootItem);\n\n        return treeRoot;\n    }\n\n    onSelectedItemChanged: (sender: TreeView) => void;\n\n    constructor(readonly rootItem: BaseTreeItem) { }\n\n    get selectedItem(): BaseTreeItem {\n        return this._selectedItem;\n    }\n\n    set selectedItem(value: BaseTreeItem) {\n        if (value !== this._selectedItem) {\n            if (this._selectedItem) {\n                this._selectedItem.isSelected = false;\n            }\n\n            this._selectedItem = value;\n\n            if (this._selectedItem) {\n                this._selectedItem.isSelected = true;\n            }\n\n            this.selectedItemChanged();\n        }\n    }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__867__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7961__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(5856);\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__867__","__WEBPACK_EXTERNAL_MODULE__7961__","__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","p","prototype","hasOwnProperty","call","value","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","TypeError","String","__","constructor","Calendar","DayCell","Utils","constants_1","inputcontrol_1","date","_isSubdued","_isSelected","selected","onSelected","render","_this","_element","document","createElement","className","innerText","getDate","toString","tabIndex","onclick","e","onkeydown","key","Constants","keys","enter","focus","set","classList","add","remove","configurable","_super","_selectedDay","_miniCalendarElement","cellPadding","cellSpacing","miniCalendarHeader","style","display","_monthYearLabelElement","flex","appendChild","navButtons","button","addMonths","_rootContainerElement","Date","generateDayCells","baseDate","_days","inputMonth","getMonth","inputYear","getFullYear","start","end","daysInMonth","startDateDayOfWeek","getDay","CalendarSettings","firstDayOfWeek","addDays","endDateDayOfWeek","lastDayOfWeek","endDate","endMonth","endYear","dayCell","clickedCell","selectedDayCell","onDateChanged","push","done","isSelected","_date","initializeSelection","i","length","areDatesEqual","rebuildMiniCalendar","newDate","oldDate","month","innerHTML","row","dayIndex","daysInWeek","cell","getInitialDayName","tableCell","isSubdued","timeDelta","getTime","attach","rootElement","rebuildNeeded","getLongMonthName","InputControl","CheckBox","apply","arguments","_label","_checkboxElement","_spanElement","createId","result","creationIndex","changed","onChange","keyDown","isChecked","labelAttribute","attributes","isCheckedAttribute","_isChecked","id","type","position","checked","onchange","labelElement","htmlFor","Collection","_items","onItemAdded","onItemRemoved","index","item","indexOf","splice","KEY_DELETE","KEY_DOWN","KEY_UP","KEY_SPACE","KEY_ESCAPE","KEY_ENTER","KEY_TAB","tab","escape","space","up","down","delete","DatePicker","CalendarPopupControl","inputwithpopup_1","calendar_1","owner","_owner","renderContent","element","_calendar","c","closePopup","PopupControl","validateRootElement","HTMLDivElement","Error","createPopupControl","getValueAsString","toLocaleDateString","getCssClassName","getButtonIconCssClassName","popup","isOpen","popupControl","InputWithPopup","DropDown","DropDownPopupControl","DropDownItem","collection_1","_value","click","onClick","setAttribute","onmouseup","cancelBubble","newValue","_renderedItems","_selectedIndex","selectedIndex","items","renderedItem","selectedItemIndex","rootElementBounds","renderedElement","minWidth","width","clickedItem","itemClicked","selectedItem","children","childElement","tagName","toLowerCase","getNamedItem","ariaLabelledByIds","parentLabelId","labelId","join","_parentLabelId","DayOfWeek","_rootElement","uuid_1","_isOpen","_popupElement","firstElementChild","_overlayElement","documentElement","scrollWidth","height","scrollHeight","onfocus","body","getBoundingClientRect","window","addEventListener","rootElementLabel","getAttribute","top","popupElementBounds","availableSpaceBelow","innerHeight","bottom","availableSpaceAbove","availableSpaceRight","innerWidth","left","availableSpaceLeft","right","getScrollX","actualPopupHeight","Math","min","maxHeight","getScrollY","actualPopupWidth","maxWidth","wasCancelled","removeChild","onClose","updateLabel","_labelElement","_placeholderText","_popupControl","valueChanged","onValueChanged","placeHolderDomItem","v4","_dropDownButtonElement","sender","PopupMenu","RadioButton","groupNameAttribute","name","TextBox","EditBox","SingleLineEditBox","_inputElement","oninput","placeholder","maxLength","substr","MultilineEditBox","_textareaElement","rows","_isMultiline","_lineCount","editBoxChanged","recreateEditBox","currentValue","_editBox","lineCount","_maxLength","_placeholder","getAttributeValueAsBool","getAttributeValueAsInt","getAttributeValueAsString","editBox","Enums","getLongDayName","longDayNames","getShortDayName","shortDayNames","minimalDayNames","monthIndex","longMonthNames","getShortMonthName","shortMonthNames","monthsInYear","Sunday","days","setDate","year","months","newMonth","setMonth","date1","date2","pageXOffset","pageYOffset","attributeName","defaultValue","attribute","n","parseInt","isNaN","v1","uuid","byteToHex","buf","offset","bth","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","rnds","r","random","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","options","node","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","ii","__webpack_modules__","__unused_webpack_module","__webpack_exports__","clipboard","tiny_emitter","tiny_emitter_default","listen","listen_default","src_select","select_default","_typeof","obj","Symbol","iterator","_defineProperties","target","props","descriptor","writable","clipboard_action","ClipboardAction","instance","Constructor","_classCallCheck","resolveOptions","initSelection","protoProps","action","container","emitter","text","trigger","selectedText","selectFake","selectTarget","isRTL","fakeElem","fontSize","border","padding","margin","yPosition","scrollTop","concat","createFakeElement","fakeHandlerCallback","removeFake","fakeHandler","copyText","removeEventListener","succeeded","execCommand","err","handleResult","emit","clearSelection","activeElement","blur","getSelection","removeAllRanges","_action","nodeType","hasAttribute","_target","clipboard_typeof","clipboard_defineProperties","_setPrototypeOf","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","getPrototypeOf","getAttributeValue","suffix","_Emitter","subClass","superClass","_inherits","Clipboard","staticProps","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","clipboard_classCallCheck","listenClick","actions","support","queryCommandSupported","forEach","defaultAction","defaultTarget","defaultText","_this2","listener","delegateTarget","currentTarget","clipboardAction","selector","querySelector","destroy","Element","matches","proto","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","parentNode","__unused_webpack_exports","closest","_delegate","callback","useCapture","listenerFn","elements","querySelectorAll","map","HTMLElement","nodeList","string","fn","is","delegate","listenNode","listenNodeList","listenSelector","nodeName","isReadOnly","select","setSelectionRange","removeAttribute","selection","range","createRange","selectNodeContents","addRange","E","on","ctx","once","off","_","data","slice","evtArr","len","evts","liveEvents","TinyEmitter","__webpack_module_cache__","moduleId","getter","__esModule","a","definition","prop","default","arr","now","v","version","hashfunc","generateUUID","namespace","str","unescape","encodeURIComponent","bytes","charCodeAt","stringToBytes","DNS","URL","getOutputLength","inputLength8","safeAdd","x","y","lsw","md5cmn","q","s","t","num","cnt","md5ff","md5gg","md5hh","md5ii","v35","msg","input","output","length32","hexTab","hex","charAt","md5ToHexEncodedArray","olda","oldb","oldc","oldd","wordsToMd5","length8","Uint32Array","bytesToWords","f","z","ROTL","K","H","isArray","l","N","ceil","M","_i","j","pow","floor","_i2","W","_t","_t2","T","adaptiveCardSchema","isExpanded","_isExpanded","_level","needsToBeScrolled","treeViewHostParent","parentElement","clientHeight","setIsSelected","scrollIntoView","_treeItemElement","selectedChanged","getIconClass","getAdditionalText","getAdditionalTextClass","getIndentationLevelIncrement","getDragSourceElement","onSelectedChange","getExpandCollapseAriaText","getLabelText","internalRender","hasChildren","getChildCount","paddingLeft","listStyleType","preventDefault","alignItems","level","_expandCollapseElement","visibility","updateLayout","textElement","whiteSpace","textOverflow","overflow","iconElement","labelSpan","additionalTextSpan","_childContainerElement","renderedChildItem","getChildAt","BaseTreeItem","collapsedIconClass","expandedIconClass","expand","collpase","isDraggable","DraggableElement","BindingPreviewMode","Unknown","Containers","Elements","Inputs","Actions","defaultRegistration","DesignerPeers","DesignerPeerRegistrationBase","DesignerPeerCategory","reset","clear","findTypeRegistration","sourceType","registerPeer","peerType","category","iconClass","registrationInfo","DesignerPeerRegistration","unregisterPeer","DesignerPeerRegistry","Adaptive","AdaptiveCard","AdaptiveCardPeer","Container","ContainerPeer","ColumnSet","ColumnSetPeer","Column","ColumnPeer","ImageSet","ImageSetPeer","FactSet","FactSetPeer","Table","TablePeer","TableRow","TableRowPeer","TableCell","TableCellPeer","TextBlock","TextBlockPeer","RichTextBlock","RichTextBlockPeer","Image","ImagePeer","Media","MediaPeer","ActionSet","ActionSetPeer","TextInput","TextInputPeer","DateInput","DateInputPeer","TimeInput","TimeInputPeer","ToggleInput","ToggleInputPeer","NumberInput","NumberInputPeer","ChoiceSetInput","ChoiceSetInputPeer","createPeerInstance","designerSurface","parent","cardElement","initializeCardElement","CardElementPeer","CardElementPeerRegistry","HttpAction","HttpActionPeer","SubmitAction","SubmitActionPeer","ExecuteAction","ExecuteActionPeer","OpenUrlAction","OpenUrlActionPeer","ShowCardAction","ShowCardActionPeer","ToggleVisibilityAction","ToggleVisibilityActionPeer","ActionPeer","ActionPeerRegistry","title","zIndex","DesignContext","context","_updateCount","_allPeers","_isPreviewMode","fixedHeightCard","_serializationContext","hostContainer","createSerializationContext","targetVersion","_cardHost","_designerSurface","onkeyup","_selectedPeer","draggedPeer","endDrag","setSelectedPeer","removeSelected","onpointermove","clientRect","hasPointerCapture","pointerId","setPointerCapture","_dragVisual","pointerEvents","backgroundColor","opacity","boxShadow","boxSizing","getCardObject","cloneNode","adjustedPoint","adjustPointForScroll","renderedCardObjectRect","tryDrop","onpointerup","releasePointerCapture","cardHost","_card","onInlineCardExpanded","inlineCardExpanded","onPreProcessPropertyValue","property","Shared","GlobalSettings","enableDataBindingSupport","sampleData","bindingPreviewMode","NoPreview","expression","ACData","Template","parseInterpolatedString","evaluationContext","SampleData","$root","dataStructure","dataType","generateSampleData","evaluationResult","tryEvaluateExpression","hostConfig","getHostConfig","designMode","updatePeerCommandsLayout","peerRect","getBoundingRect","dragHandleRect","_dragHandle","removeButtonRect","_removeCommandElement","_peerCommandsHostElement","canBeRemoved","childElementCount","getCommands","command","onSelectedPeerChanged","peerChanged","peer","updatePropertySheet","renderCard","peerRemoved","generateCardToRender","asPreview","cardToRender","card","inputPayload","toJSON","outputPayload","template","console","log","message","parse","onCardValidated","allValidationEvents","eventCount","getEventAt","validateProperties","validationEvents","isPreviewMode","onExecuteAction","getJsonTypeName","verb","url","JSON","stringify","alert","renderedCard","addPeer","onSelectedChanged","onChanged","onPeerRemoved","onPeerAdded","newPeer","onStartDrag","startDrag","onEndDrag","addElementsToDesignerSurface","internalFindDropTarget","pointerPosition","currentPeer","forPeer","lookDeeper","isInside","canDrop","deeperResult","findCardElementPeer","findActionPeer","registration","CardDesignerSurface","cardElementPeerRegistry","parentPeer","insertChild","_rootPeer","removeElementsFromDesignerSurface","setDraggedPeer","_draggedPeer","dragging","getDesignerSurfaceOffset","findDropTarget","findPeer","cardObject","beginUpdate","endUpdate","DragHandle","justifyContent","getCardPayloadAsObject","setCardPayloadAsObject","payload","clearEvents","setCardPayloadAsString","warn","getBoundCardPayloadAsObject","isFullRefresh","onLayoutUpdated","selectedPeer","_dropTarget","newDropTarget","isPointerOver","pageToClientCoordinates","actionPeerRegistry","hostContainers","_isAttached","_isMonacoEditorLoaded","_undoStack","_undoStackIndex","_bindingPreviewMode","Designer","_sampleCatalogue","SampleCatalogue","_preventCardUpdate","_cardEditorUpdateCounter","preventJsonUpdate","_isEdgeHTML","_targetVersion","Versions","latest","_fullScreenHandler","FullScreenHandler","_preventRecursiveSetTargetVersion","toolbar","Toolbar","lockDataStructure","enableFullJsonRoundTrip","allowPreProcessingPropertyValues","setTabIndexAtCardRoot","onProcessMarkdown","CardDesigner","internalProcessMarkdown","_hostContainers","prepareToolbar","outputHtml","didProcess","togglePreview","_togglePreviewButton","toolTip","getCurrentCardEditorPayload","updateCardFromJson","buildTreeView","_treeViewToolbox","content","treeViewToolbox","treeView","TreeView","rootPeer","treeItem","buildDataExplorer","_dataToolbox","DataTreeItem","buildPropertySheet","_propertySheetToolbox","restoreFocusId","_propertySheetCard","findDOMNodeOwner","buildPropertySheetCard","wrap","SerializationContext","PaddingDefinition","Spacing","Small","defaultHostConfig","focusTarget","getElementById","getActionById","addPaletteItem","paletteItem","hostElement","_draggedPaletteItem","_draggedElement","renderDragVisual","adjustedPosition","_currentMousePosition","buildPalette","_toolPaletteToolbox","categorizedTypes","elementsRegistry","getItemAt","schemaVersion","compareTo","peerRegistration","objectType","ElementPaletteItem","onDoubleClick","createPeer","tryAdd","getItemCount","customPaletteItems","categoryList","paletteItemContainer","renderErrorPaneElement","source","errorElement","CardObject","recreateDesignerSurface","styleSheetLinkElement","getElementsByTagName","rel","isAbsoluteUrl","styleSheet","href","joinPaths","_assetPath","cardArea","getBackgroundColor","initialize","_designerHostElement","renderTo","wasInPreviewMode","isFixedHeight","scheduleUpdateJsonFromCard","logEntries","errorPane","showTargetVersionMismatchWarning","dedupedEntries","entry","phase","ValidationPhase","Parse","ToJSON","_startDragPayload","setCardPayload","addToUndoStack","updateSampleData","updateFullLayout","activeHostContainerChanged","onActiveHostContainerChanged","targetVersionChanged","cardPayload","onTargetVersionChanged","updateToolboxLayout","toolbox","hostPanelRect","jsonEditorHeaderRect","getHeaderBoundingRect","updateJsonEditorsLayout","jsonEditorsPaneRect","_jsonEditorsPanel","contentHost","_cardEditorToolbox","_cardEditor","layout","_sampleDataEditorToolbox","_sampleDataEditor","scheduleLayoutUpdate","cardPayloadChanged","onCardPayloadChanged","beginCardEditorUpdate","endCardEditorUpdate","setValue","setSampleDataPayload","updateJsonFromCard","clearTimeout","_jsonUpdateTimer","setTimeout","getValue","defaultPayload","getCurrentSampleDataEditorPayload","currentEditorPayload","scheduleUpdateCardFromJson","_cardUpdateTimer","isEdgeHTML","navigator","userAgent","_updateLayoutTimer","showVersionPicker","_versionChoicePicker","ToolbarChoicePicker","ToolbarCommands","VersionPicker","label","alignment","ToolbarElementAlignment","Right","separator","supportedTargetVersions","choices","addElement","_newCardButton","ToolbarButton","NewCard","dialog","OpenSampleDialog","catalogue","handlers","close","launchJsonSchemaPopup","cardData","thumbnail","Pic2Card","pic2cardService","launchImagePopup","closeButton","caption","newCardButton","sampleDataPayload","FieldDefinition","deriveFrom","open","_hostContainerChoicePicker","HostAppPicker","_undoButton","Undo","undo","isEnabled","_redoButton","Redo","redo","_copyJSONButton","CopyJSON","TogglePreview","allowToggle","isVisible","_helpButton","Help","showHelp","onFullScreenChanged","isFullScreen","_fullScreenButton","OpenJsonSchemaDialog","preventLightDismissal","submitButton","OpenImageDialog","predictedCardJSON","onResize","_sampleData","updateToolbar","canUndo","canRedo","doAdd","undoPayloadsToDiscard","MAX_UNDO_STACK_SIZE","handlePointerUp","handlePointerMove","isPointerOverDesigner","peerDropped","clientCoordinates","monacoModuleLoaded","monaco","monacoConfiguration","schemas","uri","schema","fileMatch","validate","allowComments","languages","json","jsonDefaults","setDiagnosticsOptions","editor","folding","language","minimap","enabled","onDidChangeModelContent","attachTo","_hostContainer","DefaultContainer","flexDirection","getBoundCard","toolPaletteHost","Toolbox","Strings","toolboxes","toolPalette","toolPalettePanel","SidePanel","SidePanelAlignment","Left","addToolbox","isResizable","cardEditor","loadingEditor","Bottom","onResized","onToolboxResized","onToolboxExpandedOrCollapsed","showSampleDataEditorToolbox","sampleDataEditor","propertySheetHost","propertySheet","propertySheetPanel","treeViewHost","cardStructure","treeViewPanel","showDataStructureToolbox","dataExplorerHost","clearUndoStack","setCard","getCard","helpDialog","HelpDialog","newCard","$schema","_dataStructure","selectedHostContainerControlsTargetVersion","_customPeletteItems","displayName","cardPayloadUrl","sampleDataUrl","cardId","_cardPayloadDownloaded","_sampleDataDownloaded","onDownloaded","_cardId","downloadCompleted","download","cardPayloadDownloadComplete","sampleDataDownloadComplete","cardPayloadDownloaded","Downloader","onSuccess","_cardPayload","onError","sampleDataDownloaded","CatalogueEntry","_entries","_isDownloaded","downloaded","entries","parseString","isDownloaded","_url","otherTestPayload","defaultTemplatePayload","defaultDataPayload","HostContainer","_elementsRegistry","CardObjectRegistry","_actionsRegistry","supportsActionBar","GlobalRegistry","populateWithDefaultElements","populateWithDefaultActions","useMarkdownInRadioButtonAndCheckbox","useAdvancedCardBottomTruncation","useAdvancedTextBlockTruncation","setElementRegistry","setActionRegistry","actionsRegistry","parseElement","anchorClicked","anchor","HostConfig","v1_0","field","_children","currentField","buildChildList","properties","valueType","ValueTypeData","sampleValue","ArrayData","ObjectData","getChildFields","qualifyFieldName","fieldName","fieldIsLeaf","DataType","defaultSampleValue","_sampleValue","itemType","fields","fieldDefinition","asExpression","getPath","asLeaf","path","forceIndexerSyntax","qualifiedName","exec","_displayName","isCollection","onParentChanged","computeLevel","getTreeItemText","DesignerPeerTreeItem","DesignerPeerInplaceEditor","CardElementPeerInplaceEditor","_iconClass","displayCategoryName","entriesToRender","isVersionLessOrEqual","designContext","header","PropertySheetCategory","DefaultCategory","addItem","getEntryAt","LayoutCategory","StyleCategory","SelectionAction","InlineAction","Validation","Refresh","displayCategoryNames","_categories","categoryName","addActionProperties","excludeProperties","iconUrlProperty","styleProperty","modeProperty","actionPeer","subPropertySheet","PropertySheet","populatePropertySheet","SubPropertySheetEntry","PropertySheetContext","PropertySheetEntry","spacing","onRender","CustomPropertySheetEntry","propertyName","causesPropertySheetRefresh","getPropertyValue","setPropertyValue","getAdditionalCommands","leftColumn","SizeAndUnit","SizeUnit","Pixel","verticalContentAlignment","VerticalAlignment","Center","rightColumn","columnSet","addColumn","horizontalAlignment","HorizontalAlignment","generateUniqueId","createInput","labelledBy","additionalCommands","commandColumn","actionSet","tooltip","altText","expanded","state","onExecute","addAction","SingleInputPropertyEditor","allowBinding","isMultiline","placeHolder","BaseStringPropertyEditor","commands","bindData","displayText","accessibleText","clickedElement","fieldPicker","FieldPicker","selectedField","StringPropertyEditor","rawValue","split","StringArrayPropertyEditor","parseFloat","NumberPropertyEditor","ObjectPropertyEditor","getCustomProperty","setCustomProperty","CustomCardObjectPropertyEditor","BooleanPropertyEditor","NotSetValue","isNullable","isCompact","Choice","choice","ChoicePropertyEditor","v1_2","currentStyle","ContainerStylePropertyEditor","NullableBooleanPropertyEditor","unit","Weight","ColumnWidthPropertyEditor","processedValue","HeightPropertyEditor","sizeUnit","physicalSize","SizeAndUnitPropertyEditor","forbiddenActionTypes","createInstance","actionType","typeName","excludeAction","ActionPropertyEditor","initializeProperty","CompoundPropertyEditor","enumType","valueAsInt","EnumPropertyEditor","collectionPropertyName","namePropertyName","valuePropertyName","createCollectionItem","namePropertyLabel","valuePropertyLabel","addButtonTitle","messageIfEmpty","collectionChanged","nameValuePairs","refreshPropertySheet","nameValuePair","collection","pair","messageTextBlock","textInput","nameColumn","valueColumn","removeAction","removeColumn","_inplaceEditor","_parent","_cardObject","isTreeItemExpandedByDefault","closeInplaceEditor","applyChanges","_inplaceEditorOverlay","tryOpenInplaceEditor","createInplaceEditor","cardObjectBoundingRect","getCardObjectBoundingRect","peerBoundingRect","topPadding","inplaceEditorHost","paddingTop","renderedInplaceEditor","onblur","doubleClick","isContainer","getToolTip","internalAddCommands","internalUpdateCssStyles","peerAdded","internalUpdateLayout","internalGetTreeItemText","updateChildren","defaultCategory","insertionPoint","promoteParentCommands","isPromotable","onlyFromCard","removeChildren","internalRemove","processChildren","DesignerPeer","onPopulatePropertySheet","showInPropertySheet","execute","idProperty","designSurfaceOffset","actionBoundingRect","Rect","isEnabledProperty","titleProperty","tooltipProperty","v1_5","ActionMode","Primary","Secondary","ActionStyle","Default","Positive","Destructive","v1_1","TypedActionPeer","ignoreInputValidationProperty","methodProperty","urlProperty","method","bodyProperty","headersProperty","v1_3","NameValuePairPropertyEditor","HttpHeader","BaseSubmitActionPeer","dataProperty","associatedInputsProperty","verbProperty","v1_4","insertElementAfter","newElement","insertItemAfter","findCardElementChild","findActionChild","existingPeer","indexOfAction","itemCount","CardElementContainer","getActionCount","getActionAt","targetChild","insertAfter","rect","insertItemBefore","cardElementBoundingRect","hasVisibleSeparator","separatorBoundingRect","separatorElement","max","dataContextProperty","whenProperty","isVisibleProperty","spacingProperty","separatorProperty","horizontalAlignmentProperty","heightProperty","TypedCardElementPeer","availableActions","typeRegistration","PeerCommand","alwaysShowName","popupMenu","Controls","menuItem","langProperty","fallbackTextProperty","speakProperty","refreshProperty","refresh","minHeightProperty","verticalContentAlignmentProperty","backgroundImageProperty","selectActionProperty","selectAction","RefreshDefinition","widthProperty","pixelWidthProperty","weightProperty","bleedProperty","column","columnCount","JsonTypeName","FillMode","newImage","addImage","ImageSizeProperty","ImageSize","isParentImageSet","altTextProperty","sizeProperty","pixelHeightProperty","backgroundColorProperty","Size","ImageStyle","selectedMediaType","posterUrlProperty","sourcesProperty","MediaSource","facts","array","Fact","factsProperty","InputPeer","labelProperty","isRequiredProperty","errorMessageProperty","placeholderProperty","isMultilineProperty","inlineActionProperty","inlineAction","maxLengthProperty","defaultValueProperty","regexProperty","InputTextStyle","minProperty","maxProperty","valueOnProperty","valueOffProperty","wrapProperty","isMultiselectProperty","choicesProperty","_renderedElement","applyStylesTo","TextBlockPeerInplaceEditor","textProperty","maxLinesProperty","fontTypeProperty","colorProperty","subtleProperty","FontType","TextSize","TextWeight","TextColor","asString","infoTextBlock","Large","textRun","TextRun","addInline","horizontalCellContentAlignmentProperty","verticalCellContentAlignmentProperty","columnsChanged","getColumnCount","columnDefinition","getColumnAt","widthInput","widthColumn","unitInput","unitColumn","removeActionColumn","TableColumnDefinition","addRow","firstRowAsHeadersProperty","columnsProperty","showGridLinesProperty","gridStyleProperty","cellSpacingProperty","TableColumnsPropertyEditor","clicked","DialogButton","_originalFocusedElement","dialogFrameElement","shiftKey","_firstFocusableElement","_lastFocusableElement","titleBarElement","titleElement","xButton","contentElement","buttonBarElement","buttons","focusableElements","Dialog","error","success","request","XMLHttpRequest","onerror","onload","_data","responseText","send","DRAG_THRESHOLD","_isPointerDown","_isPointerOver","pointerDown","_lastClickedPoint","offsetX","offsetY","pointerUp","pointerMove","abs","dragSourceElement","ondblclick","onmousedown","onpointerenter","onpointerleave","onpointerdown","_dragging","_treeView","onSelectedItemChanged","_selectedField","untypedBody","onfullscreenchange","fullScrerenChanged","onwebkitfullscreenchange","onmozfullscreenchange","MSFullscreenChange","enterFullScreen","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullScreen","untypedDocument","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","toggleFullScreen","fullscreen","webkitIsFullScreen","mozFullScreen","_getShortcutRow","shortcut","description","isHeader","shortcutText","shortcutCell","textAlign","descriptionCell","cardHeading","keyboardHeading","keyboardText","shortcutTable","union","otherRect","point","urlString","args","part","trim","replace","filter","firstChild","scrollLeft","preExpandSingleShowCardAction","supportsInteractivity","small","medium","large","extraLarge","lineThickness","lineColor","imageSizes","fontStyles","fontFamily","fontSizes","fontWeights","lighter","bolder","monospace","containerStyles","foregroundColors","subtle","accent","attention","good","warning","emphasis","dark","light","maxActions","buttonSpacing","showCard","actionMode","ShowCardActionMode","Inline","inlineTopMargin","actionsOrientation","Orientation","Horizontal","actionAlignment","ActionAlignment","adaptiveCard","allowCustomStyle","imageSet","imageSize","Medium","maxImageHeight","factSet","color","size","isSubtle","weight","Bolder","headers","getSampleImages","option","fetch","getPredictedData","imageContent","isTemplateBindingEnabled","image","endPoint","FetchManager","_uploadedImage","isTemplateOptionChecked","allowedImageSize","fetchManager","setContent","removeContent","renderTitle","renderTitleContent","renderUploadedImage","_imageElement","renderUploadButton","privacyLink","_buttonContainer","fileNote","renderCheckbox","createFileButton","createActionButton","checkboxContainer","inputElement","checkbox","customCheckboxElement","renderLabelText","checkFileSize","file","toFixed","files","FileReader","readAsDataURL","renderImage","_inputTemplate","generateErrorText","errorContent","onCardFailure","spinnerElement","uploadButton","loadSpinner","then","res","_predictedCardJSON","card_json","spinnerHostElement","spinnerText","imageName","renderUploadControl","renderUploadContainer","uploadTemplate","renderImageContainer","renderSampleTemplate","sampleImageTemplate","marginTop","imageTitle","templates","sampleImage","ImageItem","selectedImage","poweredByContainer","itemIndex","sampleImageName","imagePlaceholder","event","src","code","_editor","renderPreview","refreshPreview","_previewContainer","_previewElement","renderEditor","model","JSONSchemaCard","_output","editorContainer","editorLabel","editorElement","getNewItemId","prefix","newId","OpenSampleItem","_id","newItemId","onComplete","Function","thumbnailHost","displayNameElement","renderSection","listElement","itemElement","featuredSection","_builtinItems","divider","catalogueSection","init","assign","buttonElement","nameElement","determineIfStorageIsAvailable","storage","setItem","removeItem","DOMException","trySaveSetting","SettingsManager","isLocalStorageAvailable","localStorage","tryLoadStringSetting","getItem","tryLoadNumberSetting","returnValue","tryLoadBooleanSetting","_isLocalStorageAvailable","onToggled","showSplitter","hideSplitter","resizeEnded","onResizeEnded","resized","splitter","attachedTo","_splitter","collapsedTabContainer","_toolboxes","_isRestoring","_alignment","_collapsedTabContainer","expandedToolboxCount","toolboxInfo","stretch","_attachedTo","computeToolboxSize","boundingRect","toolboxBoundingRect","isVertical","saveState","toolboxResized","toolboxExpandedOrCollapsed","getDimensionSettingName","ToolboxInfo","_contentHost","ToolboxOrientation","Vertical","Splitter","splitterElement","Top","restoreState","dimensionSetting","sizedElement","isAttachedAfter","minimumSize","_isVertical","_isAttachedAfter","minimum","_sizedELement","_lastClickedOffset","sizeApplied","newSize","propertyLabel","_stretch","_orientation","updateContent","_content","toggled","orientation","_headerRootElement","headerContentElement","headerTitleElement","headerCommandsHostElement","_customCommandsHost","commandButtonElement","commandIconElement","_expandCollapseButtonElement","_headerIconElement","toggle","collapse","insertBefore","isExpandedSetting","getText","BasePaletteItem","designer","textBlock","DataPaletteItem","CustomPaletteItem","snippet","rootElementTypeName","adaptiveElement","SnippetPaletteItem","ToolbarElement","_displayCaption","_toolTip","_isEnabled","_allowToggle","_isToggled","isToggled","displayCaption","_caption","_dropDown","dropDownItem","pickerElement","_labelledById","pickerContainerElement","_elements","createSeparatorElement","renderElementsInto","separatorPosition","leftElements","rightElements","leftContainer","rightContainer","elementId","afterElementId","insertElementBefore","beforeElementId","rootItem","_selectedItem","setupTreeItemEvents","selectedItemChanged","treeRoot","__webpack_require__","cachedModule","toStringTag"],"sourceRoot":""}